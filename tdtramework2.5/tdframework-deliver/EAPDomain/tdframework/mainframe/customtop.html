<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK" />
<title>菜单定制</title>
	<meta http-equiv="MSThemeCompatible" content="no" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="-1" />
	<meta http-equiv="Cache-Control" content="no-cache" />


<!-- 自定页面级css样式  -->
<style type="text/css">


</style>

	<link rel="stylesheet" type="text/css" href="./css/modstyle.css" />
<style type="text/css">
.moduleGhost2{
	border: 1px dashed #F63;
	margin: 2px;
}

.mainArea td {vertical-align:top;}
</style>
<script src="./js/modutil.js" type="text/javascript"></script>

<!-- 页面级js  -->
<script language="javascript">
// <![CDATA[

function $(id){
	var obj=document.getElementById(id);
	return obj;
}


function isValid(obj){
	if (obj==null || typeof(obj)=="undefined" ){
		return false;
	}else{
		return true;
	}
}

	// 应用路径,如果使用jsp,则写成 var APP_PATH="＜％= request.getContextPath() ％＞";
	var APP_PATH="../..";

var myMgr1=new ModuleManager("id_1");

var OMenu=null;
	/*初始化函数*/
	function init(){
 
 myMgr1.addColumn($("col_left"));
 myMgr1.addColumn($("col_right"));
 
var mTem=$("template_module_body_1");
var mm=[];
OMenu= window.dialogArguments.MenuBar;

		for (var t=0;t<OMenu.topMenulist.length ;t++ ){
			var tm=OMenu.topMenulist[t];

			mm[t]=new Module(tm.menuId);

			mm[t].Info["title"]=tm.menuName;
			if (t>=OMenu.defaultMenuNum){
				mm[t].Info["col"]=$("col_right");
			}else{
				mm[t].Info["col"]=$("col_left");
			}
			
			mm[t].Info["minButton"]=true;
			mm[t].Info["closeButton"]=false;

			var bodyc="";
			if (OMenu.subMenulistMap[tm.menuId]){

			for (var tt=0;tt<OMenu.subMenulistMap[tm.menuId].length ;tt++ ){
				
				var sm=OMenu.subMenulistMap[tm.menuId][tt];
				bodyc+=(sm.menuName+"<br />");

			}
			}
			mm[t].Info["bodyContent"]=bodyc;
			mm[t].build(mTem,mTem.getAttribute("headId"),mTem.getAttribute("contentId"));
			myMgr1.addModule(mm[t]);
		}

			myMgr1.build();


	}


function setOrder(){
	var cc=myMgr1.getModulesOrder();
	var i=0;
	for (i=0;i<cc["col_left"].length ;i++ ){
	//alert(cc["col_left"][i].split("_")[0]);
		OMenu.getTopMenu( cc["col_left"][i].split("_")[0] ).order=i;
	}
	
	for (var j=0;j<cc["col_right"].length ;j++ ){

		OMenu.getTopMenu(cc["col_right"][j].split("_")[0]).order=i+j;
	}
window.dialogArguments.MenuBar.sortMenu();
window.dialogArguments.MenuBar.buildTopMenu();
window.dialogArguments.MenuBar.saveToCookie();
window.close();
}




/* 在下面写入 自定页面级js代码 */



// ]]>
</script>

</head>

<body class="mainBody" onLoad="init();"  >
<table class="mainArea" width="100%" height="100%" >
<tr>
	<td  width="100%" height="20px" colspan="2" style="background-color:#ffffff;">
	<div style="width:100%;text-align:center;padding:5px;">
	<a href="#" onFocus="this.blur();" onClick="setOrder();" ><u>&#160;保存并关闭&#160;</u></a><br />
	您可以拖动菜单项,来调整菜单的位置
	</div>
	</td>
</tr>
<tr>
	<td id="col_left" width="50%"   ></td>
	<td id="col_right" width="50%"  ></td>
</tr>
</table>

<div id="template_module_1" style="display:none;">


	<div class="module" style="" id="template_module_body_1" 
	headId="template_module_head_1" contentId="template_module_content_1">
		<div class="moduleHeader" id="template_module_head_1"></div>
		<div class="moduleContent" id="template_module_content_1" style="display:none;"></div>
	</div>


</div>


</body>
</html>
