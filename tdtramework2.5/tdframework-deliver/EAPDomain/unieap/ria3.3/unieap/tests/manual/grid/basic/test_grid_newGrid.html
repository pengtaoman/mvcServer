<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Grid Unit Test - 编程方式创建Grid</title>
		<style type="text/css">
			@import "../../../blackbird/blackbird.css";
			@import "../../../syntaxHighlighter/Styles/SyntaxHighlighter.css";
			@import "../../../../themes/default/css/unieap.css";
		</style>
		<script type="text/javascript" src="../../../blackbird/blackbird.js"></script>
		<script type="text/javascript" src="../../../syntaxHighlighter/Scripts/shCore.js"></script>
		<script type="text/javascript" src="../../../syntaxHighlighter/Scripts/shBrushXml.js"></script>
		<script type="text/javascript" src="../../../syntaxHighlighter/Scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="../../../../../dojo/dojo.js" djConfig="parseOnLoad:false,isDebug: true"></script>
		<script type="text/javascript" src="../data.js"></script>
        <script type="text/javascript">
			dojo.require("unieap.grid.Grid");
			dojo.require("unieap.layout.TitlePane");
        </script>
		<script type="text/javascript" src="test_grid_newGrid.js"></script>
    </head>
    <body class="unieap">
    	<h1 class="testTitle" id="title"></h1>
	    <script>
	        dojo.byId('title').appendChild(document.createTextNode("unieap.form.Grid Unit Test - 编程方式创建Grid"));
	    </script>
		
		<table border="1">
			<tr>
				<td><button id="btn_newGrid" onclick="newGrid()">点击在此处创建Grid</button></td>
			</tr>
		</table>
		<div dojoType="unieap.layout.TitlePane" title="创建Grid代码" open="false">
		<textarea name="code" class="js">
function newGrid() {
	var vm = {rowNumber: true};
	var s = buildStructure();
	var lm = {structure: s};
	var binding = {store:'empDataStore'};
	var grid = new unieap.grid.Grid({
		views: vm,
		layout: lm,
		binding: binding,
		width: 700,
		height: 250
	});
	var button = dojo.byId("btn_newGrid");
	var td = button.parentNode;
	td.appendChild(grid.domNode);
	td.removeChild(button);
}

function buildStructure() {
	var fixed={noscroll: true};
	fixed["rows"] = buildFixedRows();
	var header={};
	header["rows"] = buildRows();
	var layout = [fixed, header];
	return layout;
}
function buildFixedRows() {
	var rows = [];
	rows.push(buildFixedColumns());
	return rows;
}
function buildFixedColumns() {
	var row = [];
	var column = {
		label: "员工编号",
		name: "attr_empno",
		width: "150px"
	};
	row.push(column);
	return row;
}
function buildRows() {
	var rows = [];
	rows.push(buildColumns());
	return rows;
}
function buildColumns() {
	var row = [];
	var column = {
		label: "姓名",
		name: "NAME",
		width: "100px"
	};
	row.push(column);
	
	column = {
		label: "职位",
		name: "attr_job",
		width: "150px"
	};
	row.push(column);
	
	column = {
		label: "工资",
		name : "attr_sal",
		width : "150px"
	};
	row.push(column);
	return row;
}
		</textarea>
		</div>
    </body>
</html>
