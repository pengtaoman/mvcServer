<html>
<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="TEXT/HTML; CHARSET=GB2312">
<title>角色维护</title>
<SCRIPT LANGUAGE="JavaScript">

function Button1_OnClick()
{
    var priRoleName = form1.priRoleName.value;
	var roleName=form1.roleName.value;
	var roleDesc = form1.roleDesc.value;
	var valid = checkValues();
	if (valid != '') {
		alert(valid);
		return false;
	}
	
	if (roleName.length==0){
		alert ('您必须输入一个名称');
		return false;
	}
	window.returnValue=roleName+'`'+roleDesc+'`'+priRoleName;
	window.close();
}

function nas_enter(){
	var scode=(navigator.appname=="Nwtscape")?event.which:event.keyCode;
	if(scode == 13){
		//event.keyCode = 9;
		Button1_OnClick();
	}
}

function load()
{
    var nameDesc = window.dialogArguments;
    var nameDescAry = nameDesc.split('`');
    var newNewRoleName = nameDescAry[0];
    var roleDesc = nameDescAry[1];
    if(roleDesc == 'undefined' || roleDesc == undefined){
    	roleDesc = '';
    }
	form1.roleName.value=newNewRoleName;
	form1.roleDesc.value = roleDesc;
	form1.priRoleName.value = newNewRoleName;
}

function wClose()
{
	//window.returnValue='';
	window.close();
}

function checkValues()
{
	var msg = '';
	var roleName = document.getElementById('ss_NewFolder').value;
	var roleDesc = document.getElementById('roleDesc').value;
	if (roleName.indexOf('\'') >= 0) {
		msg = '名称中不允许出现非法字符';
	}
	if (roleName.indexOf('\"') >= 0) {
		msg = '名称中不允许出现非法字符';
	}
	if (roleName.indexOf('\\') >= 0) {
		msg = '名称中不允许出现非法字符';
	}
	if (roleDesc.indexOf('\'') >= 0) {
		msg = '描述中不允许出现非法字符';
	}
	if (roleDesc.indexOf('\"') >= 0) {
		msg = '描述中不允许出现非法字符';
	}
	if (roleDesc.indexOf('\\') >= 0) {
		msg = '描述中不允许出现非法字符';
	}
	return msg;
}

</SCRIPT>
<LINK REL="stylesheet" HREF="/tdframework/views/common/css/pubstyle.css" TYPE="text/css"/>
</head>

<body onload="load();">
<form name="form1">
<table border="0" cellpadding="0" cellspacing="0" id="AutoNumber1" class="tableType1">
  <tr height="20" class="trType">
    <td width="100%" ></td>
  </tr>
  </table>
<table border="0" cellpadding="0" cellspacing="0" class="tableType1" id="AutoNumber2">
  <tr class="trType">
    <td width="100%" colspan="2">　</td>
  </tr>
  <tr class="trType">
    <td width="100%" colspan="2" align="center">
   角色名称&nbsp;<input id="ss_NewFolder" name="roleName" type="text" class="textType" size="25" value="" onkeydown="nas_enter();" >　</td>
  </tr>
  <tr class="trType">
    <td width="100%" colspan="2" align="center">
   角色描述&nbsp;<input id="roleDesc" name="roleDesc" type="text" class="textType" size="25" value="" onkeydown="nas_enter();" >　</td>
  </tr>

  <tr height="15">
	<td width="100%" colspan="2"></td>
  </tr>
  <tr class="trType">
    <td width="50%" align="center"><input type="button" id="Button1" value="确定" class="button1" onClick="return Button1_OnClick();"></td>
    <td width="50%" align="center"><input type="button" id="Button2" value="取消" class="button1" onClick="wClose();"></td>
  </tr>
</table>
  <input type='hidden' name='priRoleName' value=''/>
</form>
</body> 
</html>