BusCard.define("/buscardapp/rela/js/getChangeSales.js",function(h,g){var i=this;var f=arguments[0];var c=arguments[1];var e=h.executeRequest;var d={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
i.init=function(){var b=i.$("contcatPhone");var a=i.$("addrId");var j=i.$("addrDetail");var l=i.$("branchNo");var k=i.$("serviceId");b&&(b.disabled=true);a&&(a.disabled=true);j&&(j.disabled=true);l&&(l.disabled=true);
k&&(k.disabled=true);this.serviceRelation=h.$remote("prodInstCommFacadeBO").getServiceRelationByProperties({userId:this.getCardRelationInfo().userId})[0]||h.$remote("prodInstDAO").queryById({prodInstId:parseInt(this.getCardRelationInfo().userId+"")});
if(this.serviceRelation){if(!this.serviceRelation.serviceId){this.serviceRelation.serviceId=this.serviceRelation.accNbr;}}this.renderDefaultValue(this.serviceRelation);if(!!i.$("paymentModeCd")){i.$("paymentModeCd").value=this.serviceRelation.billMode;
}(function(){var n=i.serviceRelation.addressId;var m=i.$("addrId");if(m){m.rvalue=n;var o=f.$remote("mktGetAddressNameDAO").getAddressNameById(i.serviceRelation.cityCode,n);if(o){o=o.replace(/"/g,"");}if(o&&o!="null"){m.value=o;
}else{m.value=n||"0";}}var q=BusCard.$remote("prodInstCommFacadeBO").getUserRoleChangeHisInfo({userId:(i.serviceRelation.userId||i.serviceRelation.prodInstId)})[0];if(!!q&&!!q.serviceGroupId){var p=BusCard.util.parse(BusCard.$remote("serviceParamBO").getServiceGroupName(q.cityCode,q.serviceGroupId,q.serviceKind));
i.$("serviceGroupId").rvalue=q.serviceGroupId;i.$("serviceGroupId").value=p;}})();};i.init();});
BusCard.define("/buscardapp/rela/js/AcceptSourceHandler.js",function(b,i){var h=this;var e=dojo.require("orderaccept.prodofferaccept.util");var d=dojo.require("orderaccept.common.js.ConstantsPool");var g=d.load("PaymentModeConst").PaymentModeConst;
var c=e.DomHelper.getParentWidget(h.$("acceptSource"),"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");var a=$ac$.mainProdOfferInstVO;var f=$ac$.selectedMemberProdOfferList;var j=null;
if(!a||!a.prodOfferInstId){j=dojo.filter(f,function(k){if(!!c&&!!c.cardParam){return k.uniqueId==c.cardParam.uniqueId;}return false;})[0];}if(!!h.$("acceptSource")){if((!!a&&!!a.prodOfferInstId)||(!!j&&!!j.prodInstId)){h.$("acceptSource").disabled=true;
}dojo.connect(h.$("acceptSource"),"onclick",function(){if(!!h.$("uimId")&&h.$("uimId").value!=""){h.$("uimId").onblur();}var l=false;if(!!h.$("paymentModeCd")&&h.$("paymentModeCd").value==g.PREPAID){l=true;
}var m=c.attrCardWidget;var o=!!m?m.busCardInstance:null;var n=dojo.query(".formRequested",o.$("label_100660"))[0];if(!n){dojo.place('<span class="formRequested">*</span>',o.$("label_100660"),"first");
n=dojo.query(".formRequested",o.$("label_100660"))[0];}dojo.style(n,"display","none");o.$("100660").setAttribute("isnull","1");if(h.$("acceptSource").checked){h.$("acceptSource").value="1";if(l==true&&!!o){o.$("100660").setAttribute("isnull","0");
dojo.style(n,"display","");var k=dojo.query("[id=subgroup_productAttrMore]",o.domNode)[0];if(!!k){o.displaySubGroup(k);}}}else{h.$("acceptSource").value="0";}});}});
BusCard.define("/buscardapp/rela/js/paymentModeCdHandler.js",function(a,k){var c=this;var d=c.$("paymentModeCd");var r=$ac$.get("requestParam");var t=c.getCardRelationInfo();var b=dojo.require("orderaccept.prodofferaccept.util");
var g=dojo.require("orderaccept.common.js.ConstantsPool");var h=g.load("PaymentModeConst").PaymentModeConst;var i=$ac$.get("selectedMemberProdOfferList");var l=dijit.getEnclosingWidget(c.dom);var p=null;
var j="";var m=null;if(c.dom&&c.dom.parentNode){p=dijit.getEnclosingWidget(c.dom.parentNode);}if(!!l&&l.cardParam){j=l.cardParam.uniqueId;}if(!!p&&!!j){m=dojo.query("[uniqueId="+j+"]",p.domNode)[0];}var u=dojo.filter(i,function(v){return v.uniqueId==j;
})[0];var o=false;if(!!u&&u.action=="nochange"){o=true;}var e=b.ProdOfferHelper.getMainProdOffer($ac$.get("prodOfferList"))[0];if(!!t){var f=c.serviceRelation;if(!f&&t.userId>0){f=a.$remote("prodInstCommFacadeBO").getServiceRelationByProperties({userId:t.userId})[0];
}var q=m.getAttribute("serviceKind");var n=(t.userId>0)&&!!o?f.billMode:(e.feeType==h.PREPAID?h.PREPAID:h.REAL_PREPAID);var s=[];dojo.forEach(d.options,function(v){if((n==h.PREPAID&&v.value!=h.PREPAID)||((n==h.POSTPAID||n==h.REAL_PREPAID)&&v.value==h.PREPAID)){s.push(v);
}});dojo.forEach(s,function(v){d.remove(v.index);});c.$("paymentModeCd").value=n;}});
BusCard.define("/buscardapp/rela/js/globalEyeNumber.js",function(_buscard,cardParam){var Me=this;var b=arguments[1];Me.productId=b.productId;Me.belongCode=b.belongCode;Me.cityCode=b.cityCode;var executeRequest=_buscard.executeRequest;
Me.getChooseNumber=function(){var parameter="productId="+Me.productId+"&cityCode="+Me.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";var areaId="-1";
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;var areaIdJsonStr=executeRequest("prodOfferSaleAjaxAction","getAreaId",parameter);
var jsonAreaIdObj=(typeof areaIdJsonStr=="string")?eval("("+areaIdJsonStr+")"):areaIdJsonStr;if(jsonAreaIdObj&&jsonAreaIdObj.flag&&jsonAreaIdObj.flag=="1"){areaId=jsonAreaIdObj.message;result="18"+areaId.substring(0,4)+"0001"+result+"00";
}}}catch(e){alert("\u751f\u6210\u53f7\u7801\u51fa\u9519");return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();
Me.$("link_serviceId").disabled=true;};});
BusCard.define("/buscardapp/rela/js/getSubGropNumber.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.cityCode=b.cityCode;
Me.productId=b.productId;Me.getChooseNumber=function(){var parameter="productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getSubGropNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;
}else{return false;}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};});
BusCard.define("/buscardapp/rela/js/groupProductHandler.js",function(f,e){var d=arguments[0];var c=arguments[1];var g=this;g.serviceId=c.serviceId;if(!!g.serviceId&&!!g.$("serviceId")){g.$("serviceId").value=g.serviceId;
}});
BusCard.define("/buscardapp/rela/js/installTimeHandler.js",function(d,k){var j=this;if(!window.installTimePopupIndx){window.installTimePopupIndx=1;}var b=dojo.require("orderaccept.common.dialog.MessageBox");
var g=dojo.require("orderaccept.prodofferaccept.util");var f=dojo.require("orderaccept.common.js.ConstantsPool");var e=g.DomHelper.getParentWidget(j.$("installTimeBtn"),"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");
var a=dojo.getObject("prodOfferAcceptLoader.mainProdOfferWidget");var h=$ac$.requestParam.customerData;if(!!a){var i=dojo.query("tr[uniqueId="+e.cardParam.uniqueId+"]",a.domNode)[0];if(!!i){var c="&ServiceKind="+i.getAttribute("serviceKind")+"&apply_event="+g.ACTION_CD_CONST.PRODUCT_INSTALL+"&infoId=1002";
var l=g.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+c);if(!!l&&l=="1"){j.$("installTimeBtn").className="formButtonL";dojo.style(j.$("installTimeBtn"),"cursor","pointer");
j.$("timeName")?j.$("timeName").disabled=true:null;dojo.connect(j.$("installTimeBtn"),"onclick",function(){var n=j.$("addrId");var q=j.$("bookDate");if(!n||!n.rvalue){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u8bf7\u5148\u9009\u62e9\u6807\u51c6\u5730\u5740"});
return false;}if(!q||!q.value){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u8bf7\u5148\u9009\u62e9\u9884\u7ea6\u88c5\u673a\u65f6\u95f4"});return false;}var p="<ADDR_ID>"+n.rvalue+"</ADDR_ID><PRODUCT_ID>"+j.productId+"</PRODUCT_ID><CUST_TYPE>"+h.custType+"</CUST_TYPE><CUST_BRAND>"+h.brandInd+"</CUST_BRAND><BOOK_DATE>"+q.value+"</BOOK_DATE>";
var m=BusCard.$remote("iomServiceBO").doIntallTimeQueryHandle(p);if(m.IS_SUCCESS=="T"){var o=1;var s='<div id="installTimePopup+'+window.installTimePopupIndx+'" class="buscard-root" style="width: 400px; height: auto;">											<div class="buscard-legend">												<span class="buscard-legend-img"></span>												<span class="buscard-legend-text">\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5</span>											</div>											<div class="buscard-content">												<div class="buscard-container">													<div class="buscard-subgroup">														<div class="buscard-row">';
dojo.forEach(m.SLA_INFO,function(u){s+="<div class=\"buscard-item-label\" style=\"width:6%;\"> 											<input type='radio' name='bookRadio' 												 timeName='"+m.SLA_INFO[0].TIME_NAME+"' 												 bookDate='"+m.SLA_INFO[0].BOOK_DATE+"' 												 timeNameId='"+m.SLA_INFO[0].TIME_NAME_ID+'\' /> 										</div>										<div class="buscard-item-el" style="width:24%;">'+m.SLA_INFO[0].TIME_NAME+"</div>";
if(o%3==0&&!!m.SLA_INFO[o+1]){s+='</div><div class="buscard-row">';}o++;});s+="</div></div></div></div></div>";unieap.showTooltip({inner:s,autoClose:true},j.$("timeName"),["below","above","before"]);var r=dojo.byId("installTimePopup+"+window.installTimePopupIndx);
if(!!r){var t=dojo.query("[name=bookRadio]",r);dojo.forEach(t,function(u){u.onclick=function(){!!j.$("bookDate")?j.$("bookDate").value=this.getAttribute("bookDate"):null;!!j.$("timeName")?j.$("timeName").value=this.getAttribute("timeName"):null;
!!j.$("installTimeSegmentId")?j.$("installTimeSegmentId").value=this.getAttribute("timeNameId"):null;!!j.$("bookDate")?j.$("bookDate").disabled=true:null;!!j.$("timeName")?j.$("timeName").disabled=true:null;
unieap.hideTooltip(j.$("timeName"));};});}window.installTimePopupIndx++;}else{if(m.IS_SUCCESS=="F"){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:m.ERROR_DESC});return false;}}});}else{if(!!j.$("installTimeBtn")){dojo.style(j.$("installTimeBtn"),"display","none");
}if(!!j.$("label_installTimeBtn")){dojo.style(j.$("label_installTimeBtn"),"display","none");}}}}});
BusCard.define("/buscardapp/rela/js/card_129_100151301.js",function(d,i){var h=this,f=$ac$.get("requestParam"),g=i.cityCode||f.cityCode||f.customerData.cityCode,e=BusCard.$remote("serviceParamDAO"),c=e.getCommonRegionByLevel(3).list||[],j=h.$("cityCode"),b=i.belongCode,a=h.$("belongCode");
BusCard.$rs(j,dojo.map(c,function(k){return{id:k.preserve_3,name:k.name};}));j.value=g;j.onchange=function(){var k=this,m=this.value,o=e.getAreaCollByCityCode(m).list;BusCard.$rs(a,o);var n=dojo.getObject("prodOfferAcceptLoader");
if(!!n&&!!n.getBelongCode){var l=n.getBelongCode();h.renderDefaultValue({belongCode:b||l});}BusCard.dispatchEvent(a,"change");};BusCard.dispatchEvent(j,"change");});
BusCard.define("/buscardapp/rela/js/installTimeSegment.js",function(c,b){var f=this;var a=dojo.require("orderaccept.prodofferaccept.util");var e=dojo.require("orderaccept.common.js.ConstantsPool");var d=dojo.require("orderaccept.common.dialog.MessageBox");
dojo.connect(f.$("timeName"),"onblur",function(){if(!f.$("timeName").value){return false;}var g=/^(\d{2}):(\d{2})-(\d{2}):(\d{2})$/;var h=f.$("timeName").value.match(g);if(!h||h[1]>24||h[3]>24||h[2]>60||h[4]>60){MessageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:'\u3010\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5\u3011\u683c\u5f0f\u5e94\u4e3a"HH:ss-HH:ss"'});
f.$("timeName").value="";return false;}if(h[1]>h[3]||(h[1]==h[3]&&h[2]>=h[4])){MessageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u3010\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5\u3011\u4e2d\u7ed3\u675f\u65f6\u95f4\u5e94\u5927\u4e8e\u5f00\u59cb\u65f6\u95f4"});
f.$("timeName").value="";return false;}});});
BusCard.define("/buscardapp/rela/js/agentNumberCardCheck.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];Me.productId=b.productId;Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;
Me.uniqueId=b.uniqueId;var executeRequest=_buscard.executeRequest;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");var uimDealer="";var numberDealer="";var ifVirtual="";var uimKind="";
var productInfo=BusCard.$remote("productToServiceDAO").queryById({productId:Me.productId});Me.checkIfCoop=function(value,coopFlag){var parameter="objectId="+value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag="+coopFlag;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return false;}if(resultJson.NUMBER!="-1"){return true;
}return false;};Me.uimDealerCheck=function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var isCode="";var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;
if(acceptWay==3){isCode="2";}else{isCode="1";}var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;
parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);
var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){uimDealer=jsonResultObj.allId.BELONGS_TO;$("sourceId").value=jsonResultObj.allId.BELONGS_TO;
uimKind=jsonResultObj.allId.UIM_KIND;if(jsonResultObj.allId.UIM_KIND!=30&&jsonResultObj.allId.UIM_KIND!=31){var param="serviceOfferId="+Me.serviceOfferId+"&resDealer="+jsonResultObj.allId.BELONGS_TO+"&serviceKind="+productInfo.netType+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doSourceDealerCheck",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});var ifCoop=Me.checkIfCoop(Me.$("uimId").value,"UIM_COOP_FLAG");
if(ifCoop){Me.$("serviceId").value="";}Me.$("uimId").value="";return false;}}}if(numberDealer==""){Me.numberDealerCheck();}}};Me.numberDealerCheck=function(){if(Me.$("serviceId").value!=""){var isCode="";
var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;if(acceptWay==3){isCode="2";}else{isCode="1";}var queryInfoObj={IF_VIRTUAL:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("serviceId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=1";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){ifVirtual=jsonResultObj.allId.IF_VIRTUAL;
if(jsonResultObj.allId.IF_VIRTUAL!="1"){numberDealer=jsonResultObj.allId.BELONGS_TO;var param="serviceOfferId="+Me.serviceOfferId+"&resDealer="+jsonResultObj.allId.BELONGS_TO+"&serviceKind="+productInfo.netType+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doSourceDealerCheck",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});var ifCoop=Me.checkIfCoop(Me.$("serviceId").value,"NO_COOP_FLAG");
if(ifCoop){Me.$("uimId").value="";}Me.$("serviceId").value="";return false;}if(uimDealer==""){Me.uimDealerCheck();}}}}};Me.numberCardDealerCheck=function(){var isCode="";var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;
if(acceptWay==3){isCode="2";}else{isCode="1";}if(Me.$("uimId").value!=""&&Me.$("serviceId").value!=""){if(productInfo.netType=="8"){if(ifVirtual!="1"){if(uimKind!="30"&&uimKind!="31"){var param="serviceOfferId="+Me.serviceOfferId+"&phoneDealer="+numberDealer+"&cardDealer="+uimDealer+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doCheckResSame",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});Me.$("uimId").value="";Me.$("serviceId").value="";return false;
}}}}}};Me.numberCardDealerCheckBefore=function(value,coopFlag){var parameter="objectId="+value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag="+coopFlag;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}if(ifVirtual=="1"){return;
}if(resultJson.NUMBER=="-1"&&ifVirtual!="1"){var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;var switch256=executeRequest("prodOfferSaleAjaxAction","ifCheckNumberResSame","");
if(switch256=="3"){Me.numberCardDealerCheck();}else{if(switch256=="1"){if(acceptWay=="3"){Me.numberCardDealerCheck();}}else{if(switch256=="2"){if(acceptWay!="3"){Me.numberCardDealerCheck();}}}}}};BusCard.addEventListener(Me.$("uimId"),"blur",function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){if(productInfo.netType==8||productInfo.netType==70){Me.uimDealerCheck();
Me.numberCardDealerCheckBefore(Me.$("uimId").value,"UIM_COOP_FLAG");}}});BusCard.addEventListener(Me.$("serviceId"),"blur",function(){if(Me.$("serviceId").value!=""){if(productInfo.netType==8||productInfo.netType==70){Me.numberDealerCheck();
Me.numberCardDealerCheckBefore(Me.$("serviceId").value,"NO_COOP_FLAG");}}});var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay");var batchFlag=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("batchFlag");
BusCard.addEventListener(acceptWay,"change",function(){if((Me.$("acceptSource")&&Me.$("acceptSource").checked==true&&acceptWay.value=="3")&&(!batchFlag||batchFlag.value=="0")){alert("\u9884\u767b\u5f55\u4e0d\u80fd\u9009\u62e9\u4ee3\u7406\u5546\u5165\u7f51");
acceptWay.value="1";return false;}else{if(Me.$("serviceId").value!=""){if(productInfo.netType==8||productInfo.netType==70){Me.numberDealerCheck();Me.numberCardDealerCheckBefore(Me.$("serviceId").value,"NO_COOP_FLAG");
}}if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){if(productInfo.netType==8||productInfo.netType==70){Me.uimDealerCheck();Me.numberCardDealerCheckBefore(Me.$("uimId").value,"UIM_COOP_FLAG");}}}});
BusCard.addEventListener(batchFlag,"change",function(){if((Me.$("acceptSource")&&Me.$("acceptSource").checked==true&&acceptWay.value=="3")&&(!batchFlag||batchFlag.value=="0")){alert("\u975e\u6279\u91cf\u53d7\u7406\u7684\u9884\u767b\u5f55\u4e0d\u80fd\u9009\u62e9\u4ee3\u7406\u5546\u5165\u7f51");
batchFlag.value="1";return false;}});if(Me.$("acceptSource")){dojo.connect(Me.$("acceptSource"),"onclick",function(){if(Me.$("acceptSource").checked==true){if(acceptWay.value=="3"&&(!batchFlag||batchFlag.value=="0")){alert("\u4ee3\u7406\u5546\u5165\u7f51\u4e0d\u80fd\u9009\u62e9\u9884\u767b\u5f55");
Me.$("acceptSource").checked=false;return false;}}});}});
BusCard.define("/buscardapp/rela/js/card_129_10081.js",function(g,n){try{var m=this;var l=arguments[0];var k=arguments[1];var p=l.path.contextPath;m.productId=k.productId;m.belongCode=k.belongCode;m.cityCode=k.cityCode;
var h=function(){if(window.customerData){return window.customerData;}else{return dojo.global.$appContext$.get("requestParam").customerData;}}();var j=h.custId;var c=null;var o=null;var f=function(q){var r=window.custOrderInfo?(window.custOrderInfo.custOrderId):"";
if(r&&/^(\d+)$/.test(r)){var t=BusCard.$remote("accessProdItemInfoDAO");try{var b=t.selectByProperties({custOrderId:parseInt(r),serviceKind:10});if(b&&b.length>0){var a=b.length;while(a--){if(b[a].serviceId==q){return true;
}}return false;}else{return false;}}catch(s){return false;}}else{return false;}};m.resetAddrId=function(b,s){var a=false;if(c!=null){for(var q=0;q<c.length;q++){var u=c[q];if(u.serviceId==b&&u.productId.toString()==s){m.$("addrDetail").value=u.addrDetail;
try{var t=l.$remote("mktGetAddressNameDAO").getAddressNameById(u.cityCode,u.addressId);if(t!=null&&t!=""){m.$("addrId").rvalue=u.addressId;m.$("addrId").value=t.replace(/"/g,"");}}catch(r){}a=true;break;
}}}if(!a){if(o!=null){for(var q=0;q<o.length;q++){var u=o[q];if(u.serviceId==b&&u.productId.toString()==s){m.$("addrDetail").value=u.addrDetail;try{var t=l.$remote("mktGetAddressNameDAO").getAddressNameById(u.cityCode,u.addrId);
if(t!=null&&t!=""){m.$("addrId").rvalue=u.addrId;m.$("addrId").value=t.replace(/"/g,"");}}catch(r){}break;}}}}};void function(){var q=m.$("serviceId");q.parentNode.className="buscard-el buscard-inline-buttom buscard-combobox-ctn";
var e=document.createElement("div");e.className="buscard-combobox-display-ctn";q.parentNode.appendChild(e);var b=m.$("link_serviceId");var a=m.$("link_serviceId").onclick;m.$("link_serviceId").onclick=function(){var A=document.getElementsByName("serviceId");
var s=BusCard.util.findAll(A,function(D){return(D!=q)&&(D.controlFieldName=="serviceId")&&(D.value!=null&&D.value!="");});var t=l.$remote("serviceRelationDAO").query({customerId:parseInt(h.custId),ifValid:1,cityCode:h.cityCode});
var u=l.util.findAll(t,function(D){return D.serviceKind==10||D.serviceKind==8;});var C=l.util.map(u,function(D){return{value:D.serviceId};});if(C!=null&&C.length>0){Array.prototype.push.apply(s,C);}var z=s.length;
var v=[];var w=[];for(var y=0;y<z;y++){if(w[s[y].value]!=1){v.push(s[y]);w[s[y].value]=1;}}if(v&&v.length>0){if(confirm("\u662f\u5426\u4ece\u5176\u4ed6\u4e1a\u52a1\u751f\u6210\u53f7\u7801?")){e.innerHTML="";
var x=BusCard.util.map(v,function(D){return{id:D.value,name:D.value};});var r=x.length;for(var y=0;y<r;y++){var B=l.$c("span");B.className="buscard-combobox-item";B.value=x[y].id||x[y].ids;B.innerHTML=x[y].name;
B.onclick=function(){q.value=this.innerHTML;if(!!q.setPPPOEPwd){q.setPPPOEPwd();}e.style.display="none";e.parentNode.style.zIndex="0";var I=dojo.query("[name=accServiceId-"+m.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",m.dom)[0]);
dojo.forEach(I||[],function(J){J.checked=false;});var E=this.innerHTML;var H=false;dojo.forEach(I||[],function(J){if(J.getAttribute("serviceid")==E){H=true;J.checked=true;}});if(!H){var G=[];var D=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);
dojo.forEach(D||[],function(J){var L=dojo.attr(J,"uniqueId");var K=dojo.attr(J,"serviceKind")||"-1";if(prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+L].busCardInstance.$("serviceId").value==E){G.push({uniqueId:L,serviceKind:K});
}});if(G.length>0){if(G.length>1){var F=dojo.filter(G||[],function(J){return J.serviceKind==8||J.serviceKind==10;});if(F.length>0){G=F;}}dojo.forEach(I||[],function(J){if(G[0].uniqueId==J.getAttribute("targetUniqueId")){J.checked=true;
}});}}};B.onmouseover=function(){this.className="buscard-combobox-item buscard-combobox-item-over";};B.onmouseout=function(){this.className="buscard-combobox-item buscard-combobox-item-out";};e.appendChild(B);
}e.parentNode.style.zIndex="10";e.style.display="block";}else{a.apply(b,[event||window.event]);}}else{a.apply(b,[event||window.event]);}};}();BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._xdsl_number_elem_list_=[];
var d={};d.service=m.$("serviceId");d.productId=m.productId;ordermgr.accept.compnew._xdsl_number_elem_list_.push(d);}catch(i){alert(i.message);}});
BusCard.define("/buscardapp/rela/js/setPreAccpetInfo.js",function(h,g){var i=this;var f=arguments[0];var c=arguments[1];var e=h.executeRequest;var d={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
i.init=function(){if(dojo.getObject("prodOfferAcceptLoader")!=null&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){var k=prodOfferAcceptLoader.preAcceptOrderVO;
var l=prodOfferAcceptLoader.preAcceptOfferVO;if(!!k){if(!!i.$("serviceId")&&!!k.serviceId){i.$("serviceId").value=k.serviceId;!!i.$("serviceId").onblur?i.$("serviceId").onblur():null;setTimeout(function(){!!i.$("serviceId").setPPPOEPwd?i.$("serviceId").setPPPOEPwd():null;
},3000);}if(!!i.$("addrId")){var b=k.standardAddressId;var a=i.$("addrId");if(a&&!!b){a.rvalue=b;var j=f.$remote("mktGetAddressNameDAO").getAddressNameById(k.acceptCity,b);if(j){j=j.replace(/"/g,"");}if(j&&j!="null"){a.value=j;
}else{a.value=b||"0";}}}if(!!i.$("bureauId")&&!!k.bureauId){i.$("bureauId").value=k.bureauId;}if(!!i.$("branchNo")&&!!k.bureauNo){i.$("branchNo").value=k.bureauNo;}}}};i.init();});
BusCard.define("/buscardapp/rela/js/card_129_100143301.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.controlServiceId=function(){g.$("link_serviceId").style.visibility="hidden";g.$("label_serviceId").innerHTML=g.$("label_serviceId").innerHTML.replace("??????","??????(?????)");
};g.controlServiceId();});
BusCard.define("/buscardapp/rela/js/card_129_100204301.js",function(b,a){var c=this;c.controlServiceId=function(){if(!!c.$("serviceId").getAttribute("isnull")){c.$("serviceId").setAttribute("isnull","1");
var d=dojo.query(".formRequested",c.$("label_serviceId"))[0];if(!d){dojo.place('<span class="formRequested">*</span>',c.$("label_serviceId"),"first");d=dojo.query(".formRequested",c.$("label_100660"))[0];
}dojo.style(d,"display","none");}};c.controlServiceId();});
BusCard.define("/buscardapp/rela/js/card_129_10057.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];Me.productId=b.productId;Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;
Me.uniqueId=b.uniqueId;Me.preCoopObj={offerIdList:[],uimInstId:"",ifOrdered:false};var executeRequest=_buscard.executeRequest;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");var util=dojo.require("orderaccept.prodofferaccept.util");
Me.checkIfBigGroup=function(){var prodOfferVO=$ac$.selectedMainProdOfferInfoVO;var feeType=prodOfferVO.feeType;if(feeType=1200){$("paymentModeCd").value=1200;$("paymentModeCd").disabled="true";}else{messageBox.alert({busiCode:"08410212"});
Me.$("uimId").value="";$("paymentModeCd").disabled=false;return false;}};Me.setProdOfferProperties=function(){var resultJsonStr=null;try{var queryInfoObj={BIND_MOBILE_NO:"0",BIND_SUGGEST_PRICE:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var mainProdOfferDetailWidget=null;
if(!!$ac$&&(!!$ac$.selectedMainProdOfferInfoVO)&&(!!$ac$.selectedMainProdOfferInfoVO.bindType)&&($ac$.selectedMainProdOfferInfoVO.bindType==2)){var loader=dojo.getObject("prodOfferAcceptLoader");var providerMap=loader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap;
mainProdOfferDetailWidget=providerMap["subProdOfferTreeContainer"+Me.uniqueId].prodOfferInfoWidget.mainProdOfferDetailWidget;}else{if(dojo.getObject("prodOfferAcceptLoader.mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance")){mainProdOfferDetailWidget=prodOfferAcceptLoader.mainProdOfferDetailWidget;
}}var phonePrice=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300014");if(phonePrice){phonePrice.value=jsonResultObj.allId.BIND_SUGGEST_PRICE;phonePrice.style.display="none";phonePrice.parentNode.previousSibling.style.display="none";
}var phoneNumber=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300013");if(phoneNumber){phoneNumber.value=jsonResultObj.allId.BIND_MOBILE_NO;}}}catch(e){throw new Error("\u83b7\u53d6\u9ed1\u8393\u4fe1\u606f\u9519\u8bef:"+resultJsonStr);
}};Me.ifCanHeiMei=function(){var resultJsonStr=null;try{var prodOfferInfoVO={};if($ac$){var prodOfferList=$ac$.get("prodOfferList"+Me.uniqueId);if(!prodOfferList){prodOfferList=$ac$.get("prodOfferList");
}prodOfferInfoVO=BusCard.find(prodOfferList||[],function(vo){return vo.prodOfferType==1;})||{};}if(prodOfferInfoVO){var resRelaList=prodOfferInfoVO.resRelaList;if(!resRelaList||!resRelaList.length){return false;
}var resIdList=[];for(var i=0;i<resRelaList.length;i++){resIdList.push(resRelaList[i].resourceKind);}var resId=resIdList.join("^");if(resId==""){resId="-1";}if(resId!="-1"){var validInfoObj={checkBlackberry:resId};
var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&productId="+Me.productId;
parameter+="&validJsonInfo="+validJsonInfo;resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getValidResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag){if(jsonResultObj.flag=="-1"){messageBox.alert({busiCode:"08410213",infoList:[jsonResultObj.message]});Me.$("uimId").value="";return false;}if(jsonResultObj.flag=="99"){dojo.global.$appContext$.set("checkBlackberry","99");
Me.checkIfBigGroup();Me.setProdOfferProperties();}}}}}catch(e){throw new Error("\u9ed1\u8393\u68c0\u6d4b\u9519\u8bef:"+e.message);}};Me.$("label_writeCardBtn").innerHTML="";Me.checkUim=function(){var E=Me.$("uimId");
var A=Me.$("uimId").value;var serviceId=Me.$("serviceId").value;if(!A){return true;}var ifCheckImsi="1";if(!A||!serviceId){ifCheckImsi="0";}var C="uimId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&serviceId="+serviceId+"&checkImsi="+ifCheckImsi;
var D=executeRequest("prodOfferSaleAjaxAction","checkUimResource",C);var B=executeAjaxResult(D);if(B==false){Me.$("uimId").value="";if(Me.$("serviceId").disabled==true){Me.$("serviceId").value="";Me.$("serviceId").disabled=false;
}return;}Me.$("uimResInstId").value=B;if(Me.$("serviceId")){var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}var param="&ServiceKind=8&apply_event=-1&infoId=8881";
var result=util.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+param);if(!!result&&result=="1"){if(resultJson.NUMBER=="-1"&&!!Me.$("acceptSource")&&Me.$("acceptSource").checked==true){Me.$("uimId").value="";
messageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u9884\u767b\u5f55\u7528\u6237\u53ea\u80fd\u9009\u62e9\u9884\u914d\u53f7\u7801"});return;}}if(!!Me.$("ifPreCoop")){Me.$("ifPreCoop").value=!!resultJson.OPEN_STATUS?resultJson.OPEN_STATUS:"";
}if(resultJson.NUMBER!="-1"){if(Me.$("serviceId").value==""||Me.$("serviceId").value!=resultJson.NUMBER){Me.$("serviceId").value=resultJson.NUMBER;Me.$("serviceId").onblur();}}else{if(Me.$("serviceId").disabled==true){Me.$("serviceId").value="";
Me.$("serviceId").disabled=false;}}}if(!!serviceId){var parameter="objectId="+serviceId+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=NO_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!!resultJson||resultJson.flag<=0){if(resultJson.NUMBER!="-1"&&serviceId!=resultJson.NUMBER){if(Me.$("uimId").value==""||Me.$("uimId").value!=resultJson.NUMBER){MessageBox.confirm({message:"\u4e1a\u52a1\u53f7\u7801\u4e3a\u9884\u914d\u53f7\u7801\uff0c\u4f46\u4e0e\u5f53\u524dUIM\u5361\u53f7\u4e0d\u5339\u914d\uff0c\u662f\u5426\u4fdd\u7559\u9884\u914d\u5173\u7cfb?",onComplete:function(value){if(value==true){Me.$("serviceId").onblur();
}else{Me.$("resInstId").value="";Me.$("serviceId").value="";}},iconCloseComplete:false},Me.$("serviceId"));}}}}if(Me.$("uimResInstId").value==""){if(Me.$("uimId").value!="9999"&&Me.$("uimId").value!=""){alert("\u8d44\u6e90\u5b9e\u4f8b\u4e3a\u7a7a");
Me.$("uimId").value="";}}};BusCard.addEventListener(Me.$("uimResInstId"),"propertychange",function(){Me.$("sourceName").innerHTML="";if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var parameter="&objectType="+ConstantsPool.load("ResourceConst").ResourceConst.OBJECT_TYPE_NUMBER+"&resourceType="+ConstantsPool.load("ResourceConst").ResourceConst.RESOURCE_TYPE_SMART_CARD+"&objectId="+Me.$("uimId").value+"&cityCode="+Me.cityCode;
Me.$("sourceName").innerHTML=Me.getSourceName(parameter);}var uimResInstId=Me.$("uimResInstId").value;if(!(window.$ac$&&window.$ac$.get("orderChangeFlag"))&&dojo.getObject("prodOfferAcceptLoader.multipleSubProdOfferHandler")!=null){var _prodvider=prodOfferAcceptLoader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap["subProdOfferTreeContainer"+Me.getIfMultipleOffer()];
if(!!_prodvider&&!!uimResInstId){if(Me.preCoopObj.ifOrdered==false||Me.preCoopObj.uimInstId!=uimResInstId){_prodvider.interFaceForCoopNum([]);var coopJson=Me.checkIfCoopNum();var ifCoopNum=coopJson.UIM_COOP_FLAG;
if(ifCoopNum=="1"){var prodOfferIdList=Me.getProdOfferListRel(coopJson.OTHER_INST_ID);_prodvider.interFaceForCoopNum(prodOfferIdList);Me.preCoopObj.offerIdList=prodOfferIdList;Me.preCoopObj.uimInstId=uimResInstId;
Me.preCoopObj.ifOrdered=true;}else{Me.preCoopObj.offerIdList=[];Me.preCoopObj.uimInstId=uimResInstId;Me.preCoopObj.ifOrdered=false;}}}}});Me.getProdOfferListRel=function(uimResInstId){var prodOfferId=null;
if($ac$.selectedMainProdOfferInfoVO.bindType==2){var selectedMemberProdOfferList=$ac$.selectedMemberProdOfferList;var targetSelectMem=BusCard.find(selectedMemberProdOfferList||[],function(_data){return _data.uniqueId==Me.uniqueId;
});prodOfferId=!!targetSelectMem?targetSelectMem.prodOfferId:-1;}else{prodOfferId=$ac$.selectedMainProdOfferInfoVO.prodOfferId;}var belongCode=function(){try{return prodOfferAcceptLoader.getBelongCode();
}catch(e){}}();return util.ServiceFactory.getService("url:orderDetailAction.do?method=getProdOfferForCoopNum&belongCode="+(belongCode||"")+"&uimResInstId="+uimResInstId+"&cityCode="+Me.cityCode+"&prodOfferId="+prodOfferId);
};Me.getIfMultipleOffer=function(){if($ac$.selectedMainProdOfferInfoVO.bindType==2){return Me.uniqueId;}else{return"";}};Me.checkIfCoopNum=function(){var A=Me.$("uimId").value;var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","doCheckIfCoopNum",parameter);var resultJson=dojo.fromJson(resultJsonStr);return resultJson.resourceInfo;};Me.getSourceName=function(parameter){var dealerName=executeRequest("prodOfferSaleAjaxAction","getSourceName",parameter);
return dealerName;};Me.$("uimId").onblur=function(){try{Me.checkUim();var returnValue=Me.$("uimResInstId").value;var valueArray=returnValue.split(",");var uimList=dojo.query("[id=uimId]",dojo.query(".main-prodoffer-table")[0]);
dojo.forEach(uimList||[],function(oneUim){if(oneUim!=Me.$("uimId")&&valueArray[1]&&valueArray[1]!="-1"){oneUim.value=valueArray[1];oneUim.disabled=true;oneUim.onblur();}});Me.$("uimResInstId").value=valueArray[0];
if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var parameter="&objectType="+ConstantsPool.load("ResourceConst").ResourceConst.OBJECT_TYPE_NUMBER+"&resourceType="+ConstantsPool.load("ResourceConst").ResourceConst.RESOURCE_TYPE_SMART_CARD+"&objectId="+Me.$("uimId").value+"&cityCode="+Me.cityCode;
Me.$("sourceName").innerHTML=Me.getSourceName(parameter);Me.ifCanHeiMei();}}catch(e){throw new Error("\u5361\u68c0\u6d4b\u5931\u8d25:"+e.message);}};Me.getUimBelongsInfo=function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};
var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;
parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var uimBelongsTo=jsonResultObj.allId.BELONGS_TO;$ac$.set("belongsTO_"+Me.uniqueId,uimBelongsTo);}}};Me.$("serviceId").onfocus=function(){try{Me.getPreselectPhoneNo();
}catch(e){throw new Error("\u9884\u9009\u53f7\u5904\u7406\u9519\u8bef:"+e.message);}};Me.getPreselectPhoneNo=function(){var prodOfferAcceptLoader=dojo.getObject("prodOfferAcceptLoader");var preAcceptFlag=prodOfferAcceptLoader.requestParam.preAcceptFlag;
var preselectPhoneNoSelected=prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected;if(preAcceptFlag!=1&&preselectPhoneNoSelected!=1){var identityKind=prodOfferAcceptLoader.requestParam.identityKind;
var identityCode=prodOfferAcceptLoader.requestParam.identityCode;if(!(identityKind&&identityCode)){return false;}var para="&identityKind="+identityKind+"&identityCode="+identityCode;var resultJsonStr=executeRequest("newCustRecognitionAction","getPreselectPhone",para);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected="1";var count=jsonResultObj.count;
if(count>0){if(confirm("\u662f\u5426\u9009\u62e9\u9884\u9009\u53f7\u7801\u4f5c\u4e3a\u65b0\u53f7\u7801")){Me.$("serviceId").value=jsonResultObj.serviceId;}}}}catch(e){messageBox.alert({busiCode:"08410213",infoList:[e.message]});
}}};Me.getPreselectPhoneNo();});
BusCard.define("/buscardapp/rela/js/bureauHandler.js",function(g,s){var q=this;var o=arguments[0];var n=arguments[1];var k=n.serviceRelation||this.serviceRelation||{};var j=n.belongCode||k.belongCode;var h=q.$("belongCode");
var f=q.$("addrId");var m=q.$("addrDetail");var i=o.$remote("serviceParamBO");var t=q.$("bureauId");var r=q.$("branchNo");var d=false;var e=function(c,a){if(r){var b=i.getBureauId(5,c,a);if(b&&b.list){o.$rs(r,b.list);
}if(q.postBureauOrBranchNoChangeHandle){q.postBureauOrBranchNoChangeHandle();}}};if(h){q.renderDefaultValue({belongCode:j});}var p=function(v){var x=q.$("cityCode");var b=n.cityCode;if(x){b=x.value;}if(!q.$("belongCode")&&v){var u=BusCard.$remote("commonRegionDAO","om");
var a=u.getCommonRegionVO(parseInt(v+""));if(a.regionLevel>=5){v=a.upRegionId+"";}}if(t){var w=i.getBureauId(4,v,b);if(w&&w.list){o.$rs(t,w.list);}t.onchange=function(){e(this.value,b);};if(k&&k.bureauId&&!d){t.value=k.bureauId+"";
BusCard.dispatchEvent(t,"change");r&&(r.value=k.branchNo+"");d=true;}else{BusCard.dispatchEvent(t,"change");}}else{if(r){if(k&&k.branchNo){var c=i.getBureauIdForChg(5,v,b);if(c&&c.list){o.$rs(q.$("branchNo"),c.list);
}q.$("branchNo").value=k.branchNo+"";}}}};var l=function(){if(f){f.value="";}if(m){m.value="";}};if(h){h.onchange=function(){p(this.value);if(!q.$("ifSpanBureau")||(q.$("ifSpanBureau").value&&q.$("ifSpanBureau").value>0)){l();
}};BusCard.dispatchEvent(h,"change");}else{p(j);}BusCard.addEventListener(q.$("branchNo"),"change",function(){if(q.postBureauOrBranchNoChangeHandle){q.postBureauOrBranchNoChangeHandle();}});});
BusCard.define("/buscardapp/rela/js/fixedSyncHandler.js",function(g,p){try{var o=this;var i="/129/addrDetail/change";var b="/129/addrId/change";var d="/129/bookBegDate/change";var n="/129/bookEndDate/change";
var c=/^(\d+)\-(\d+)\-(\d{2,2})$/;o.subscribe(i);o.subscribe(b);o.subscribe(d);o.subscribe(n);var m=o.$("addrDetail"),f=o.$("addrId"),h=o.$("installBegTime"),a=o.$("installEndTime");o.on(m,"blur",function(){o.publish(i,this.value);
});o.on(f,"blur",function(){o.publish(b,this.value);});var l=function(t){if(h&&a&&c.test(h.value)&&c.test(a.value)){var e=new Date();var r=new Date();var s=h.value.split("-");e.setFullYear(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10));
s=a.value.split("-");r.setFullYear(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10));if(e>r){alert("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4");t.value="";t.focus();
return false;}}return true;};var k=function(s){if(c.test(s.value)){var t=new Date(),e=new Date();var r=s.value.split("-");e.setFullYear(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10));if(e<t){alert("\u5f00\u59cb\u65f6\u95f4\u6216\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4");
s.value="";s.focus();return false;}}};o.on(h,"propertychange",function(){var e=event||window.event;if(e.propertyName=="value"&&c.test(this.value)){if(k(this)==false){return false;}if(l(this)==false){return false;
}o.publish(d,this.value);}});o.on(a,"propertychange",function(){var e=event||window.event;if(e.propertyName=="value"&&c.test(this.value)){if(k(this)==false){return false;}if(l(this)==false){return false;
}o.publish(n,this.value);}});o.receive=function(e){var s=e.path;var r=e.data;if(s==i){if(!m.value){m.value=r;}}else{if(s==b){if(!f.value){f.value=r;}}else{if(s==d){if(!h.value){h.value=r;}}else{if(s==n){if(!a.value){a.value=r;
}}}}}};if(!!m){var q=o.getCardRelationInfo();if(!!q){if(q.userId>0&&!!q.addrDetail){m.value=q.addrDetail;m.onblur();}}}}catch(j){alert(j.message);}});
BusCard.define("/buscardapp/rela/js/card_129_100162301.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.controlServiceId=function(){g.$("link_serviceId").style.visibility="hidden";g.$("serviceId").readOnly=false;
};g.controlServiceId();});
BusCard.define("/buscardapp/rela/js/extraInfo.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;var unicoder={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
if(!!Me.$("serviceGroupId")){Me.$("serviceGroupId").onquery=function(){var checkbox=this,_card=arguments[0],_buscard=arguments[1],_p=arguments[2];var value=_buscard.util.trim(this.value);if(!value){alert("\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd");
this.focus();return false;}var data={productId:_p.productId,name:value,fieldId:this.getAttribute("fieldId")};var jsonData=BusCard.util.native2ascii(_buscard.toJson(data));var requestParam={jsonData:jsonData,method:"query"};
return _buscard.util.doGet(_buscard.path.initPath,requestParam);};}if(!!Me.$("groupId")){Me.$("groupId").onquery=function(){var checkbox=this,_card=arguments[0],_buscard=arguments[1],_p=arguments[2];_data=arguments[3];
var value=_buscard.util.trim(this.value);if(Me.$("groupName").value==""&&Me.$("groupMarker").value==""){alert("[\u96c6\u56e2\u540d\u79f0]\u548c[\u96c6\u56e2\u6807\u8bc6]\u81f3\u5c11\u8f93\u5165\u4e00\u9879!");
Me.$("groupName").focus();return;}var data={groupName:_data.groupName,groupMarker:_data.groupMarker,cityCode:b.cityCode,fieldId:this.getAttribute("fieldId")};var jsonData=BusCard.util.native2ascii(_buscard.toJson(data));
var requestParam={jsonData:jsonData,method:"query"};return _buscard.util.doGet(_buscard.path.initPath,requestParam);};Me.$("groupId").onchange=function(){var cityCode=b.cityCode;var productId=b.productId;
var name=Me.$("groupId").options[Me.$("groupId").selectedIndex].innerHTML;var C="cityCode="+cityCode+"&productId="+productId+"&name="+BusCard.util.native2ascii(name);var resultJsonStr=executeRequest("orderDetailAction","getUserRoleParam",C);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){serviceGroupName=jsonResultObj.serviceGroupName;if(serviceGroupName!=null){Me.$("serviceGroupId").value=serviceGroupName;
}}}catch(e){return false;}};}});
BusCard.define("/buscardapp/rela/js/getStandardAddr.js",function(g,f){var i=this;var d=arguments[0];var c=arguments[1];if(i.$("addrId")){i.$("addrId").disabled=true;}i.belongCode="";if(!i.belongCode&&i.getCardRelationInfo().serviceRelation){i.belongCode=i.getCardRelationInfo().serviceRelation.belongCode;
}i.cityCode=c.cityCode;i.getStandardAddr=function(){var m=new StandardAddInterface({"$":function(n){return i.$(n);}});var l={StandardAddInterface:m};var k=BusCard.$session.container2;var j=BusCard.$session.workNo;
var a=BusCard.$session.PASSWORD;var e=BusCard.$session.areaCode;if(!i.belongCode){i.belongCode=c.serviceRelation.belongCode;}var b=k+"resource/interfacemanage/standardadd/StandardAddrQuery.jsp?STAFFNO="+j+"&PASSWORD="+a+"&workNo="+j+"&regionno="+e+"&cityCode="+i.cityCode+"&areaCode="+i.belongCode+"&productId="+i.productId;
i.windowResourceStardardAddress=window.showModalDialog(b,l,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no");};if(i.$("link_addrId")){i.$("link_addrId").onclick=function(){var a=i.$("belongCode");
if(a){var j=i.$("cityCode");if(j){i.cityCode=j.value;}i.belongCode=a.value;}else{i.belongCode=i.belongCode||c.belongCode;}if(!i.$("belongCode")&&i.belongCode){var e=BusCard.$remote("commonRegionDAO","om");
var b=e.getCommonRegionVO(parseInt(i.belongCode+""));if(b.regionLevel>=5){i.belongCode=b.upRegionId+"";}}i.getStandardAddr();};}try{void function(){var k=c.serviceRelation;if(k){var e=k.addrDetail;var b=k.addressId;
var a=i.$("addrId");if(e&&i.$("addrDetail")){i.$("addrDetail").value=e;}if(b&&/^(\d+)$/.test(b.toString())){if(a){a.rvalue=b;}var j=d.$remote("mktGetAddressNameDAO").getAddressNameById(k.cityCode,b);if(j){j=j.replace(/"/g,"");
}if(j!="null"&&j&&a&&j!='""'){a.value=j;}}}}();}catch(h){alert(h.message);}if(i.$("addrDetail")){i.$("addrDetail").onmouseover=function(){i.$("addrDetail").title=i.$("addrDetail").value;};}if(i.$("addrId")){i.$("addrId").onmouseover=function(){i.$("addrId").title=i.$("addrId").value;
};}});
BusCard.define("/buscardapp/rela/js/checkPassword.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.checkPassword=function(){var b=window.event;if(b){b=b.srcElement;}if(b&&b.value!=""&&b.value.length<6){alert("\u5bc6\u7801\u5fc5\u987b\u662f6\u4f4d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");
b.value="";b.focus();return false;}if(b&&b.value){jsCommon.checkEasyPassword(b);}var i="passwordConfirm";if(isValid(b)){i=b.name;}var a=g.$("password");var h=g.$("passwordConfirm");if(a&&h&&a.value!=""&&h.value!=""&&a.value!=h.value){alert("\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");
h.value="";h.focus();return false;}return true;};g.$("password").onblur=function(){g.checkPassword();};g.$("passwordConfirm").onblur=function(){g.checkPassword();};});
BusCard.define("/buscardapp/rela/js/getPSTNNumberAndRes.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.productId=b.productId;
Me.serviceOfferId=b.serviceOfferId;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");void function(){if(!Me.postBureauOrBranchNoChangeHandleList){Me.postBureauOrBranchNoChangeHandleList=[];
}Me.postBureauOrBranchNoChangeHandleList.push(function(){var serviceIdElem=Me.$("serviceId");var resInstIdElem=Me.$("resInstId");serviceIdElem&&(serviceIdElem.value="");resInstIdElem&&(resInstIdElem.value="");
});Me.postBureauOrBranchNoChangeHandle=function(){var handleList=Me.postBureauOrBranchNoChangeHandleList||[];var length=handleList.length;for(var bindex=0;bindex<length;bindex++){try{handleList[bindex].apply(Me);
}catch(e){}}};}();Me.addPreDataBuilderAspect(function(ignoreCheck){if(window.prodOfferAcceptLoader!=null){dojo.require("orderaccept.prodofferaccept.util");if(Me.serviceOfferId==prodOfferAcceptLoader.getServiceOfferConfigVO(orderaccept.prodofferaccept.util.ACTION_CD_CONST.PRODUCT_INSTALL).serviceOfferId){if(!!ignoreCheck){return true;
}var resInstNode=Me.$("resInstId");var serviceIdNode=Me.$("serviceId");if(resInstNode&&resInstNode.value==""&&serviceIdNode&&serviceIdNode.value!=""){messageBox.alert({message:"\u53f7\u7801"+Me.$("serviceId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u53f7\u7801\u7684\u6570\u636e\u4fe1\u606f"});
return false;}}else{return true;}}else{return true;}});Me.getBureauId=function(){var node=Me.$("bureauId");return node&&node.value||b.serviceRelation&&b.serviceRelation.bureauId||"";};Me.getbranchNo=function(){var node=Me.$("branchNo");
return node&&node.value||b.serviceRelation&&b.serviceRelation.branchNo||"";};if(Me.$("lanId")){Me.cityCode=Me.$("lanId").value;}else{Me.cityCode=b.cityCode;}Me.getChooseNumber=function(){var productId=Me.productId;
var parameter="productId="+productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}if(result=="-1"){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._pstn_number_elem_list_;}catch(e){}var B={ServiceIdInterface:new ServiceIdInterface({"$":function(id){return Me.$(id);
}}),cdmaServiceIdElemList:cdmaServiceIdElemList,bureauId:Me.getBureauId(),branchNo:Me.getbranchNo()};var container2=BusCard.$session.container2;var workNo=BusCard.$session.workNo;var endpassword=BusCard.$session.PASSWORD;
var noDept=BusCard.$session.acceptDealer;if(Me.$("lanId")){Me.cityCode=Me.$("lanId").value;}else{Me.cityCode=b.cityCode;}var webPath=container2+"resource/interfacemanage/selectno/SelectNoMain.jsp?STAFFNO="+workNo+"&PASSWORD="+endpassword+"&noDept="+noDept+"&cityCode="+Me.cityCode+"&productId="+Me.productId+"&sortId=2&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo();
Me.windowResourceServiceId=window.showModalDialog(webPath,B,"DialogWidth:1000px;DialogHeight:600px;status:no;location:no");}else{var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.onblur();
oServiceId.readOnly=true;}};Me.checkResource=function(){var E=Me.$("serviceId");var A=Me.$("serviceId").value;if(!A){return true;}if(Me.serviceOfferId==9){var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo()+"&cityCode="+Me.cityCode;
}else{var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo()+"&cityCode="+Me.cityCode;}if(!!dojo.getObject("prodOfferAcceptLoader")&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){if(!!prodOfferAcceptLoader.preAcceptOrderVO.serviceId&&prodOfferAcceptLoader.preAcceptOrderVO.serviceId==A){C+="&ignoreCheck=1";
}}var D=executeRequest("prodOfferSaleAjaxAction","checkResource",C);var B=executeAjaxResult(D);if(B==false){Me.resetServiceId();return;}B=B.split("&");if(B[1]){alert(B[1]);}Me.$("resInstId").value=B[0];
};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var pstnServiceIdElemList=null;try{pstnServiceIdElemList=ordermgr.accept.compnew._pstn_number_elem_list_;
}catch(e){}var chooseServiceId=Me.$("serviceId").value;if(pstnServiceIdElemList){var len=pstnServiceIdElemList.length;var count=0;while(len--){var current=pstnServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;
}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");Me.$("serviceId").value="";Me.$("resInstId").value="";}}};Me.resetServiceId=function(){Me.$("serviceId").value="";
};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onblur=function(){Me.checkResource();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();
};BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._pstn_number_elem_list_=ordermgr.accept.compnew._pstn_number_elem_list_||[];var serviceObj={};serviceObj.service=Me.$("serviceId");
serviceObj.productId=Me.productId;ordermgr.accept.compnew._pstn_number_elem_list_.push(serviceObj);}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/getCDMANumberAndRes.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.productId=b.productId;
Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;Me.uniqueId=b.uniqueId;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");Me.addPreDataBuilderAspect(function(ignoreCheck){if(window.prodOfferAcceptLoader!=null){dojo.require("orderaccept.prodofferaccept.util");
if(Me.serviceOfferId==prodOfferAcceptLoader.getServiceOfferConfigVO(orderaccept.prodofferaccept.util.ACTION_CD_CONST.PRODUCT_INSTALL).serviceOfferId){if(!!ignoreCheck){return true;}var resInstNode=Me.$("resInstId");
var serviceIdNode=Me.$("serviceId");if(resInstNode&&resInstNode.value==""&&serviceIdNode&&serviceIdNode.value!=""){messageBox.alert({message:"\u53f7\u7801"+Me.$("serviceId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u53f7\u7801\u7684\u6570\u636e\u4fe1\u606f"});
return false;}var uimIdNode=Me.$("uimId");var uimResInstNode=Me.$("uimResInstId");if(uimResInstNode&&uimResInstNode.value==""&&uimIdNode&&uimIdNode.value!=""){messageBox.alert({message:"\u5361\u53f7"+Me.$("uimId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u5361\u53f7\u7684\u6570\u636e\u4fe1\u606f"});
return false;}}else{return true;}}else{return true;}});Me.dealOldAgentSourceId=function(){var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;
parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);
var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){uimDealer=jsonResultObj.allId.BELONGS_TO;$("sourceId").value=jsonResultObj.allId.BELONGS_TO;
}};Me.checkIfBigGroup=function(){var prodOfferVO=$ac$.selectedMainProdOfferInfoVO;var feeType=prodOfferVO.feeType;if(feeType=1200){$("paymentModeCd").value=1200;$("paymentModeCd").disabled="true";}else{messageBox.alert({busiCode:"08410212"});
Me.$("uimId").value="";$("paymentModeCd").disabled=false;return false;}};Me.setProdOfferProperties=function(){var resultJsonStr=null;try{var queryInfoObj={BIND_MOBILE_NO:"0",BIND_SUGGEST_PRICE:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var mainProdOfferDetailWidget=null;
if(!!$ac$&&(!!$ac$.selectedMainProdOfferInfoVO)&&(!!$ac$.selectedMainProdOfferInfoVO.bindType)&&($ac$.selectedMainProdOfferInfoVO.bindType==2)){var loader=dojo.getObject("prodOfferAcceptLoader");var providerMap=loader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap;
mainProdOfferDetailWidget=providerMap["subProdOfferTreeContainer"+Me.uniqueId].prodOfferInfoWidget.mainProdOfferDetailWidget;}else{if(dojo.getObject("prodOfferAcceptLoader.mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance")){mainProdOfferDetailWidget=prodOfferAcceptLoader.mainProdOfferDetailWidget;
}}var phonePrice=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300014");if(phonePrice){phonePrice.value=jsonResultObj.allId.BIND_SUGGEST_PRICE;phonePrice.style.display="none";phonePrice.parentNode.previousSibling.style.display="none";
}var phoneNumber=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300013");if(phoneNumber){phoneNumber.value=jsonResultObj.allId.BIND_MOBILE_NO;}}}catch(e){throw new Error("\u83b7\u53d6\u9ed1\u8393\u4fe1\u606f\u9519\u8bef:"+resultJsonStr);
}};Me.ifCanHeiMei=function(){var resultJsonStr=null;try{var prodOfferInfoVO={};if($ac$){var prodOfferList=$ac$.get("prodOfferList"+Me.uniqueId);if(!prodOfferList){prodOfferList=$ac$.get("prodOfferList");
}prodOfferInfoVO=BusCard.find(prodOfferList||[],function(vo){return vo.prodOfferType==1;})||{};}if(prodOfferInfoVO){var resRelaList=prodOfferInfoVO.resRelaList;if(!resRelaList||!resRelaList.length){return false;
}var resIdList=[];for(var i=0;i<resRelaList.length;i++){resIdList.push(resRelaList[i].resourceKind);}var resId=resIdList.join("^");if(resId==""){resId="-1";}if(resId!="-1"){var validInfoObj={checkBlackberry:resId};
var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&productId="+Me.productId;
parameter+="&validJsonInfo="+validJsonInfo;resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getValidResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag){if(jsonResultObj.flag=="-1"){messageBox.alert({busiCode:"08410213",infoList:[jsonResultObj.message]});Me.$("uimId").value="";return false;}if(jsonResultObj.flag=="99"){dojo.global.$appContext$.set("checkBlackberry","99");
Me.checkIfBigGroup();Me.setProdOfferProperties();}}}}}catch(e){throw new Error("\u9ed1\u8393\u68c0\u6d4b\u9519\u8bef:"+e.message);}};Me.checkIfVirtual=function(){var queryInfoObj={IF_VIRTUAL:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("serviceId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=1";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){if(jsonResultObj.allId.IF_VIRTUAL=="1"){if(_buscard.$("100690")){_buscard.$("100690").value=1;
_buscard.$("100690").checked=true;}Me.$("uimId").value="9999";Me.$("uimId").disabled=true;}else{if(_buscard.$("100690")){_buscard.$("100690").value=0;_buscard.$("100690").checked=false;}}}};Me.cardTypeFillValue=function(){var queryInfoObj={IF_GC_CARD:"0"};
var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var param="mktResType=2&mktResId="+Me.$("uimId").value+"&productId="+Me.productId+"&serviceOfferId="+Me.serviceOfferId+"&queryJsonInfo="+queryJsonInfo;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",param);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance){var targetAttr=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance.$("300001");
if(!!targetAttr){if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){targetAttr.value=jsonResultObj.allId.IF_GC_CARD;}else{targetAttr.value="";}}}};Me.checkResource=function(){var E=Me.$("serviceId");
var A=Me.$("serviceId").value;if(!A){return true;}var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode;if(!!dojo.getObject("prodOfferAcceptLoader")&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){if(!!prodOfferAcceptLoader.preAcceptOrderVO.serviceId&&prodOfferAcceptLoader.preAcceptOrderVO.serviceId==A){C+="&ignoreCheck=1";
}}var D=executeRequest("prodOfferSaleAjaxAction","checkResourceDealerInfo",C);var B=executeAjaxResult(D);if(B==false){Me.resetServiceId();if(Me.$("uimId").disabled==true){Me.$("uimId").value="";Me.$("uimId").disabled=false;
}return;}B=B.split("&");if(B[1]){messageBox.alert({busiCode:"08410215",infoList:[B[1]]});}Me.$("resInstId").value=B[0];if(Me.$("uimId")){var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=NO_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}if(!!Me.$("ifPreCoop")){Me.$("ifPreCoop").value=!!resultJson.OPEN_STATUS?resultJson.OPEN_STATUS:"";
}if(resultJson.NUMBER!="-1"){if(Me.$("uimId").value==""||Me.$("uimId").value!=resultJson.NUMBER){Me.$("uimId").value=resultJson.NUMBER;Me.$("uimId").onblur();}else{Me.cardTypeFillValue();Me.ifCanHeiMei();
Me.dealOldAgentSourceId();}}else{if(Me.$("uimId").disabled==true){Me.$("uimId").value="";Me.$("uimId").disabled=false;}}}if(!!Me.$("uimId")&&!!Me.$("uimId").value){var parameter="objectId="+Me.$("uimId").value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!!resultJson||resultJson.flag<=0){if(resultJson.NUMBER!="-1"&&serviceId!=resultJson.NUMBER){if(Me.$("serviceId").value==""||Me.$("serviceId").value!=resultJson.NUMBER){MessageBox.confirm({message:"UIM\u5361\u53f7\u4e3a\u9884\u914d\u5361\uff0c\u4f46\u4e0e\u5f53\u524d\u4e1a\u52a1\u4e0d\u5339\u914d\uff0c\u662f\u5426\u4fdd\u7559\u9884\u914d\u5173\u7cfb?",onComplete:function(value){if(value==true){Me.$("serviceId").value="";
Me.$("uimId").onblur();!!Me.checkUim?Me.checkUim():null;}else{Me.$("uimResInstId").value="";Me.$("uimId").value="";}},iconCloseComplete:false},Me.$("uimId"));}}}}};Me.getChooseNumber=function(){if(Me.getPreselectPhoneNo()){Me.checkResource();
Me.getProdOfferInfoListByInstId();return;}var productId=Me.productId;var parameter="productId="+productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}if(result=="-1"){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._cdma_number_elem_list_;}catch(e){}var B={ServiceIdInterface:new ServiceIdInterface({"$":function(id){return Me.$(id);
}}),cdmaServiceIdElemList:cdmaServiceIdElemList};var container2=BusCard.$session.container2;var workNo=BusCard.$session.workNo;var endpassword=BusCard.$session.PASSWORD;var noDept=BusCard.$session.acceptDealer;
var webPath=container2+"resource/interfacemanage/selectno/SelectNoMain.jsp?STAFFNO="+workNo+"&PASSWORD="+endpassword+"&noDept="+noDept+"&cityCode="+Me.cityCode+"&productId="+Me.productId+"&sortId=1";Me.windowResourceServiceId=window.showModalDialog(webPath,B,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no");
}else{var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.onblur();oServiceId.readOnly=true;}if(Me.$("serviceId").value!=""){Me.checkIfVirtual();Me.checkResource();}};Me.resetServiceId=function(){Me.$("serviceId").value="";
};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._cdma_number_elem_list_;
}catch(e){}var chooseServiceId=Me.$("serviceId").value;if(cdmaServiceIdElemList){var len=cdmaServiceIdElemList.length;var count=0;while(len--){var current=cdmaServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;
}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");Me.$("serviceId").value="";Me.$("resInstId").value="";}}};Me.$("link_serviceId").onclick=function(){try{Me.getChooseNumber();
}catch(e){throw new Error("\u9009\u53f7\u9519\u8bef:"+e.message);}};Me.getSourceName=function(parameter){var dealerName=executeRequest("prodOfferSaleAjaxAction","getSourceName",parameter);return dealerName;
};Me.$("serviceId").onblur=function(){Me.checkResource();Me.checkIfVirtual();Me.getProdOfferInfoListByInstId();Me.getDefaultPassWord();};Me.getDefaultPassWord=function(){if(Me.$("serviceId").value!=""){var defaultPassWord=Me.$("serviceId").value.substr(Me.$("serviceId").value.length-6);
Me.$("password").value=defaultPassWord;Me.$("passwordConfirm").value=defaultPassWord;}};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();
};BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._cdma_number_elem_list_=ordermgr.accept.compnew._cdma_number_elem_list_||[];var serviceObj={};serviceObj.service=Me.$("serviceId");
serviceObj.productId=Me.productId;ordermgr.accept.compnew._cdma_number_elem_list_.push(serviceObj);Me.getProdOfferInfoListByInstId=function(){var serviceInfoNewBuilder=Me.serviceInfoNewBuilder;if(!(serviceInfoNewBuilder&&serviceInfoNewBuilder.subProductBuilder)){return;
}var subProductBuilder=serviceInfoNewBuilder.subProductBuilder;var productList=subProductBuilder.productList;var instSId=Me.$("resInstId").value;var mktResInterfaceBO=a.$remote("mktResInterfaceBO");var queryList=[];
queryList.push("COOP_PRODUCTS");var resourceInfo=mktResInterfaceBO.getResourceInfo(Me.cityCode,1,1,instSId,"",null,Me.productId,0,queryList);var prodIdList=resourceInfo.COOP_PRODUCTS;var productIdFromResList=[];
if(prodIdList){var doc=BusCard.xml.XMLoader.loadXML(prodIdList);if(doc.documentElement){var productIdList=doc.documentElement.getElementsByTagName("productId")||[];Array.prototype.push.apply(productIdFromResList,BusCard.map(productIdList,function(node){return node.text;
}));}}BusCard.each(productIdFromResList,function(productId){var existFlag=BusCard.exist(productList,function(vo){return vo.productId==productId;});if(!existFlag){var result=BusCard.doGet(BusCard.path.contextPath+"/orderDetailAction.do",{method:"getProductDetail",productId:productId});
productList[productId]=result;}});Me.productIdFromResList=productIdFromResList;subProductBuilder.showProductDetail();};Me.getPreselectPhoneNo=function(){var prodOfferAcceptLoader=dojo.getObject("prodOfferAcceptLoader");
var preAcceptFlag=prodOfferAcceptLoader.requestParam.preAcceptFlag;var preselectPhoneNoSelected=prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected;if(preAcceptFlag!=1&&preselectPhoneNoSelected!=1){var identityKind=$ac$.requestParam.customerData.identityKind;
var identityCode=$ac$.requestParam.customerData.identityCode;if(!(identityKind&&identityCode)){return false;}var para="&identityKind="+identityKind+"&identityCode="+identityCode;var resultJsonStr=executeRequest("newCustRecognitionAction","getPreselectPhone",para);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected="1";var count=jsonResultObj.count;
if(count>0){if(confirm("\u662f\u5426\u9009\u62e9\u9884\u9009\u53f7\u7801\u4f5c\u4e3a\u65b0\u53f7\u7801")){Me.$("serviceId").value=jsonResultObj.serviceId;return true;}else{return false;}}}}catch(e){alert(e.message);
return false;}}};}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/getNumberOnly.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var util=dojo.require("orderaccept.prodofferaccept.util");var executeRequest=_buscard.executeRequest;
Me.productId=b.productId;Me.cityCode=b.cityCode;var serviceCard=util.DomHelper.getParentWidget(Me.dom,"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");if(!!serviceCard){Me.$("serviceId").setPPPOEPwd=function(){if(!!serviceCard&&!!serviceCard.attrCardWidget){var attrCardWidget=serviceCard.attrCardWidget;
var pppoePwd=attrCardWidget.busCardInstance.$("100829");if(!!pppoePwd){var length=this.value.length;pppoePwd.value=this.value.substring(length-4,length);}}};}Me.getChooseNumber=function(){var parameter="productId="+Me.productId+"&cityCode="+Me.cityCode;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;
}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;if(!!Me.$("serviceId").setPPPOEPwd){Me.$("serviceId").setPPPOEPwd();}if(!!Me.checkedCurrentNumForAcc){Me.checkedCurrentNumForAcc(Me.$("serviceId").value);
}};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var cdmaServiceIdElemList=null;
try{cdmaServiceIdElemList=ordermgr.accept.compnew._other_number_elem_list_;}catch(e){}var chooseServiceId=Me.$("serviceId").value;if(cdmaServiceIdElemList){var len=cdmaServiceIdElemList.length;var count=0;
while(len--){var current=cdmaServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");
Me.$("serviceId").value="";}}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onblur=function(){if(!!Me.$("serviceId").setPPPOEPwd){Me.$("serviceId").setPPPOEPwd();
}if(!!Me.checkedCurrentNumForAcc){Me.checkedCurrentNumForAcc(Me.$("serviceId").value);}};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();};BusCard.Namespace.create("ordermgr.accept.compnew");
ordermgr.accept.compnew._other_number_elem_list_=ordermgr.accept.compnew._other_number_elem_list_||[];var serviceObj={};serviceObj.service=Me.$("serviceId");serviceObj.productId=Me.productId;ordermgr.accept.compnew._other_number_elem_list_.push(serviceObj);
}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/getIvpnNumber.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.cityCode=b.cityCode;Me.belongCode=b.belongCode||b.serviceRelation.belongCode;
Me.productId=b.productId;Me.getChooseNumber=function(){var parameter="productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getBizId",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;if(Me.getChildren()&&Me.getChildren()[0].$("200146")){Me.getChildren()[0].$("200146").value="HE"+eval(BusCard.$remote("serviceParamBO").getSpecGroupId());
}};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};
Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};});
BusCard.define("/buscardapp/rela/js/common.js",function(b,a){(function(){var c=this;var f=function(j){var k=this;k.service=j.service;k.$=j["$"];k.$n=j["$n"];k.cityCode=j.cityCode;k.setAddrDetail=function(m){var n=m.addrDetail;
var o=m.addrId;for(var p=0,l=document.getElementsByName("addrDetail").length;p<l;p++){if(document.getElementsByName("addrDetail")[p].value==""){document.getElementsByName("addrDetail")[p].value=n;}if(document.getElementsByName("addrId")[p].value==""||document.getElementsByName("addrId")[p].value=="1"){document.getElementsByName("addrId")[p].value=n;
document.getElementsByName("addrId")[p].rvalue=o;}}k.$("addrDetail").value=n;k.$("addrId").value=n;k.$("addrId").rvalue=o;k.$("addrDetail").focus();k.setAttrValueMethod(m);};k.setAttrValueMethod=function(o){var n=o.innetMethodId;
var m=dojo.getObject("prodOfferAcceptLoader");if(!!n&&n!=""){if(m){if(m&&m.serviceCardWidgetMap["serviceCardWidget_"+a.uniqueId].attrCardWidget.busCardInstance){var l=m.serviceCardWidgetMap["serviceCardWidget_"+a.uniqueId].attrCardWidget.busCardInstance.$("100704");
if(!!l){l.value=n;}}}else{if(c.$("prodAttrCardContainer")){var l=c.$("100704");l.value=n;}}}};};var e={checkEasyPassword:function(s,t){var r=s.value;var k=r.charAt(0);var l=parseInt(k);var j=parseInt(k);
var q=k;var p=k;var o=l+""+l+""+l+""+l+""+l+""+l;var n="";if(isNaN(k)){n=k+k+k+k+k+k;}for(var m=0;m<5;m++){if(l!=9){l=l+1;q=q+""+l;}if(j!=0){j=j-1;p=p+""+j;}}if(r==o||r==q||r==p||r==n){if(!t){alert("\u60a8\u7684\u5bc6\u7801\u8fc7\u4e8e\u7b80\u5355,\u8bf7\u91cd\u65b0\u8bbe\u7f6e. \u7b80\u5355\u5bc6\u7801\u4e0d\u80fd\u529e\u7406\u5176\u4ed6\u4efb\u4f55\u4e1a\u52a1!\n\u7b80\u5355\u5bc6\u7801\u6307:\n        (1):6\u4f4d\u5bc6\u7801\u4e00\u6837;\n        (2):6\u4f4d\u5bc6\u7801\u9012\u589e;\n        (3):6\u4f4d\u5bc6\u7801\u9012\u51cf;\n        \u5982'111111,123456,654321,ssssss'");
s.value="";s.focus();}return false;}return true;},checkNotNullByContainer:function(j){var m=j.getElementsByTagName("input");var l=m.length;for(var k=0;k<l;k++){var n=m[k];if(n.ztype!="mock"){if(n.type!="text"&&n.type!="password"){continue;
}}if(n.disabled){continue;}if(n.readOnly){continue;}if(n.value!=""){continue;}if(!this.checkItem(n)){return false;}}if(!this.checkSelectNotNull()){return false;}return true;},checkSelectNotNull:function(){var l=document.getElementsByTagName("select");
var k=l.length;for(var j=0;j<k;j++){var m=l[j];if(!isDisplay(m,true)){continue;}if(m.disabled){continue;}if(m.readOnly){continue;}if(m.value!=""){continue;}if(!this.checkItem(m)){return false;}}return true;
},checkItem:function(j){var l=j.isnullable;if(l=="false"){l=false;}else{l=true;}var k=j.value;if(!l&&!k){promptNotNull(j.prompt);if(isDisplay(j,true)){j.focus();}return false;}return true;}};var g=function(j){if(j==null||typeof j=="undefined"){return false;
}else{return true;}};var i=function(j){var k=this;k.$=j["$"];k.setServiceId=function(p){var o=p.serviceId;var l=p.resInstId;var n=p.uimId;var m=p.uimResInstId;k.$("serviceId").value=o;k.$("resInstId").value=l;
if(n&&n!="null"){k.$("uimId").value=n;k.$("uimResInstId").value=m;}k.$("serviceId").focus();};};var d=function(o,u,x,w,n){var C=x+"\u8f93\u5165\u9519\u8bef!";var y={};var l=w.selectedIndex;var k=w.options[l].value;
var m=w.options[l].text;var j=n.value;if(!o){var o=[];o[1]="18";o[3]="18";o[5]="20";o[6]="20";o[7]="20";o[8]="20";}if(typeof o[k]==="undefined"){y.status=true;y.message="";return y;}if(!u){var u=new Array();
u[1]="1";}if(k==1&&j.length!=0){if(j.length==18||j.length==15){}else{C=x+"\u957f\u5ea6\u9519\u8bef!";y.status=false;y.message=C;n.value="";return y;}}if(j.length>o[k]){C=x+"\u957f\u5ea6\u8d85\u51fa\u6700\u5927\u9650\u5236\u957f\u5ea6!";
y.status=false;y.message=C;n.value="";return y;}if(j.length!=0){if(u[k]==0||u[k]=="0"){var p=/^[\d]+$/;}else{if(u[k]==1||u[k]=="1"){var p=/^[\w]+$/;}else{if(u[k]==2||u[k]=="2"){var p=/^[*]+$/;}}}var t=j.match(p);
if(t==null){if(u[k]==0||u[k]=="0"){C=x+"\u5e94\u8be5\u4e3a\u6570\u5b57!";}else{if(u[k]==1||u[k]=="1"){C=x+"\u5e94\u8be5\u4e3a\u6570\u5b57\u548c\u5b57\u6bcd\u7684\u7ec4\u5408!";}else{if(u[k]==2||u[k]=="2"){C=x+"\u683c\u5f0f\u9519\u8bef!";
}else{C=x+"\u683c\u5f0f\u9519\u8bef!";}}}y.status=false;y.message=C;n.value="";return y;}}if(k==1&&j.length==15){if(isNaN(parseInt(j))){var C="15\u4f4d\u8eab\u4efd\u8bc1\u53f7\u7801\u5e94\u5168\u4e3a\u6570\u5b57";
y.status=false;y.message=C;n.value="";return y;}var s=j.substr(6,2);var D=j.substr(8,2);var A=j.substr(10,2);var v="19"+s;var B=parseInt(v,10);var q=parseInt(D,10);var z=parseInt(A,10);if((B%4==0)&&(B%100!=0)||(B%400==0)){var r=new Array(31,29,31,30,31,30,31,31,30,31,30,31);
}else{var r=new Array(31,28,31,30,31,30,31,31,30,31,30,31);}if(B<1900){var C=x+"\u7684\u5e74\u6ca1\u6709\u610f\u4e49??\u8bf7\u91cd\u65b0\u8f93\u5165??";y.status=false;y.message=C;n.value="";return y;}if(q<1||q>12){var C=x+"\u7684\u6708\u4efd\u4e0d\u6b63\u786e!";
y.status=false;y.message=C;n.value="";return y;}if(z<1||z>r[(D-1)]){var C=x+"\u7684\u65e5\u671f\u90e8\u5206\u4e0d\u6b63\u786e!";y.status=false;y.message=C;n.value="";return y;}}if(k==1&&j.length==18){var p=/^[0-9]{17}(x|([0-9]{1}))$/i;
if(!p.test(j)){var C="18\u4f4d\u8eab\u4efd\u8bc1\u53f7\u7801\u5e94\u5168\u4e3a\u6570\u5b57\u6216\u6700\u540e\u4e00\u4f4d\u4e3ax";y.status=false;y.message=C;n.value="";return y;}var s=j.substr(6,4);var D=j.substr(10,2);
var A=j.substr(12,2);var B=parseInt(s,10);var q=parseInt(D,10);var z=parseInt(A,10);if((B%4==0)&&(B%100!=0)||(B%400==0)){var r=new Array(31,29,31,30,31,30,31,31,30,31,30,31);}else{var r=new Array(31,28,31,30,31,30,31,31,30,31,30,31);
}if(B<1900){var C=x+"\u7684\u5e74\u6ca1\u6709\u610f\u4e49!";y.status=false;y.message=C;n.value="";return y;}if(q<1||q>12){var C=x+"\u7684\u6708\u4efd\u4e0d\u6b63\u786e!";y.status=false;y.message=C;n.value="";
return y;}if(z<1||z>r[(D-1)]){var C=x+"\u7684\u65e5\u671f\u90e8\u5206\u4e0d\u6b63\u786e!";y.status=false;y.message=C;n.value="";return y;}}y.status=true;y.message="";return y;};function h(k,m,l){if(!m.disabled){var j=d("","",k,m,l);
if(false==j.status){alert(j.message);l.select();l.focus();return false;}else{return true;}}else{return true;}}c.StandardAddInterface=f;c.ServiceIdInterface=i;c.jsCommon=e;c.isValid=g;c.check_identity_new=d;
c.checkid_iden_new=h;}());});
BusCard.define("/buscardapp/rela/js/getUseCust.js",function(d,a){try{var c=$("webPath").value,b=function(e){var h=c+"/custcontact/common/jsp/UseCust.jsp?witchOne="+e;window.open(h,"newWin","status=1,resizable=0,fullscreen=0,scrollbars=yes,top=10,left=10,width=1000,height=700");
},g=function(i,e){if(i){i.readOnly=true;if($ac$){var h=$ac$.requestParam.customerData;i.value=h.custName;e.value=h.custId;}}};g(this.$("subscriberName"),this.$("subscriberId"));this.$("link_subscriberName").onclick=function(){b(0);
};}catch(f){alert(f.message);}});
BusCard.define("/buscardapp/rela/js/accountNbrHandler.js",function(b,i){var h=this;dojo.require("orderaccept.prodofferaccept.util");var f=function(){return dojo.global.$appContext$.get("requestParam").customerData;
}();var g=f.custId;var c=i.uniqueId;var j=[];var a=[];if(!dojo.global.$appContext$.get("pstnPlusCdmaNbrMap")){var e=orderaccept.prodofferaccept.util.ServiceFactory.getService("url:orderDetailAction.do?method=getCommAccNbrList&custId="+g);
var d={};j=e.tempAccessProdItemList;a=e.instServiceRelationList;j=dojo.filter(j||[],function(k){return !dojo.some(a||[],function(l){return k.userId==l.userId;});});d.tempNbrInfoList=j;d.instNbrInfoLit=a;
dojo.global.$appContext$.set("pstnPlusCdmaNbrMap",d);}else{j=dojo.global.$appContext$.get("pstnPlusCdmaNbrMap").tempNbrInfoList;a=dojo.global.$appContext$.get("pstnPlusCdmaNbrMap").instNbrInfoLit;}h.getAccessServiceIdList=function(){var l=[];
try{if(!prodOfferAcceptLoader){return l;}}catch(m){return l;}if(prodOfferAcceptLoader.mainProdOfferWidget==null){return l;}var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);
dojo.forEach(k,function(o){var p={};var n=dojo.attr(o,"viewId");p.serviceId=dojo.query(".serviceId-"+n,o)[0].value;p.uniqueId=dojo.attr(o,"uniqueId");p.serviceKind=dojo.attr(o,"serviceKind");p.serviceKindIndex=dojo.attr(o,"serviceKindIndex");
p.productId=dojo.attr(o,"productId")||"-1",p.prodInstId=dojo.attr(o,"userId")||"",l.push(p);if(p.productId==h.productId){h.serviceKind=p.serviceKind;}});return l;};h.$("accountNbrChoose").onload=function(){h.nbrUniqueId=orderaccept.prodofferaccept.util.CommUtils.generateUniqueId();
var o=BusCard.Template.create("<div id='nbr_selected_ctn'>	        		<fieldset  id='inst_nbr_fieldset'><legend>\u5b9e\u4f8b\u53f7\u7801</legend><div id='inst_nbr_div'>#{instItemList}</div></fieldset>								<fieldset id='temp_nbr_fieldset'><legend>\u5728\u9014\u53f7\u7801</legend><div id='temp_nbr_div'>#{tempItemList}</div></fieldset>								<fieldset id='current_nbr_fieldset'><legend>\u5f53\u524d\u53d7\u7406\u53f7\u7801</legend><div id='current_nbr_div'>#{currentItemList}</div></fieldset>				        		</div>");
var q=BusCard.Template.create("<input type='checkbox' #{disableFlag} name='accServiceId-#{uniqueId}' targetUniqueId='#{targetUniqueId}' value='#{serviceId}' serviceId='#{serviceId}' sourceFlag='#{sourceFlag}' prodInstId ='#{prodInstId}' serviceKind='#{serviceKind}' serviceKindIndex='#{serviceKindIndex}'><span style='margin-right:5px'>#{serviceId}</span><tp:if $$.sourceFlag !=3><span style='color:#3399cc;font-weight:bold;'>[#{serviceKindDesc}]</span></tp:if>&nbsp;&nbsp;&nbsp;&nbsp;");
var k=BusCard.map(a,function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]?orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]+"\u53f7\u7801":"\u672a\u77e5\u7c7b\u578b\u53f7\u7801",sourceFlag:1,prodInstId:r.userId,disableFlag:"disabled",serviceId:r.serviceId,uniqueId:h.nbrUniqueId});
});k=h.dealDisplayOneRow(k);var l=BusCard.map(j,function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]?orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]+"\u53f7\u7801":"\u672a\u77e5\u7c7b\u578b\u53f7\u7801",sourceFlag:2,prodInstId:r.userId,disableFlag:"disabled",serviceId:r.serviceId,uniqueId:h.nbrUniqueId});
});l=h.dealDisplayOneRow(l);var m=h.getAccessServiceIdList();var p=BusCard.map(m||[],function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:"",sourceFlag:3,serviceId:r.serviceId,serviceKindIndex:r.serviceKindIndex,uniqueId:h.nbrUniqueId,disableFlag:"disabled",prodInstId:r.prodInstId,targetUniqueId:r.uniqueId});
});p=h.dealDisplayOneRow(p);var n=o.apply({instItemList:k,tempItemList:l,currentItemList:p});this.innerHTML=n;h.$("subpage_wrapper_accountNbrChoose").style.width="500px";h.doGetAccNbrSameProductId();h.selectAcctNbr();
};h.dealDisplayOneRow=function(k){var m="";var l=1;if(k&&k.length>0){for(var n=0;n<k.length;n++){m+=k[n];if(l%2==0){m+="<br>";}l++;}}return m;};h.$("accountNbrChoose").collectData=function(o,m,l){var n=[];
var k=this.getElementsByTagName("input");m.util.each(k,function(q){if(q.type&&q.type.toUpperCase()=="CHECKBOX"&&q.checked){var p={};p.serviceId=q.getAttribute("serviceId");p.sourceFlag=q.getAttribute("sourceFlag");
p.uniqueId=q.getAttribute("targetUniqueId");p.prodInstId=q.getAttribute("prodInstId");p.serviceKind=q.getAttribute("serviceKind");p.serviceKindIndex=q.getAttribute("serviceKindIndex");n.push(p);}});return n;
};h.selectAcctNbr=function(){var q=dojo.query("[name=accServiceId-"+h.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",h.dom)[0]);if(dojo.some(q||[],function(r){return r.checked;})){return;}var l=[];var m=[];
var o=[];dojo.forEach(q||[],function(r){if(r.getAttribute("serviceKind")==8&&r.getAttribute("sourceFlag")==3){l.push(r);}else{if(r.getAttribute("serviceKind")==10&&r.getAttribute("sourceFlag")==3){m.push(r);
}else{if(r.getAttribute("sourceFlag")==3){o.push(r);}}}dojo.connect(r,"click",function(s){h.doCheckAccNbr(s);});});if(l.length>0){var p=dojo.filter(l,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(p.length>0){p[0].checked=true;return;}}if(m.length>0){var k=dojo.filter(m,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(k.length>0){k[0].checked=true;return;}}if(o.length>0){var n=dojo.filter(o,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(n.length>0){n[0].checked=true;return;}}};h.doCheckAccNbr=function(n){if(n.currentTarget.checked){var o=BusCard.$remote("prodOfferSaleDataBO").getAccNbrSwitch(f.cityCode);
if(!!o&&o.objectValue==1){h.getCurrentNbrInfoList();var m=n.currentTarget.getAttribute("prodInstId");var r=n.currentTarget.getAttribute("serviceId");if(h.checkInstList!=null&&h.checkInstList.length>0){for(var q=0;
q<h.checkInstList.length;q++){var l=h.checkInstList[q];var k=dojo.some(l.data||[],function(p){return p.prodInstId==m;});if(k&&n.currentTarget.checked){alert("\u5f53\u524d\u9009\u4e2d\u7684\u53f7\u7801["+n.currentTarget.getAttribute("serviceId")+"]\u5df2\u7ecf\u662f\u8be5\u5ba2\u6237\u4e0b\u7684\u5176\u4f59\u4ea7\u54c1["+l.serviceId+"]\u7684\u8d26\u53f7\uff0c\u4e0d\u5141\u8bb8\u9009\u62e9\u4e3a\u5f53\u524d\u53f7\u7801\u8d26\u53f7!!!");
n.currentTarget.checked=false;}}}if(h.currentNbrInfoList!=null&&h.currentNbrInfoList.length>0){for(var q=0;q<h.currentNbrInfoList.length;q++){var l=h.currentNbrInfoList[q];var k=dojo.some(l.data||[],function(p){return p.serviceId==r;
});if(k&&n.currentTarget.checked){alert("\u5f53\u524d\u9009\u4e2d\u7684\u53f7\u7801["+n.currentTarget.getAttribute("serviceId")+"]\u5df2\u7ecf\u662f\u8be5\u5ba2\u6237\u4e0b\u7684\u5176\u4f59\u4ea7\u54c1["+l.serviceId+"]\u7684\u8d26\u53f7\uff0c\u4e0d\u5141\u8bb8\u9009\u62e9\u4e3a\u5f53\u524d\u53f7\u7801\u8d26\u53f7!!!");
n.currentTarget.checked=false;}}}}}};h.doGetAccNbrSameProductId=function(){var k=h.productId;h.checkInstList=[];var m=orderaccept.prodofferaccept.util.ServiceFactory.getService("url:orderDetailAction.do?method=doGetAccNbrSameProductId&custId="+g+"&productId="+k+"&cityCode="+f.cityCode);
for(var l in m){h.checkInstList.push({data:m[l],serviceId:l});}h.getCurrentNbrInfoList();};h.checkedCurrentNumForAcc=function(l){var o=dojo.query("[name=accServiceId-"+h.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",h.dom)[0]);
dojo.forEach(o||[],function(p){p.checked=false;});var n=[];var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);dojo.forEach(k||[],function(p){var r=dojo.attr(p,"uniqueId");
var q=dojo.attr(p,"serviceKind")||"-1";if(prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.$("serviceId").value==l){n.push({uniqueId:r,serviceKind:q});}});if(n.length>0){if(n.length>1){var m=dojo.filter(n||[],function(p){return p.serviceKind==8||p.serviceKind==10;
});if(m.length>0){n=m;}}dojo.forEach(o||[],function(p){if(n[0].uniqueId==p.getAttribute("targetUniqueId")){p.checked=true;}});}};h.getCurrentNbrInfoList=function(){h.currentNbrInfoList=[];var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);
dojo.forEach(k,function(n){if(h.productId==dojo.attr(n,"productId")&&c!=dojo.attr(n,"uniqueId")){var r=dojo.attr(n,"uniqueId");var l=dojo.attr(n,"viewId");var q=dojo.query(".serviceId-"+l,n)[0].value;if(prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.dom){var m=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.dom;
var p=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.nbrUniqueId;var o=dojo.query("[name=accServiceId-"+p+"]",dojo.query("#nbr_selected_ctn",m)[0]);b.util.each(o,function(s){if(s.checked){h.currentNbrInfoList.push({data:[{serviceId:s.getAttribute("serviceId")}],serviceId:q});
}});}}});};});
BusCard.define("/buscardapp/rela/js/remoteWriteCard.js",function(h,g){try{var j=this;var f=arguments[0];var c=arguments[1];var d=h.executeRequest;j.productId=c.productId;j.cityCode=c.cityCode;j.serviceOfferId=c.serviceOfferId;
j.$("writeCardBtn").onclick=function(){if(!j.check()){return false;}var t=j.$("serviceId").value;var l=f.$session.workNo;var b=f.$session.staffName;var e=f.$session.departmentId;var q=f.$session.deptName;
var u=d("prodOfferSaleAjaxAction","getRemoteInfoIn","");var k=document.getElementById("webPath").value;if(u){var n=u.split(",");var s=n[0];var p=n[1];var a="SQUENCE="+p+"&ACC_NBR="+t+"&STAFF_ID="+l+"&STAFF_NAME="+b+"&CHANNEL_ID="+e+"&CHANNEL_NAME="+q+"&new_flag=1";
var m=k+"/custcontact/orderaccept/secondaccept/depchangecard/PopFrame.jsp";var r=encodeURI(s+a);var o=showModalDialog(m,r,"DialogWidth:625px;DialogHeight:600px;status:no;location:no");}return j.dealResult(o);
};j.check=function(){if(j.$("serviceId").value==""){alert("\u8bf7\u60a8\u5148\u9009\u62e9\u53f7\u7801,\u7136\u540e\u5728\u8fdb\u884c\u8fdc\u7a0b\u5199\u5361\u64cd\u4f5c");return false;}if(j.$("uimId").disabled){alert("\u8bf7\u60a8\u9009\u62e9\u975e\u9884\u914d\u53f7\u7801");
return false;}return true;};j.dealResult=function(m){if(typeof m=="undefined"){return;}var q=m.split("&");var n=j.getValue(q[1]);var r=j.getValue(q[2]);var k=j.getValue(q[3]);var a=j.getValue(q[4]);var o=j.getValue(q[5]);
var p=j.getValue(q[6]);var l=j.getValue(q[7]);l=l.substring(0,l.length-1);var b=j.getValue(q[8]);var e="&squence="+n+"&serviceId="+a+"&imsi="+o+"&iccSerial="+p+"&iccid="+l+"&inOutFlag="+b;if(r=="0"){j.$("uimId").value=l;
j.$("uimId").onblur();j.$("uimId").readOnly=true;j.$("imsi").value=o;j.$("iccSerial").value=p;j.$("writeCardBtn").disabled=true;return true;}else{alert("\u8fdc\u7a0b\u5199\u5361\u5931\u8d25,\u8bf7\u91cd\u65b0\u5199\u5361");
return false;}};j.getValue=function(b){var e=b.split("=");var a=e[1];return a;};}catch(i){alert(i.message);}});
BusCard.define("/buscardapp/rela/js/card_129_100109301.js",function(h,f){var i=this;var e=arguments[0];var c=arguments[1];i.productId=c.productId;i.cityCode=c.cityCode;i.serviceOfferId=c.serviceOfferId;
var d=h.executeRequest;var g=1;i.checkUim=function(){var p=i.$("uimId");var k=i.$("uimId").value;var o=i.$("serviceId").value;if(!k){return true;}var b="uimId="+k+"&serviceOfferId="+i.serviceOfferId+"&productId="+i.productId+"&cityCode="+i.cityCode+"&serviceId="+o;
var a=d("prodOfferSaleAjaxAction","checkUimResource",b);var j=executeAjaxResult(a);if(j==false){i.$("uimId").value="";if(i.$("serviceId").disabled==true){i.$("serviceId").value="";i.$("serviceId").disabled=false;
}return;}i.$("uimResInstId").value=j;if(i.$("serviceId")){var n="objectId="+k+"&serviceOfferId="+i.serviceOfferId+"&productId="+i.productId+"&cityCode="+i.cityCode+"&getCoopFlag=UIM_COOP_FLAG";var l=d("prodOfferSaleAjaxAction","getCoopNumInfo",n);
var m=dojo.fromJson(l);if(!m||m.flag<=0){return;}if(!!i.$("ifPreCoop")){i.$("ifPreCoop").value=!!m.OPEN_STATUS?m.OPEN_STATUS:"";}if(m.NUMBER!="-1"){if(i.$("serviceId").value==""||i.$("serviceId").value!=m.NUMBER){i.$("serviceId").value=m.NUMBER;
i.$("serviceId").onblur();i.$("serviceId").disabled=true;}}else{if(i.$("serviceId").disabled==true){i.$("serviceId").value="";i.$("serviceId").disabled=false;}}}};i.$("uimId").onblur=function(){i.checkUim();
};});
BusCard.define("/buscardapp/rela/js/card_105_10004.js",function(e,a){var f=this;var c=this.$("viaIdKind");this.$("viaId").onblur=function(){if(c.value){if(this.value){if(!checkid_iden_new("\u8bc1\u4ef6\u53f7\u7801",c,this)){return;
}}}};this.$("viaPhone").onkeypress=function(){return d();};this.$("viaPhone").onblur=function(){b(f.$("viaPhone"));};function d(){if(!(event.keyCode>=47&&event.keyCode<=57)){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");
event.srcElement.focus();return false;}return true;}function b(i){var h=i.value;var j=/[^\d||\/]/;var g=j.test(h);if(g){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");i.value="";
i.focus();return;}}void function(){var l=new Date();var i=""+l.getFullYear();var k=(l.getMonth()+1)<10?"0"+(l.getMonth()+1):""+(l.getMonth()+1);var h=""+l.getDate();this.$("effectDate").value=i+"-"+k+"-"+h;
var g=null;try{g=ordermgr.accept.compnew.value;}catch(j){}if(g){this.$("effectDate").disabled=true;}}();});
BusCard.define("/buscardapp/rela/js/card_105_10092.js",function(a,n){var b=this;var t=a.executeRequest;var f="menuId=841ABJA";var c=t("prodOfferSaleAjaxAction","InnetCheck",f);var e="menuId=841ABJB";var s=t("prodOfferSaleAjaxAction","InnetCheck",e);
if(c!="1"||s!="1"){if(c=="1"){this.$("acceptWay").value=3;var u=this.$("acceptWay");u.disabled=true;}if(s=="1"){var o=this.$("acceptWay");for(var r=0;r<o.options.length;r++){if(o.options[r].value=="3"){o.options.remove(r);
break;}}}}var d=t("prodOfferSaleAjaxAction","InnetCheck","menuId=841ABXG");if(d!="1"){b.$("batchFlag").style.display="none";b.$("label_batchFlag").style.display="none";}var k="customerId="+dojo.global.$appContext$.get("requestParam").customerData.custId;
var c=t("prodOfferSaleAjaxAction","preOrderCheck",k);if(c==1){var p=this.$("acceptWay");for(var r=0;r<p.options.length;r++){if(p.options[r].value=="3"){p.options.remove(r);break;}}}else{var g=t("prodOfferSaleAjaxAction","agentNumberCheck","");
if(g==1){this.$("acceptWay").value=3;var u=this.$("acceptWay");u.disabled=true;}}var m=this.$("viaIdKind");if(!!m){this.$("viaId").onblur=function(){if(m.value){if(this.value){if(!l("\u8bc1\u4ef6\u53f7\u7801",m,this)){return;
}}}};}function l(v,x,w){if(!x.disabled){var i=check_identity_new("","",v,x,w);if(false==i.status){alert(i.message);w.select();w.focus();return false;}else{return true;}}else{return true;}}void function(){var x=new Date();
var v=""+x.getFullYear();var w=(x.getMonth()+1)<10?"0"+(x.getMonth()+1):""+(x.getMonth()+1);var i=""+x.getDate();if(!!this.$("effectDate")){this.$("effectDate").value=v+"-"+w+"-"+i;}}();b.$("developerDealer").onquery=function(){var A=this,D=arguments[0],w=arguments[1],i=arguments[2];
var C=w.util.trim(this.value);if(!C){alert("\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd");this.focus();return;}var v="-1";var x=BusCard.$session.cityCode;var z={productId:i.productId,cityCode:x,saleWay:v,dealerName:C,fieldId:this.getAttribute("fieldId")};
var B=BusCard.util.native2ascii(w.toJson(z));var y={jsonData:B,method:"query"};return w.util.doGet(w.path.initPath,y);};b.$("developerDealer").onafterclick=function(){var z=this,i=arguments[0],y=arguments[1];
var B=i.$("developer");var A={cityCode:BusCard.$session.cityCode,dealerId:b.$("developerDealer").rvalue,fieldId:B.getAttribute("fieldId")};var x=y.toJson(A);var w={jsonData:x,method:"query"};var v=y.util.doGet(y.path.initPath,w);
(v||[]).unshift({name:"\u8bf7\u9009\u62e9",ids:""});y.$rs(i.$("developer"),v);};if(!!this.$("viaPhone")){this.$("viaPhone").onkeypress=function(){return q();};this.$("viaPhone").onblur=function(){j(b.$("viaPhone"));
};}this.$("contactPhone").onkeypress=function(){return q();};this.$("contactPhone").onblur=function(){j(b.$("contactPhone"));};function q(){if(!(event.keyCode>=47&&event.keyCode<=57)){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");
event.srcElement.focus();return false;}return true;}function j(w){var v=w.value;var x=/[^\d||\/]/;var i=x.test(v);if(i){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");w.value="";
w.focus();return;}}if($("acceptWay").value=="3"){var c=t("prodOfferSaleAjaxAction","agentPayCheck");if(c=="1"){var h=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");
if(!!h){h.value="0.00";h.disabled="true";prodOfferAcceptLoader.refreshPayRelation();}}}this.$("acceptWay").onchange=function(){if($("acceptWay").value=="3"){var i=t("prodOfferSaleAjaxAction","agentPayCheck");
if(i=="1"){var w=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");if(!!w){w.value="0.00";w.disabled="true";prodOfferAcceptLoader.refreshPayRelation();
}}var y=t("prodOfferSaleAjaxAction","notAgentPstnCheck","");if(!!y&&y==1){var x=t("prodOfferSaleAjaxAction","agentNumberCheck","");if(x!=1){var v=$ac$.selectedMemberProdOfferList;if(!!v){dojo.forEach(v,function(C){var A=C.productId;
if(!!A){var z=BusCard.$remote("productToServiceDAO").queryById({productId:A});var B=z.netType;if(B==orderaccept.common.js.ConstantsPool.load(["ServiceKindCDConst"]).ServiceKindCDConst.PSTN_SERVICE_KIND){$("acceptWay").value=1;
alert("\u975e\u4ee3\u7406\u5546\u5de5\u53f7\u002c\u9009\u62e9\u4e86\u4ee3\u7406\u5546\u5165\u7f51\u002c\u4e0d\u80fd\u505a\u56fa\u7f51\u65b0\u88c5");}}});}}}}else{var w=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");
if(!!w){w.disabled=false;prodOfferAcceptLoader.refreshPayRelation();}}};if(!!prodOfferAcceptLoader&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.MemberOrderGroupProductLoader"){if(!!dojo.byId("label_developerDealer")){dojo.byId("label_developerDealer").style.display="none";
if(!!dojo.byId("label_developerDealer").nextSibling){dojo.byId("label_developerDealer").nextSibling.style.display="none";}}if(!!dojo.byId("label_developer")){dojo.byId("label_developer").style.display="none";
if(!!dojo.byId("label_developer").nextSibling){dojo.byId("label_developer").nextSibling.style.display="none";}}}});
BusCard.define("/buscardapp/rela/js/card_105_10513.js",function(_buscard,cardParam){var Me=this;if($ac$.requestParam.linkName){Me.$("contactPeople").value=$ac$.requestParam.linkName;}if($ac$.requestParam.linkPhone){Me.$("contactPhone").value=$ac$.requestParam.linkPhone;
}var pageLink="/ordermgr/batchFlag";var session=BusCard.$session;var flag=BusCard.$remote("omInterfaceDAO").haveRight(session.workNo,session.workPwd,pageLink);if(!eval(flag)){Me.$("batchFlag").value=0;
Me.$("batchFlag").disabled=true;}});
BusCard.define("/buscardapp/rela/js/setEffectReadOnly.js",function(f,d){try{var h=this;var c=arguments[1];if(c.serviceOfferId=="9"){var a=h.$("effectDate");a.disabled=true;}}catch(g){alert(g.message);}});

BusCard.define("/buscardapp/rela/js/card_180_10150.js",function(d,h){Me=this;var e=arguments[1];var g=e.sysdate;var a=e.months;var c=e.subsidyFee;var i=Me.$("advancedEffDate");var f=Me.$("advancedDays");
var b=Me.$("subFee");if(i){i.value=g;i.style.width="140px";i.disabled=true;}if(f){f.value=a;f.disabled=true;}if(b){b.value=c;b.disabled=true;}});
BusCard.define("/buscardapp/rela/js/card_180_10151.js",function(_buscard,cardParam){Me=this;var a=arguments[0];var cardInfo=arguments[1];var mktResCd=cardInfo.serviceOfferId/-1;var productId=cardInfo.productId;
var realFee=cardInfo.realFee||"0";var mktResName=cardInfo.mktResName;var resKindList=cardInfo.resKindList;var uniqueid=cardInfo.uniqueid;var targetProductFlag=cardInfo.targetProductFlag;var ifNewInstall=cardInfo.ifNewInstall;
var promotionRentResTypeList=cardInfo.promotionRentResTypeList;var ifNotAllResKind=cardInfo.ifNotAllResKind;var rowIndex=cardInfo.rowIndex;var executeRequest=_buscard.executeRequest;var constObj={DEFAULT_SERVICE_OFFER_ID:"2211"};
var serviceParamBO=a.$remote("serviceParamBO");Me.$("deviceNo").onblur=function(){var deviceNo=Me.$("deviceNo").value;if(deviceNo==""){return;}deviceNo=Me.doTrim(deviceNo);var IfUse=dojo.some(dojo.global.$appContext$.deviceNoList||[],function(oneDeviceNo){return oneDeviceNo.deviceNo==deviceNo&&oneDeviceNo.rowIndex!=rowIndex;
});if(IfUse){alert("\u7ec8\u7aef\u4e32\u53f7\u5728\u540c\u4e00\u7b14\u8ba2\u5355\u4e2d\u5df2\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");Me.$("deviceNo").value="";Me.$("deviceNo").focus();return;
}if(mktResCd==36){if(Me.$("giftNo")&&Me.$("giftNo").value){var param="giftNo="+Me.$("giftNo").value+"&deviceNo="+Me.$("deviceNo").value;var result=executeRequest("prodOfferSaleAjaxAction","checkIfTerminalCouponBind",param);
if(result){var retObj=eval("("+result+")");if(retObj.FLAG==0){alert("\u8f93\u5165\u7ec8\u7aef\u4e32\u53f7\u4e0e\u793c\u5238\u7f16\u53f7\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return;}}}}var queryInfoObj={INST_ID:"0",MOBILE_SOURCE:"0",NEWOLD_STATUS:"1",RESOURCE_KIND:"0",SUGGEST_PRICE:"0",BELONGS_TO:"0",RES_ID:"0",MOBILE_COLOR:"0",COST_PRICE:"0"};
var validInfoObj={checkSaleMobile:"1"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+deviceNo;parameter+="&serviceOfferId="+constObj.DEFAULT_SERVICE_OFFER_ID;
parameter+="&mktResType=4";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId=''";parameter+="&validJsonInfo="+validJsonInfo;parameter+="&cityCode="+cardInfo.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getResListInfo",parameter);
var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var resId=jsonResultObj.RES_ID;
if(mktResCd==20||mktResCd==21){var isRight=dojo.some(promotionRentResTypeList||[],function(oneRentType){return oneRentType==resId;});if(!resId||!isRight){alert("\u83b7\u53d6\u7684\u7ec8\u7aef\u7c7b\u578b\u4e0e\u6240\u9009\u9500\u552e\u54c1\u6307\u5b9a\u7ec8\u7aef\u7c7b\u578b\u4e0d\u7b26\u8bf7\u91cd\u65b0\u8f93\u5165\u8bbe\u5907\u7f16\u53f7");
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}if(resKindList&&resKindList.length>0&&!ifNotAllResKind){var isRightResKind=dojo.some(resKindList||[],function(oneResKind){return jsonResultObj.RESOURCE_KIND==oneResKind.resourceKind;
});if(!isRightResKind){alert("\u5177\u4f53\u7ec8\u7aef\u578b\u53f7\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9");Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}Me.$("mktResInstId").value=jsonResultObj.INST_ID;
Me.$("moblieSourse").value=jsonResultObj.MOBILE_SOURCE;Me.$("moblieSourse").onchange();Me.$("resourceKind").value=jsonResultObj.RESOURCE_KIND;Me.$("realFee").value=jsonResultObj.SUGGEST_PRICE/100;if(jsonResultObj.BELONGS_TO&&jsonResultObj.BELONGS_TO!="null"){Me.$("mobileAgent").value=jsonResultObj.BELONGS_TO;
}else{Me.$("mobileAgent").value="";}Me.$("mktResId").value=deviceNo;if($("880")&&$("851")){var shouldFee=Me.$("shouldFee").value;var newFee=$("880").value;if(!shouldFee){shouldFee=0;}if(!newFee){newFee=0;
}var realFee=shouldFee-newFee;if(realFee<0){realFee=0;}$("851").value=realFee;}Me.$("moblieSourse").disabled=true;Me.$("resourceKind").disabled=true;Me.$("rentType").disabled=true;if(!dojo.global.$appContext$.deviceNoList){var deviceNoList=[];
deviceNoList.push({rowIndex:rowIndex,deviceNo:deviceNo});dojo.global.$appContext$.set("deviceNoList",deviceNoList);}else{var flag=dojo.some(dojo.global.$appContext$.deviceNoList,function(oneDeviceNo){return oneDeviceNo.deviceNo==deviceNo;
});if(!flag){dojo.global.$appContext$.deviceNoList.push({rowIndex:rowIndex,deviceNo:deviceNo});}}}else{alert(jsonResultObj.message);Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}catch(e){alert(e);
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}};Me.doTrim=function(str){return/^\s*(.*?)\s*$/.exec(str)[1];};var refleshResourceKind=function(moblieSourse){var cdata=serviceParamBO.getResourceKind(moblieSourse);
if(cdata&&cdata.list){a.$rs(Me.$("resourceKind"),cdata.list);}};if(Me.$("moblieSourse")){Me.$("moblieSourse").onchange=function(){refleshResourceKind(this.value);};}Me.$("realFee").onkeypress=function(){return checkInputChar();
};var checkInputChar=function(){if(!(event.keyCode>=47&&event.keyCode<=57)){return false;}return true;};Me.setObjReadOnly=function(name){if(name&&Me.$(name)&&Me.$(name).type=="text"){Me.$(name).readOnly=true;
}return;};var cardInit=function(){Me.setObjReadOnly("moblieSourse");Me.setObjReadOnly("newoldStatus");Me.setObjReadOnly("resourceKind");Me.setObjReadOnly("shouldFee");Me.setObjReadOnly("mobileAgent");};
cardInit();});
BusCard.define("/buscardapp/rela/js/card_180_10152.js",function(_buscard,cardParam){var Me=this;var cardInfo=arguments[1];var executeRequest=_buscard.executeRequest;var validMonths=cardInfo.validMonths;
var constObj={DEFAULT_SERVICE_OFFER_ID:"4001"};Me.$("giftNo").onblur=function(){var giftNo=Me.$("giftNo").value;var verifyNo=Me.$("verifyNo").value;if(giftNo==""){return;}if(!checkIfTerminalCouponBind()){return;
}if(verifyNo==""){Me.$("verifyNo").focus();return;}getGiftInfo(giftNo,verifyNo);};Me.$("verifyNo").onblur=function(){var giftNo=Me.$("giftNo").value;var verifyNo=Me.$("verifyNo").value;if(verifyNo==""){return;
}if(giftNo==""){Me.$("giftNo").focus();return;}getGiftInfo(giftNo,verifyNo);};var checkIfTerminalCouponBind=function(){if(Me.$("deviceNo")&&Me.$("deviceNo").value){var param="giftNo="+Me.$("giftNo").value+"&deviceNo="+Me.$("deviceNo").value;
var result=executeRequest("prodOfferSaleAjaxAction","checkIfTerminalCouponBind",param);if(result){var retObj=eval("("+result+")");if(retObj.FLAG==0){alert("\u8f93\u5165\u793c\u5238\u7f16\u53f7\u4e0e\u7ec8\u7aef\u7f16\u53f7\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");
Me.$("giftNo").value="";Me.$("giftNo").focus();return false;}}}return true;};var getGiftInfo=function(giftNo,verifyNo){var queryInfoObj={CARD_VALUE:"0",VALID_DATE:"0",INST_ID:"0"};var validInfoObj={checkStatus:"1"};
var queryInfo=BusCard.util.toJson(queryInfoObj);var validInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+giftNo;parameter+="&serviceOfferId="+constObj.DEFAULT_SERVICE_OFFER_ID;parameter+="&mktResType=7";
parameter+="&queryJsonInfo="+queryInfo;parameter+="&productId=''";parameter+="&validJsonInfo="+validInfo;parameter+="&cityCode="+cardInfo.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getResListInfo",parameter);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){Me.$("advancedPayment").value=jsonResultObj.CARD_VALUE/100;
if(jsonResultObj.VALID_DATE&&jsonResultObj.VALID_DATE!="null"){Me.$("advancedEffDate").value=jsonResultObj.VALID_DATE;}else{Me.$("advancedEffDate").value="";}Me.$("mktGiftResInstId").value=jsonResultObj.INST_ID;
}else{alert(jsonResultObj.message);Me.$("giftNo").value="";Me.$("verifyNo").value="";Me.$("giftNo").focus();return false;}}catch(e){alert(e);Me.$("giftNo").value="";Me.$("verifyNo").value="";Me.$("giftNo").focus();
return false;}};Me.checkSameCouponNo=function(couponNo){var couponNoList=null;try{couponNoList=ordermgr.accept.compnew._coupon_no_list_;}catch(e){}if(couponNoList){var len=couponNoList.length;var count=0;
while(len--){var current=couponNoList[len].couponNO;if(current.length>0&&current==couponNo){count++;}}if(count>0){alert("\u53f7\u7801\u5df2\u9009\u7528\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");Me.$("giftNo").value="";
Me.$("giftNo").focus();return false;}}return true;};Me.setObjReadOnly=function(name){if(name&&Me.$(name)&&Me.$(name).type=="text"){Me.$(name).readOnly=true;}return;};var cardInit=function(){Me.setObjReadOnly("advancedPayment");
if(validMonths){Me.$("advancedDays").value=validMonths;Me.setObjReadOnly("advancedDays");}};cardInit();});
