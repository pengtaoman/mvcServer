BusCard.define("/buscardapp/rela/js/getChangeSales.js",function(h,g){var i=this;var f=arguments[0];var c=arguments[1];var e=h.executeRequest;var d={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
i.init=function(){var b=i.$("contcatPhone");var a=i.$("addrId");var j=i.$("addrDetail");var l=i.$("branchNo");var k=i.$("serviceId");b&&(b.disabled=true);a&&(a.disabled=true);j&&(j.disabled=true);l&&(l.disabled=true);
k&&(k.disabled=true);this.serviceRelation=h.$remote("prodInstCommFacadeBO").getServiceRelationByProperties({userId:this.getCardRelationInfo().userId})[0]||h.$remote("prodInstDAO").queryById({prodInstId:parseInt(this.getCardRelationInfo().userId+"")});
if(this.serviceRelation){if(!this.serviceRelation.serviceId){this.serviceRelation.serviceId=this.serviceRelation.accNbr;}}this.renderDefaultValue(this.serviceRelation);if(!!i.$("paymentModeCd")){i.$("paymentModeCd").value=this.serviceRelation.billMode;
}(function(){var n=i.serviceRelation.addressId;var m=i.$("addrId");if(m){m.rvalue=n;var o=f.$remote("mktGetAddressNameDAO").getAddressNameById(i.serviceRelation.cityCode,n);if(o){o=o.replace(/"/g,"");}if(o&&o!="null"){m.value=o;
}else{m.value=n||"0";}}var q=BusCard.$remote("prodInstCommFacadeBO").getUserRoleChangeHisInfo({userId:(i.serviceRelation.userId||i.serviceRelation.prodInstId)})[0];if(!!q&&!!q.serviceGroupId){var p=BusCard.util.parse(BusCard.$remote("serviceParamBO").getServiceGroupName(q.cityCode,q.serviceGroupId,q.serviceKind));
i.$("serviceGroupId").rvalue=q.serviceGroupId;i.$("serviceGroupId").value=p;}})();};i.init();});
BusCard.define("/buscardapp/rela/js/AcceptSourceHandler.js",function(b,l){var k=this;var g=dojo.require("orderaccept.prodofferaccept.util");var f=dojo.require("orderaccept.common.js.ConstantsPool");var i=f.load("PaymentModeConst").PaymentModeConst;
var c=g.DomHelper.getParentWidget(k.$("acceptSource"),"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");var a=$ac$.mainProdOfferInstVO;var h=$ac$.selectedMemberProdOfferList;var m=null;
if(!a||!a.prodOfferInstId){m=dojo.filter(h,function(n){if(!!c&&!!c.cardParam){return n.uniqueId==c.cardParam.uniqueId;}return false;})[0];}if(!!k.$("acceptSource")){if((!!a&&!!a.prodOfferInstId)||(!!m&&!!m.prodInstId)){k.$("acceptSource").disabled=true;
}var e=b.executeRequest;var j="menuId=841ABWE";var d=e("prodOfferSaleAjaxAction","InnetCheck",j);if(d!="1"){k.$("acceptSource").disabled=true;}dojo.connect(k.$("acceptSource"),"onclick",function(){if(!!k.$("uimId")&&k.$("uimId").value!=""){k.$("uimId").onblur();
}var o=false;if(!!k.$("paymentModeCd")&&k.$("paymentModeCd").value==i.PREPAID){o=true;}var p=c.attrCardWidget;var q=!!p?p.busCardInstance:null;if(k.$("acceptSource").checked){k.$("acceptSource").value="1";
if(o==true&&!!q){var n=dojo.query("[id=subgroup_productAttrMore]",q.domNode)[0];if(!!n){q.displaySubGroup(n);}}}else{k.$("acceptSource").value="0";}});}});
BusCard.define("/buscardapp/rela/js/paymentModeCdHandler.js",function(a,m){var c=this;var d=c.$("paymentModeCd");var u=$ac$.get("requestParam");c.serviceRelation=c.getCardRelationInfo();if($ac$.get("orderChangeFlag")==1){var i=dojo.filter($ac$.get("selectedMemberProdOfferList")||[],function(x){return x.uniqueId==m.uniqueId;
})[0];if(!!i){c.serviceRelation=i.prodItemVO;}}var b=dojo.require("orderaccept.prodofferaccept.util");var g=dojo.require("orderaccept.common.js.ConstantsPool");var h=g.load("PaymentModeConst").PaymentModeConst;
var k=$ac$.get("selectedMemberProdOfferList");var n=dijit.getEnclosingWidget(c.dom);var r=null;var l="";var o=null;if(c.dom&&c.dom.parentNode){r=dijit.getEnclosingWidget(c.dom.parentNode);}if(!!n&&n.cardParam){l=n.cardParam.uniqueId;
}if(!!r&&!!l){o=dojo.query("[uniqueId="+l+"]",r.domNode)[0];}var w=dojo.filter(k,function(x){return x.uniqueId==l;})[0];var q=false;if(!!w&&w.action=="nochange"){q=true;}var e=b.ProdOfferHelper.getMainProdOffer($ac$.get("prodOfferList"))[0]||$ac$.get("prodOfferList")[0];
if(!!c.serviceRelation){var f=c.serviceRelation;if((!$ac$.get("orderChangeFlag")||$ac$.get("orderChangeFlag")!=1)&&!!f&&!!(c.serviceRelation.userId>0)){f=a.$remote("prodInstCommFacadeBO").getServiceRelationByProperties({userId:c.serviceRelation.userId})[0];
}var t=o.getAttribute("serviceKind");var p=(c.serviceRelation.userId>0)?f.billMode:(e.feeType==h.PREPAID?h.PREPAID:h.REAL_PREPAID);var v=[];dojo.forEach(d.options,function(x){if((p==h.PREPAID&&x.value!=h.PREPAID)||((p==h.POSTPAID||p==h.REAL_PREPAID)&&x.value==h.PREPAID)){v.push(x);
}});dojo.forEach(v,function(x){d.remove(x.index);});var j=document.createElement("option");j.value="";j.text="\u8bf7\u9009\u62e9";d.options.add(j,0);c.$("paymentModeCd").value=(c.serviceRelation.userId>0)?f.billMode:"";
if(!q){var s=dojo.filter(d.options,function(x){return p==x.value;})[0];if(!s){c.$("paymentModeCd").value="";}}}});
BusCard.define("/buscardapp/rela/js/globalEyeNumber.js",function(_buscard,cardParam){var Me=this;var b=arguments[1];Me.productId=b.productId;Me.belongCode=b.belongCode;Me.cityCode=b.cityCode;var executeRequest=_buscard.executeRequest;
Me.getChooseNumber=function(){var parameter="productId="+Me.productId+"&cityCode="+Me.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";var areaId="-1";
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;var areaIdJsonStr=executeRequest("prodOfferSaleAjaxAction","getAreaId",parameter);
var jsonAreaIdObj=(typeof areaIdJsonStr=="string")?eval("("+areaIdJsonStr+")"):areaIdJsonStr;if(jsonAreaIdObj&&jsonAreaIdObj.flag&&jsonAreaIdObj.flag=="1"){areaId=jsonAreaIdObj.message;result="18"+areaId.substring(0,4)+"0001"+result+"00";
}}}catch(e){alert("\u751f\u6210\u53f7\u7801\u51fa\u9519");return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();
Me.$("link_serviceId").disabled=true;};});
BusCard.define("/buscardapp/rela/js/getSubGropNumber.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.cityCode=b.cityCode;
Me.productId=b.productId;Me.getChooseNumber=function(){var parameter="productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getSubGropNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;
}else{return false;}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};});
BusCard.define("/buscardapp/rela/js/groupProductHandler.js",function(f,e){var d=arguments[0];var c=arguments[1];var g=this;g.serviceId=c.serviceId;if(!!g.serviceId&&!!g.$("serviceId")){g.$("serviceId").value=g.serviceId;
}});
BusCard.define("/buscardapp/rela/js/installTimeHandler.js",function(d,k){var j=this;if(!window.installTimePopupIndx){window.installTimePopupIndx=1;}var b=dojo.require("orderaccept.common.dialog.MessageBox");
var g=dojo.require("orderaccept.prodofferaccept.util");var f=dojo.require("orderaccept.common.js.ConstantsPool");var e=g.DomHelper.getParentWidget(j.$("installTimeBtn"),"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");
var a=dojo.getObject("prodOfferAcceptLoader.mainProdOfferWidget");var h=$ac$.requestParam.customerData;if(!!a){var i=dojo.query("tr[uniqueId="+e.cardParam.uniqueId+"]",a.domNode)[0];if(!!i){var c="&ServiceKind="+i.getAttribute("serviceKind")+"&apply_event="+g.ACTION_CD_CONST.PRODUCT_INSTALL+"&infoId=1002";
var l=g.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+c);if(!!l&&l=="1"){j.$("installTimeBtn").className="formButtonL";dojo.style(j.$("installTimeBtn"),"cursor","pointer");
j.$("timeName")?j.$("timeName").disabled=true:null;dojo.connect(j.$("installTimeBtn"),"onclick",function(){var n=j.$("addrId");var q=j.$("bookDate");if(!n||!n.rvalue){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u8bf7\u5148\u9009\u62e9\u6807\u51c6\u5730\u5740"});
return false;}if(!q||!q.value){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u8bf7\u5148\u9009\u62e9\u9884\u7ea6\u88c5\u673a\u65f6\u95f4"});return false;}var p="<ADDR_ID>"+n.rvalue+"</ADDR_ID><PRODUCT_ID>"+j.productId+"</PRODUCT_ID><CUST_TYPE>"+h.custType+"</CUST_TYPE><CUST_BRAND>"+h.brandInd+"</CUST_BRAND><BOOK_DATE>"+q.value+"</BOOK_DATE>";
var m=BusCard.$remote("iomServiceBO").doIntallTimeQueryHandle(p);if(m.IS_SUCCESS=="T"){var o=1;var s='<div id="installTimePopup+'+window.installTimePopupIndx+'" class="buscard-root" style="width: 400px; height: auto;">											<div class="buscard-legend">												<span class="buscard-legend-img"></span>												<span class="buscard-legend-text">\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5</span>											</div>											<div class="buscard-content">												<div class="buscard-container">													<div class="buscard-subgroup">														<div class="buscard-row">';
dojo.forEach(m.SLA_INFO,function(u){s+="<div class=\"buscard-item-label\" style=\"width:6%;\"> 											<input type='radio' name='bookRadio' 												 timeName='"+u.TIME_NAME+"' 												 bookDate='"+u.BOOK_DATE+"' 												 timeNameId='"+u.TIME_NAME_ID+'\' /> 										</div>										<div class="buscard-item-el" style="width:24%;">'+u.TIME_NAME+"</div>";
if(o%3==0&&!!m.SLA_INFO[o+1]){s+='</div><div class="buscard-row">';}o++;});s+="</div></div></div></div></div>";unieap.showTooltip({inner:s,autoClose:true},j.$("timeName"),["below","above","before"]);var r=dojo.byId("installTimePopup+"+window.installTimePopupIndx);
if(!!r){var t=dojo.query("[name=bookRadio]",r);dojo.forEach(t,function(u){u.onclick=function(){!!j.$("bookDate")?j.$("bookDate").value=this.getAttribute("bookDate"):null;!!j.$("timeName")?j.$("timeName").value=this.getAttribute("timeName"):null;
!!j.$("installTimeSegmentId")?j.$("installTimeSegmentId").value=this.getAttribute("timeNameId"):null;!!j.$("bookDate")?j.$("bookDate").disabled=true:null;!!j.$("timeName")?j.$("timeName").disabled=true:null;
unieap.hideTooltip(j.$("timeName"));};});}window.installTimePopupIndx++;}else{if(m.IS_SUCCESS=="F"){b.alert({title:"\u63d0\u793a\u4fe1\u606f",message:m.ERROR_DESC});return false;}}});}else{if(!!j.$("installTimeBtn")){dojo.style(j.$("installTimeBtn"),"display","none");
}if(!!j.$("label_installTimeBtn")){dojo.style(j.$("label_installTimeBtn"),"display","none");}}}}});
BusCard.define("/buscardapp/rela/js/card_129_100151301.js",function(d,i){var h=this,f=$ac$.get("requestParam"),g=i.cityCode||f.cityCode||f.customerData.cityCode,e=BusCard.$remote("serviceParamDAO"),c=e.getCommonRegionByLevel(3).list||[],j=h.$("cityCode"),b=i.belongCode,a=h.$("belongCode");
BusCard.$rs(j,dojo.map(c,function(k){return{id:k.preserve_3,name:k.name};}));j.value=g;j.onchange=function(){var k=this,m=this.value,o=e.getAreaCollByCityCode(m).list;BusCard.$rs(a,o);var n=dojo.getObject("prodOfferAcceptLoader");
if(!!n&&!!n.getBelongCode){var l=n.getBelongCode();h.renderDefaultValue({belongCode:b||l});}BusCard.dispatchEvent(a,"change");};BusCard.dispatchEvent(j,"change");});
BusCard.define("/buscardapp/rela/js/installTimeSegment.js",function(b,i){var h=this;var e=dojo.require("orderaccept.prodofferaccept.util");var d=dojo.require("orderaccept.common.js.ConstantsPool");var c=d.load("ServiceOfferIDConst").ServiceOfferIDConst;
var f=d.load("ProductIdConst").ProductIdConst;var a=dojo.require("orderaccept.common.dialog.MessageBox");dojo.connect(h.$("timeName"),"onblur",function(){if(!h.$("timeName").value){return false;}var k=/^(\d{2}):(\d{2})-(\d{2}):(\d{2})$/;
var l=h.$("timeName").value.match(k);if(!l||l[1]>24||l[3]>24||l[2]>60||l[4]>60){MessageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:'\u3010\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5\u3011\u683c\u5f0f\u5e94\u4e3a"HH:ss-HH:ss"'});
h.$("timeName").value="";return false;}if(l[1]>l[3]||(l[1]==l[3]&&l[2]>=l[4])){MessageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u3010\u9884\u7ea6\u88c5\u673a\u65f6\u95f4\u6bb5\u3011\u4e2d\u7ed3\u675f\u65f6\u95f4\u5e94\u5927\u4e8e\u5f00\u59cb\u65f6\u95f4"});
h.$("timeName").value="";return false;}});if(dojo.getObject("prodOfferAcceptLoader")){var j=dojo.getObject("prodOfferAcceptLoader").orderInfoCardWidget.busCardInstance.$("batchFlag");var g=function(){if(j.value==1){if(!!h.$("bookDate").getAttribute("isnull")){h.$("bookDate").setAttribute("isnull","1");
var m=dojo.query(".formRequested",h.$("label_bookDate"))[0];if(m){dojo.style(m,"display","none");}}}else{if(j.value==0){var l=(!!i&&i.productId)?i.productId:"";var k=(!!i&&i.productId)?i.serviceOfferId:"";
if(k==c.PROD_NEW&&(l=="100000"||l=="230032"||l=="100025")){if(!!h.$("bookDate").getAttribute("isnull")){h.$("bookDate").setAttribute("isnull","0");var m=dojo.query(".formRequested",h.$("label_bookDate"))[0];
if(!m){dojo.place('<span class="formRequested">*</span>',dojo.query(".buscard-label",h.$("label_bookDate"))[0],"first");m=dojo.query(".formRequested",h.$("label_bookDate"))[0];}dojo.style(m,"display","");
}}}}};if(j){dojo.connect(j,"onchange",g);g();}}});
BusCard.define("/buscardapp/rela/js/agentNumberCardCheck.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];Me.productId=b.productId;Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;
Me.uniqueId=b.uniqueId;var executeRequest=_buscard.executeRequest;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");var uimDealer="";var numberDealer="";var ifVirtual="";var uimKind="";
var productInfo=BusCard.$remote("productToServiceDAO").queryById({productId:Me.productId});Me.checkIfCoop=function(value,coopFlag){var parameter="objectId="+value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag="+coopFlag;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return false;}if(resultJson.NUMBER!="-1"){return true;
}return false;};Me.uimDealerCheck=function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var isCode="";var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;
if(acceptWay==3){isCode="2";}else{isCode="1";}var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;
parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);
var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){uimDealer=jsonResultObj.allId.BELONGS_TO;$("sourceId").value=jsonResultObj.allId.BELONGS_TO;
uimKind=jsonResultObj.allId.UIM_KIND;if(jsonResultObj.allId.UIM_KIND!=30&&jsonResultObj.allId.UIM_KIND!=31){var param="serviceOfferId="+Me.serviceOfferId+"&resDealer="+jsonResultObj.allId.BELONGS_TO+"&serviceKind="+productInfo.netType+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doSourceDealerCheck",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});var ifCoop=Me.checkIfCoop(Me.$("uimId").value,"UIM_COOP_FLAG");
if(ifCoop){Me.$("serviceId").value="";}Me.$("uimId").value="";return false;}}}if(numberDealer==""){Me.numberDealerCheck();}}};Me.numberDealerCheck=function(){if(Me.$("serviceId").value!=""){var isCode="";
var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;if(acceptWay==3){isCode="2";}else{isCode="1";}var queryInfoObj={IF_VIRTUAL:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("serviceId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=1";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){ifVirtual=jsonResultObj.allId.IF_VIRTUAL;
if(jsonResultObj.allId.IF_VIRTUAL!="1"){numberDealer=jsonResultObj.allId.BELONGS_TO;var param="serviceOfferId="+Me.serviceOfferId+"&resDealer="+jsonResultObj.allId.BELONGS_TO+"&serviceKind="+productInfo.netType+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doSourceDealerCheck",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});var ifCoop=Me.checkIfCoop(Me.$("serviceId").value,"NO_COOP_FLAG");
if(ifCoop){Me.$("uimId").value="";}Me.$("serviceId").value="";return false;}if(uimDealer==""){Me.uimDealerCheck();}}}}};Me.numberCardDealerCheck=function(){var isCode="";var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;
if(acceptWay==3){isCode="2";}else{isCode="1";}if(Me.$("uimId").value!=""&&Me.$("serviceId").value!=""){if(productInfo.netType=="8"){if(ifVirtual!="1"){if(uimKind!="30"&&uimKind!="31"){var param="serviceOfferId="+Me.serviceOfferId+"&phoneDealer="+numberDealer+"&cardDealer="+uimDealer+"&isCode="+isCode;
var result=executeRequest("goodsSaleAcceptAction","doCheckResSame",param);if(!!result){messageBox.alert({busiCode:"08410213",infoList:[result]});Me.$("uimId").value="";Me.$("serviceId").value="";return false;
}}}}}};Me.numberCardDealerCheckBefore=function(value,coopFlag){var parameter="objectId="+value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag="+coopFlag;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}if(ifVirtual=="1"){return;
}if(resultJson.NUMBER=="-1"&&ifVirtual!="1"){var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay").value;var switch256=executeRequest("prodOfferSaleAjaxAction","ifCheckNumberResSame","");
if(switch256=="3"){Me.numberCardDealerCheck();}else{if(switch256=="1"){if(acceptWay=="3"){Me.numberCardDealerCheck();}}else{if(switch256=="2"){if(acceptWay!="3"){Me.numberCardDealerCheck();}}}}}};BusCard.addEventListener(Me.$("uimId"),"blur",function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){if(productInfo.netType==8||productInfo.netType==70){Me.uimDealerCheck();
Me.numberCardDealerCheckBefore(Me.$("uimId").value,"UIM_COOP_FLAG");}}});BusCard.addEventListener(Me.$("serviceId"),"blur",function(){if(Me.$("serviceId").value!=""){if(productInfo.netType==8||productInfo.netType==70){Me.numberDealerCheck();
Me.numberCardDealerCheckBefore(Me.$("serviceId").value,"NO_COOP_FLAG");}}});var acceptWay=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("acceptWay");var batchFlag=prodOfferAcceptLoader.orderInfoCardWidget.busCardInstance.$("batchFlag");
BusCard.addEventListener(acceptWay,"change",function(){if(Me.$("serviceId").value!=""){if(productInfo.netType==8||productInfo.netType==70){Me.numberDealerCheck();Me.numberCardDealerCheckBefore(Me.$("serviceId").value,"NO_COOP_FLAG");
}}if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){if(productInfo.netType==8||productInfo.netType==70){Me.uimDealerCheck();Me.numberCardDealerCheckBefore(Me.$("uimId").value,"UIM_COOP_FLAG");}}});
BusCard.addEventListener(batchFlag,"change",function(){if((Me.$("acceptSource")&&Me.$("acceptSource").checked==true&&acceptWay.value=="3")&&(!batchFlag||batchFlag.value=="0")){alert("\u975e\u6279\u91cf\u53d7\u7406\u7684\u9884\u767b\u5f55\u4e0d\u80fd\u9009\u62e9\u4ee3\u7406\u5546\u5165\u7f51");
batchFlag.value="1";return false;}});});
BusCard.define("/buscardapp/rela/js/card_129_10081.js",function(h,o){try{var n=this;var m=arguments[0];var l=arguments[1];var q=m.path.contextPath;n.productId=l.productId;n.belongCode=l.belongCode;n.cityCode=l.cityCode;
var d=dojo.require("orderaccept.common.dialog.MessageBox");var i=function(){if(window.customerData){return window.customerData;}else{if(dojo.global.$appContext$&&dojo.global.$appContext$.get("requestParam")){return dojo.global.$appContext$.get("requestParam").customerData;
}else{return{custId:l.serviceRelation.customerId,cityCode:l.serviceRelation.cityCode};}}}();var k=i.custId;var c=null;var p=null;var g=function(r){var s=window.custOrderInfo?(window.custOrderInfo.custOrderId):"";
if(s&&/^(\d+)$/.test(s)){var u=BusCard.$remote("accessProdItemInfoDAO");try{var b=u.selectByProperties({custOrderId:parseInt(s),serviceKind:10});if(b&&b.length>0){var a=b.length;while(a--){if(b[a].serviceId==r){return true;
}}return false;}else{return false;}}catch(t){return false;}}else{return false;}};n.resetAddrId=function(b,t){var a=false;if(c!=null){for(var r=0;r<c.length;r++){var v=c[r];if(v.serviceId==b&&v.productId.toString()==t){n.$("addrDetail").value=v.addrDetail;
try{var u=m.$remote("mktGetAddressNameDAO").getAddressNameById(v.cityCode,v.addressId);if(u!=null&&u!=""){n.$("addrId").rvalue=v.addressId;n.$("addrId").value=u.replace(/"/g,"");}}catch(s){}a=true;break;
}}}if(!a){if(p!=null){for(var r=0;r<p.length;r++){var v=p[r];if(v.serviceId==b&&v.productId.toString()==t){n.$("addrDetail").value=v.addrDetail;try{var u=m.$remote("mktGetAddressNameDAO").getAddressNameById(v.cityCode,v.addrId);
if(u!=null&&u!=""){n.$("addrId").rvalue=v.addrId;n.$("addrId").value=u.replace(/"/g,"");}}catch(s){}break;}}}}};void function(){var r=n.$("serviceId");r.parentNode.className="buscard-el buscard-inline-buttom buscard-combobox-ctn";
var e=document.createElement("div");e.className="buscard-combobox-display-ctn";r.parentNode.appendChild(e);var b=n.$("link_serviceId");var a=n.$("link_serviceId").onclick;n.$("link_serviceId").onclick=function(){var B=document.getElementsByName("serviceId");
var t=BusCard.util.findAll(B,function(E){return(E!=r)&&(E.controlFieldName=="serviceId")&&(E.value!=null&&E.value!="");});var u=m.$remote("serviceRelationDAO").query({customerId:parseInt(i.custId),ifValid:1,cityCode:i.cityCode});
var v=m.util.findAll(u,function(E){return E.serviceKind==10||E.serviceKind==8;});var D=m.util.map(v,function(E){return{value:E.serviceId};});if(D!=null&&D.length>0){Array.prototype.push.apply(t,D);}var A=t.length;
var w=[];var x=[];for(var z=0;z<A;z++){if(x[t[z].value]!=1){w.push(t[z]);x[t[z].value]=1;}}if(w&&w.length==0){d.alert({message:"\u5f53\u524d\u5ba2\u6237\u4e0b\u4e0d\u5b58\u5728\u624b\u673a\u53f7\u7801\u6216\u8005\u56fa\u8bdd\u53f7\u7801\uff0c\u8bf7\u624b\u52a8\u8f93\u5165\u4e1a\u52a1\u53f7\u7801"});
return;}if(w&&w.length>0){if(confirm("\u662f\u5426\u4ece\u5176\u4ed6\u4e1a\u52a1\u751f\u6210\u53f7\u7801?")){e.innerHTML="";var y=BusCard.util.map(w,function(E){return{id:E.value,name:E.value};});var s=y.length;
for(var z=0;z<s;z++){var C=m.$c("span");C.className="buscard-combobox-item";C.value=y[z].id||y[z].ids;C.innerHTML=y[z].name;C.onclick=function(){r.value=this.innerHTML;if(!!r.setPPPOEPwd){r.setPPPOEPwd();
}e.style.display="none";e.parentNode.style.zIndex="0";var K=dojo.query("[name=accServiceId-"+n.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",n.dom)[0]);dojo.forEach(K||[],function(L){L.checked=false;});
var F=this.innerHTML;var I=false;dojo.forEach(K||[],function(L){if(L.getAttribute("serviceid")==F){I=true;L.checked=true;}});if(!I){var H=[];var J=dojo.getObject("prodOfferAcceptLoader");if(!!J){var E=dojo.query(".main-product-basic",J.mainProdOfferWidget.domNode);
dojo.forEach(E||[],function(L){var N=dojo.attr(L,"uniqueId");var M=dojo.attr(L,"serviceKind")||"-1";if(J.serviceCardWidgetMap["serviceCardWidget_"+N].busCardInstance.$("serviceId").value==F){H.push({uniqueId:N,serviceKind:M});
}});}if(H.length>0){if(H.length>1){var G=dojo.filter(H||[],function(L){return L.serviceKind==8||L.serviceKind==10;});if(G.length>0){H=G;}}dojo.forEach(K||[],function(L){if(H[0].uniqueId==L.getAttribute("targetUniqueId")){L.checked=true;
}});}}};C.onmouseover=function(){this.className="buscard-combobox-item buscard-combobox-item-over";};C.onmouseout=function(){this.className="buscard-combobox-item buscard-combobox-item-out";};e.appendChild(C);
}e.parentNode.style.zIndex="10";e.style.display="block";}else{a.apply(b,[event||window.event]);}}else{a.apply(b,[event||window.event]);}};}();BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._xdsl_number_elem_list_=[];
var f={};f.service=n.$("serviceId");f.productId=n.productId;ordermgr.accept.compnew._xdsl_number_elem_list_.push(f);}catch(j){alert(j.message);}});
BusCard.define("/buscardapp/rela/js/setPreAccpetInfo.js",function(h,g){var i=this;var f=arguments[0];var c=arguments[1];var e=h.executeRequest;var j=c.uniqueId;var d={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
i.init=function(){if(dojo.getObject("prodOfferAcceptLoader")!=null&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){var n=prodOfferAcceptLoader.preAcceptOrderVO;
var o=prodOfferAcceptLoader.preAcceptOfferVO;if(!!n){if(!!i.$("serviceId")&&!!n.serviceId){i.$("serviceId").value=n.serviceId;BusCard.dispatchEvent(i.$("serviceId"),"blur");setTimeout(function(){!!i.$("serviceId").setPPPOEPwd?i.$("serviceId").setPPPOEPwd():null;
},3000);}if(!!i.$("addrId")){var b=n.standardAddressId;var a=i.$("addrId");var m=i.$("addrDetail");if(a&&!!b){a.rvalue=b;var k=f.$remote("mktGetAddressNameDAO").getAddressNameById(n.acceptCity,b);if(k){k=k.replace(/"/g,"");
}if(k&&k!="null"){a.value=k;if(!!m){m.value=k;}}else{a.value=b||"0";}}}if(!!i.$("bureauId")&&!!n.bureauId){i.$("bureauId").value=n.bureauId;}if(!!i.$("branchNo")&&!!n.bureauNo){i.$("branchNo").value=n.bureauNo;
}var l=n.switchId;if(!!l){setTimeout(function(){var r=prodOfferAcceptLoader.serviceCardWidgetMap||[];var q=r["serviceCardWidget_"+i.uniqueId].attrCardWidget||{};var p=!!q.busCardInstance?q.busCardInstance.$("60056"):null;
!!p?p.value=l:null;},3000);}}}};i.init();});
BusCard.define("/buscardapp/rela/js/card_129_100143301.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.controlServiceId=function(){g.$("link_serviceId").style.visibility="hidden";g.$("label_serviceId").innerHTML=g.$("label_serviceId").innerHTML.replace("??????","??????(?????)");
};g.controlServiceId();});
BusCard.define("/buscardapp/rela/js/card_129_100204301.js",function(b,a){var c=this;c.controlServiceId=function(){if(!!c.$("serviceId").getAttribute("isnull")){c.$("serviceId").setAttribute("isnull","1");
var d=dojo.query(".formRequested",c.$("label_serviceId"))[0];if(!d){dojo.place('<span class="formRequested">*</span>',c.$("label_serviceId"),"first");}dojo.style(d,"display","none");}};c.controlServiceId();
});
BusCard.define("/buscardapp/rela/js/card_129_10057.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];Me.productId=b.productId;Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;
Me.uniqueId=b.uniqueId;Me.preCoopObj={offerIdList:[],uimInstId:"",ifOrdered:false};var executeRequest=_buscard.executeRequest;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");var util=dojo.require("orderaccept.prodofferaccept.util");
Me.checkIfBigGroup=function(){var prodOfferVO=$ac$.selectedMainProdOfferInfoVO;var feeType=prodOfferVO.feeType;if(feeType=1200){$("paymentModeCd").value=1200;$("paymentModeCd").disabled="true";}else{messageBox.alert({busiCode:"08410212"});
Me.$("uimId").value="";$("paymentModeCd").disabled=false;return false;}};Me.setProdOfferProperties=function(){var resultJsonStr=null;try{var queryInfoObj={BIND_MOBILE_NO:"0",BIND_SUGGEST_PRICE:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var mainProdOfferDetailWidget=null;
if(!!$ac$&&(!!$ac$.selectedMainProdOfferInfoVO)&&(!!$ac$.selectedMainProdOfferInfoVO.bindType)&&($ac$.selectedMainProdOfferInfoVO.bindType==2)){var loader=dojo.getObject("prodOfferAcceptLoader");var providerMap=loader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap;
mainProdOfferDetailWidget=providerMap["subProdOfferTreeContainer"+Me.uniqueId].prodOfferInfoWidget.mainProdOfferDetailWidget;}else{if(dojo.getObject("prodOfferAcceptLoader.mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance")){mainProdOfferDetailWidget=prodOfferAcceptLoader.mainProdOfferDetailWidget;
}}var phonePrice=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300014");if(phonePrice){phonePrice.value=jsonResultObj.allId.BIND_SUGGEST_PRICE;phonePrice.style.display="none";phonePrice.parentNode.previousSibling.style.display="none";
}var phoneNumber=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300013");if(phoneNumber){phoneNumber.value=jsonResultObj.allId.BIND_MOBILE_NO;}}}catch(e){throw new Error("\u83b7\u53d6\u9ed1\u8393\u4fe1\u606f\u9519\u8bef:"+resultJsonStr);
}};Me.ifCanHeiMei=function(){var resultJsonStr=null;try{var prodOfferInfoVO={};if($ac$){var prodOfferList=$ac$.get("prodOfferList"+Me.uniqueId);if(!prodOfferList){prodOfferList=$ac$.get("prodOfferList");
}prodOfferInfoVO=BusCard.find(prodOfferList||[],function(vo){return vo.prodOfferType==1;})||{};}if(prodOfferInfoVO){var resRelaList=prodOfferInfoVO.resRelaList;if(!resRelaList||!resRelaList.length){return false;
}var resIdList=[];for(var i=0;i<resRelaList.length;i++){resIdList.push(resRelaList[i].resourceKind);}var resId=resIdList.join("^");if(resId==""){resId="-1";}if(resId!="-1"){var validInfoObj={checkBlackberry:resId};
var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&productId="+Me.productId;
parameter+="&validJsonInfo="+validJsonInfo;resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getValidResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag){if(jsonResultObj.flag=="-1"){messageBox.alert({busiCode:"08410213",infoList:[jsonResultObj.message]});Me.$("uimId").value="";return false;}if(jsonResultObj.flag=="99"){dojo.global.$appContext$.set("checkBlackberry","99");
Me.checkIfBigGroup();Me.setProdOfferProperties();}}}}}catch(e){throw new Error("\u9ed1\u8393\u68c0\u6d4b\u9519\u8bef:"+e.message);}};Me.$("label_writeCardBtn").innerHTML="";Me.checkUim=function(){var E=Me.$("uimId");
var A=Me.$("uimId").value;var serviceId=Me.$("serviceId").value;if(!A){return true;}var ifCheckImsi="1";if(!A||!serviceId){ifCheckImsi="0";}var C="uimId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&serviceId="+serviceId+"&checkImsi="+ifCheckImsi;
var D=executeRequest("prodOfferSaleAjaxAction","checkUimResource",C);var B=executeAjaxResult(D);if(B==false){Me.$("uimId").value="";if(Me.$("serviceId").disabled==true){Me.$("serviceId").value="";Me.$("serviceId").disabled=false;
}return;}Me.$("uimResInstId").value=B;if(Me.$("serviceId")){var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}var param="&ServiceKind=8&apply_event=-1&infoId=8881";
var result=util.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+param);if(!!result&&result=="1"){if(resultJson.NUMBER=="-1"&&!!Me.$("acceptSource")&&Me.$("acceptSource").checked==true){Me.$("uimId").value="";
messageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"\u9884\u767b\u5f55\u7528\u6237\u53ea\u80fd\u9009\u62e9\u9884\u914d\u53f7\u7801"});return;}}if(!!Me.$("ifPreCoop")){Me.$("ifPreCoop").value=!!resultJson.OPEN_STATUS?resultJson.OPEN_STATUS:"";
}if(resultJson.NUMBER!="-1"){if(Me.$("serviceId").value==""||Me.$("serviceId").value!=resultJson.NUMBER){Me.$("serviceId").value=resultJson.NUMBER;Me.$("serviceId").onblur();}}else{if(Me.$("serviceId").disabled==true){Me.$("serviceId").value="";
Me.$("serviceId").disabled=false;}}}if(!!serviceId){var parameter="objectId="+serviceId+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=NO_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!!resultJson||resultJson.flag<=0){if(resultJson.NUMBER!="-1"&&serviceId!=resultJson.NUMBER){if(Me.$("uimId").value==""||Me.$("uimId").value!=resultJson.NUMBER){MessageBox.confirm({message:"\u4e1a\u52a1\u53f7\u7801\u4e3a\u9884\u914d\u53f7\u7801\uff0c\u4f46\u4e0e\u5f53\u524dUIM\u5361\u53f7\u4e0d\u5339\u914d\uff0c\u662f\u5426\u4fdd\u7559\u9884\u914d\u5173\u7cfb?",onComplete:function(){return function(value){if(value==true){Me.$("serviceId").onblur();
}else{Me.$("resInstId").value="";Me.$("serviceId").value="";}};}(),iconCloseComplete:false},Me.$("serviceId"));}}}}if(Me.$("uimResInstId").value==""){if(Me.$("uimId").value!="9999"&&Me.$("uimId").value!=""){alert("\u8d44\u6e90\u5b9e\u4f8b\u4e3a\u7a7a");
Me.$("uimId").value="";}}};BusCard.addEventListener(Me.$("uimResInstId"),"propertychange",function(){Me.$("sourceName").innerHTML="";if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var parameter="&objectType="+ConstantsPool.load("ResourceConst").ResourceConst.OBJECT_TYPE_NUMBER+"&resourceType="+ConstantsPool.load("ResourceConst").ResourceConst.RESOURCE_TYPE_SMART_CARD+"&objectId="+Me.$("uimId").value+"&cityCode="+Me.cityCode;
Me.$("sourceName").innerHTML=Me.getSourceName(parameter);}var uimResInstId=Me.$("uimResInstId").value;if(!(window.$ac$&&window.$ac$.get("orderChangeFlag"))&&dojo.getObject("prodOfferAcceptLoader.multipleSubProdOfferHandler")!=null){var _prodvider=prodOfferAcceptLoader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap["subProdOfferTreeContainer"+Me.getIfMultipleOffer()];
if(!!_prodvider&&!!uimResInstId){if(Me.preCoopObj.ifOrdered==false||Me.preCoopObj.uimInstId!=uimResInstId){_prodvider.interFaceForCoopNum([]);var coopJson=Me.checkIfCoopNum();var ifCoopNum=coopJson.UIM_COOP_FLAG;
if(ifCoopNum=="1"){var prodOfferIdList=Me.getProdOfferListRel(coopJson.OTHER_INST_ID);_prodvider.interFaceForCoopNum(prodOfferIdList);Me.preCoopObj.offerIdList=prodOfferIdList;Me.preCoopObj.uimInstId=uimResInstId;
Me.preCoopObj.ifOrdered=true;}else{Me.preCoopObj.offerIdList=[];Me.preCoopObj.uimInstId=uimResInstId;Me.preCoopObj.ifOrdered=false;}}}}});Me.getProdOfferListRel=function(uimResInstId){var prodOfferId=null;
if($ac$.selectedMainProdOfferInfoVO.bindType==2){var selectedMemberProdOfferList=$ac$.selectedMemberProdOfferList;var targetSelectMem=BusCard.find(selectedMemberProdOfferList||[],function(_data){return _data.uniqueId==Me.uniqueId;
});prodOfferId=!!targetSelectMem?targetSelectMem.prodOfferId:-1;}else{prodOfferId=$ac$.selectedMainProdOfferInfoVO.prodOfferId;}var belongCode=function(){try{return prodOfferAcceptLoader.getBelongCode();
}catch(e){}}();return util.ServiceFactory.getService("url:orderDetailAction.do?method=getProdOfferForCoopNum&belongCode="+(belongCode||"")+"&uimResInstId="+uimResInstId+"&cityCode="+Me.cityCode+"&prodOfferId="+prodOfferId);
};Me.getIfMultipleOffer=function(){if($ac$.selectedMainProdOfferInfoVO.bindType==2){return Me.uniqueId;}else{return"";}};Me.checkIfCoopNum=function(){var A=Me.$("uimId").value;var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","doCheckIfCoopNum",parameter);var resultJson=dojo.fromJson(resultJsonStr);return resultJson.resourceInfo;};Me.getSourceName=function(parameter){var dealerName=executeRequest("prodOfferSaleAjaxAction","getSourceName",parameter);
return dealerName;};Me.$("uimId").onblur=function(){try{Me.checkUim();var returnValue=Me.$("uimResInstId").value;var valueArray=returnValue.split(",");var uimList=dojo.query("[id=uimId]",dojo.query(".main-prodoffer-table")[0]);
dojo.forEach(uimList||[],function(oneUim){if(oneUim!=Me.$("uimId")&&valueArray[1]&&valueArray[1]!="-1"){oneUim.value=valueArray[1];oneUim.disabled=true;oneUim.onblur();}});Me.$("uimResInstId").value=valueArray[0];
if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var parameter="&objectType="+ConstantsPool.load("ResourceConst").ResourceConst.OBJECT_TYPE_NUMBER+"&resourceType="+ConstantsPool.load("ResourceConst").ResourceConst.RESOURCE_TYPE_SMART_CARD+"&objectId="+Me.$("uimId").value+"&cityCode="+Me.cityCode;
Me.$("sourceName").innerHTML=Me.getSourceName(parameter);}}catch(e){throw new Error("\u5361\u68c0\u6d4b\u5931\u8d25:"+e.message);}};Me.getUimBelongsInfo=function(){if(Me.$("uimId").value!=""&&Me.$("uimId").value!="9999"){var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};
var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;
parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var uimBelongsTo=jsonResultObj.allId.BELONGS_TO;$ac$.set("belongsTO_"+Me.uniqueId,uimBelongsTo);}}};Me.$("serviceId").onfocus=function(){try{Me.getPreselectPhoneNo();
}catch(e){throw new Error("\u9884\u9009\u53f7\u5904\u7406\u9519\u8bef:"+e.message);}};Me.getPreselectPhoneNo=function(){var prodOfferAcceptLoader=dojo.getObject("prodOfferAcceptLoader");var preAcceptFlag=prodOfferAcceptLoader.requestParam.preAcceptFlag;
var preselectPhoneNoSelected=prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected;if(preAcceptFlag!=1&&preselectPhoneNoSelected!=1){var identityKind=prodOfferAcceptLoader.requestParam.identityKind;
var identityCode=prodOfferAcceptLoader.requestParam.identityCode;if(!(identityKind&&identityCode)){return false;}var para="&identityKind="+identityKind+"&identityCode="+identityCode;var resultJsonStr=executeRequest("newCustRecognitionAction","getPreselectPhone",para);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected="1";var count=jsonResultObj.count;
if(count>0){if(confirm("\u662f\u5426\u9009\u62e9\u9884\u9009\u53f7\u7801\u4f5c\u4e3a\u65b0\u53f7\u7801")){Me.$("serviceId").value=jsonResultObj.serviceId;}}}}catch(e){messageBox.alert({busiCode:"08410213",infoList:[e.message]});
}}};Me.getPreselectPhoneNo();});
BusCard.define("/buscardapp/rela/js/bureauHandler.js",function(e,m){var g=this;var t=arguments[0];var s=arguments[1];var u=s.serviceRelation||this.serviceRelation||{};if(dojo.getObject("prodOfferAcceptLoader")!=null&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){u=prodOfferAcceptLoader.preAcceptOrderVO;
u.branchNo=u.bureauNo||"";}var r=s.belongCode||u.belongCode;var j=g.$("belongCode");var k=g.$("addrId");var n=g.$("addrDetail");var i=t.$remote("serviceParamBO");var l=g.$("bureauId");var d=g.$("branchNo");
var p=false;var f=dojo.require("orderaccept.prodofferaccept.util");var h=function(v,b){if(d){var c=i.getBureauId(5,v,b);if(c&&c.list){var w="&ServiceKind=0&apply_event=-1&infoId=66";var a=f.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+w);
var x=c.list;if(!!a&&a=="1"){x=dojo.filter(c.list,function(y){return y.id==v;});}t.$rs(d,x);}if(g.postBureauOrBranchNoChangeHandle){g.postBureauOrBranchNoChangeHandle();}}};if(j){g.renderDefaultValue({belongCode:r});
}var q=function(c){var B=g.$("cityCode");var x=s.cityCode;if(B){x=B.value;}if(!g.$("belongCode")&&c){var w=BusCard.$remote("commonRegionDAO","om");var y=w.getCommonRegionVO(parseInt(c+""));if(y.regionLevel>=5){c=y.upRegionId+"";
}}if(l){var A=i.getBureauId(4,c,x);if(A&&A.list){t.$rs(l,A.list);}l.onchange=function(){h(this.value,x);};if(u&&u.branchNo&&!p){var a=u.branchNo;var v="&ServiceKind=0&apply_event=-1&infoId=66";var C=f.ServiceFactory.getService("url:businessAcceptAction.do?method=getCityBusinessParamValue"+v);
if(!!C&&C=="1"){l.value=a;}else{var z=BusCard.$remote("mktResInterfaceBO").getUpIdByBureauId(x,a);l.value=(z||"").replace(/"/g,"");}BusCard.dispatchEvent(l,"change");d&&(d.value=a+"");p=true;}else{BusCard.dispatchEvent(l,"change");
}}else{if(d){if(u&&u.branchNo){var b=i.getBureauIdForChg(5,c,x);if(b&&b.list){t.$rs(g.$("branchNo"),b.list);}g.$("branchNo").value=u.branchNo+"";}}}};var o=function(){if(k){k.value="";}if(n){n.value="";
}};if(j){j.onchange=function(){q(this.value);if(!g.$("ifSpanBureau")||(g.$("ifSpanBureau").value&&g.$("ifSpanBureau").value>0)){o();}};BusCard.dispatchEvent(j,"change");}else{q(r);}BusCard.addEventListener(g.$("branchNo"),"change",function(){if(g.postBureauOrBranchNoChangeHandle){g.postBureauOrBranchNoChangeHandle();
}});});
BusCard.define("/buscardapp/rela/js/fixedSyncHandler.js",function(g,p){try{var o=this;var i="/129/addrDetail/change";var b="/129/addrId/change";var d="/129/bookBegDate/change";var n="/129/bookEndDate/change";
var c=/^(\d+)\-(\d+)\-(\d{2,2})$/;o.subscribe(i);o.subscribe(b);o.subscribe(d);o.subscribe(n);var m=o.$("addrDetail"),f=o.$("addrId"),h=o.$("installBegTime"),a=o.$("installEndTime");o.on(m,"blur",function(){o.publish(i,this.value);
});o.on(f,"blur",function(){o.publish(b,this.value);});var l=function(t){if(h&&a&&c.test(h.value)&&c.test(a.value)){var e=new Date();var r=new Date();var s=h.value.split("-");e.setFullYear(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10));
s=a.value.split("-");r.setFullYear(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10));if(e>r){alert("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4");t.value="";t.focus();
return false;}}return true;};var k=function(s){if(c.test(s.value)){var t=new Date(),e=new Date();var r=s.value.split("-");e.setFullYear(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10));if(e<t){alert("\u5f00\u59cb\u65f6\u95f4\u6216\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4");
s.value="";s.focus();return false;}}};o.on(h,"propertychange",function(){var e=event||window.event;if(e.propertyName=="value"&&c.test(this.value)){if(k(this)==false){return false;}if(l(this)==false){return false;
}o.publish(d,this.value);}});o.on(a,"propertychange",function(){var e=event||window.event;if(e.propertyName=="value"&&c.test(this.value)){if(k(this)==false){return false;}if(l(this)==false){return false;
}o.publish(n,this.value);}});o.receive=function(e){var s=e.path;var r=e.data;if(s==i){if(!m.value){m.value=r;}}else{if(s==b){if(!f.value){f.value=r;}}else{if(s==d){if(!h.value){h.value=r;}}else{if(s==n){if(!a.value){a.value=r;
}}}}}};if(!!m){var q=o.getCardRelationInfo();if(!!q){if(q.userId>0&&!!q.addrDetail){m.value=q.addrDetail;m.onblur();}}}}catch(j){alert(j.message);}});
BusCard.define("/buscardapp/rela/js/card_129_100162301.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.controlServiceId=function(){g.$("link_serviceId").style.visibility="hidden";g.$("serviceId").readOnly=false;
};g.controlServiceId();});
BusCard.define("/buscardapp/rela/js/extraInfo.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;var unicoder={KEY_NOT_BLANK:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd"};
if(!!Me.$("serviceGroupId")){Me.$("serviceGroupId").onquery=function(){var checkbox=this,_card=arguments[0],_buscard=arguments[1],_p=arguments[2];var value=_buscard.util.trim(this.value);if(!value){alert("\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd");
this.focus();return false;}var data={productId:_p.productId,name:value,fieldId:this.getAttribute("fieldId")};var jsonData=BusCard.util.native2ascii(_buscard.toJson(data));var requestParam={jsonData:jsonData,method:"query"};
return _buscard.util.doGet(_buscard.path.initPath,requestParam);};}if(!!Me.$("groupId")){Me.$("groupId").onquery=function(){var checkbox=this,_card=arguments[0],_buscard=arguments[1],_p=arguments[2];_data=arguments[3];
var value=_buscard.util.trim(this.value);if(Me.$("groupName").value==""&&Me.$("groupMarker").value==""){alert("[\u96c6\u56e2\u540d\u79f0]\u548c[\u96c6\u56e2\u6807\u8bc6]\u81f3\u5c11\u8f93\u5165\u4e00\u9879!");
Me.$("groupName").focus();return;}var data={groupName:_data.groupName,groupMarker:_data.groupMarker,cityCode:b.cityCode,fieldId:this.getAttribute("fieldId")};var jsonData=BusCard.util.native2ascii(_buscard.toJson(data));
var requestParam={jsonData:jsonData,method:"query"};return _buscard.util.doGet(_buscard.path.initPath,requestParam);};Me.$("groupId").onchange=function(){var cityCode=b.cityCode;var productId=b.productId;
var name=Me.$("groupId").options[Me.$("groupId").selectedIndex].innerHTML;var C="cityCode="+cityCode+"&productId="+productId+"&name="+BusCard.util.native2ascii(name);var resultJsonStr=executeRequest("orderDetailAction","getUserRoleParam",C);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){serviceGroupName=jsonResultObj.serviceGroupName;if(serviceGroupName!=null){Me.$("serviceGroupId").value=serviceGroupName;
}}}catch(e){return false;}};}});
BusCard.define("/buscardapp/rela/js/getStandardAddr.js",function(g,q){var p=this;var c=dojo.require("orderaccept.common.dialog.MessageBox");var i=dojo.require("orderaccept.prodofferaccept.util");p.needResourceComfirm=false;
var o=arguments[0];var m=arguments[1];if(p.$("addrId")){p.$("addrId").disabled=true;}p.belongCode="";if(!p.belongCode&&p.getCardRelationInfo().serviceRelation){p.belongCode=p.getCardRelationInfo().serviceRelation.belongCode;
}p.cityCode=m.cityCode;p.getStandardAddr=function(){GetSwitchForAddr.initSwitch(p.cityCode);var v=null;var b=$ac$.get("_switch8090_");if(!!b&&b==1){v=new StandardAddMultipleInterface({"$":function(w){return p.$(w);
},uniqueId:q.uniqueId});}else{v=new StandardAddInterface({"$":function(w){return p.$(w);},uniqueId:q.uniqueId});}var u={StandardAddInterface:v};var t=BusCard.$session.container2;var s=BusCard.$session.workNo;
var a=BusCard.$session.PASSWORD;var r=BusCard.$session.areaCode;if(!p.belongCode){p.belongCode=m.serviceRelation.belongCode;}var e=t+"resource/interfacemanage/standardadd/StandardAddrQuery.jsp?STAFFNO="+s+"&PASSWORD="+a+"&workNo="+s+"&regionno="+r+"&cityCode="+p.cityCode+"&areaCode="+p.belongCode+"&productId="+p.productId;
p.windowResourceStardardAddress=window.showModalDialog(e,u,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no");};if(p.$("link_addrId")){p.$("link_addrId").onclick=function(){var a=p.$("belongCode");
if(a){var r=p.$("cityCode");if(r){p.cityCode=r.value;}p.belongCode=a.value;}else{p.belongCode=p.belongCode||m.belongCode;}if(!p.$("belongCode")&&p.belongCode){var e=BusCard.$remote("commonRegionDAO","om");
var b=e.getCommonRegionVO(parseInt(p.belongCode+""));if(b.regionLevel>=5){p.belongCode=b.upRegionId+"";}}p.getStandardAddr();};}try{void function(){var s=m.serviceRelation||this.serviceRelation;if(!s&&!!m&&!!m.userId&&m.userId!=0&&m.userId!="0"){s=BusCard.jsonPath($ac$.get("userHasProdOfferInfoList"),"$[*].prodInstList[?(@.prodInstId=="+m.userId+")]")[0].serviceRelationVO;
}if(s){var e=s.addrDetail;var b=s.addressId;var a=p.$("addrId");if(e&&p.$("addrDetail")){p.$("addrDetail").value=e;}if(b&&/^(\d+)$/.test(b.toString())){if(a){a.rvalue=b;}var r=o.$remote("mktGetAddressNameDAO").getAddressNameById(s.cityCode,b);
if(r){r=r.replace(/"/g,"");}if(r!="null"&&r&&a&&r!='""'){a.value=r;}}}}();}catch(k){alert(k.message);}if(p.$("addrDetail")){p.$("addrDetail").onmouseover=function(){p.$("addrDetail").title=p.$("addrDetail").value;
};}if(p.$("addrId")){p.$("addrId").onmouseover=function(){p.$("addrId").title=p.$("addrId").value;};}var n=i.DomHelper.getParentWidget(p.dom,"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");
var l=m.serviceRelation||this.serviceRelation||{};var d="orderaccept.prodofferaccept.loader.ProductChangeAcceptLoader";var j=BusCard.$remote("mktGetAddressNameDAO");var f=p.$("addrId");var h=dojo.getObject("prodOfferAcceptLoader");
if(!!h&&h.declaredClass==d){p.$("addrId").disabled=false;BusCard.addEventListener(p.$("addrId"),"propertychange",function(){var b=f.rvalue;if(!!l&&!!l.addressId){var a=l.addressId;var e=l.cityCode;var v=l.addrDetail;
if(b!=a){if(p.$("ifSpanBureau")){var w=p.$("ifSpanBureau").value;if(w=="0"){var r=j.getAddressNameById(e,a).replace(/"/g,"");f.rvalue=a;f.value=r;!!v?setTimeout(function(){p.$("addrDetail").value=v;},500):null;
var s=!!n&&!!n.attrCardWidget?n.attrCardWidget:null;if(!!s){var u=!!s?s.prodInstVO:null;var t=null;if(!!u){t=u.prodInstAttrList.find(function(x){return dojo.some(i.SpeedAttrArray||[],function(y){return x.attrId==y;
});});}!!t&&!!s.busCardInstance.$(t.attrId+"")?s.busCardInstance.$(t.attrId+"").value=t.attrValue:null;}c.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"[\u4e0d\u79fb\u673a]\u4e0d\u5141\u8bb8\u53d8\u66f4\u6807\u51c6\u5730\u5740"});
}}}}});}});
BusCard.define("/buscardapp/rela/js/getStandardAddrForTest.js",function(f,p){var o=this;o.needResourceComfirm=true;var h=dojo.require("orderaccept.prodofferaccept.util");var n=arguments[0];var l=arguments[1];
if(o.$("addrId")){o.$("addrId").disabled=true;}o.belongCode="";if(!o.belongCode&&o.getCardRelationInfo().serviceRelation){o.belongCode=o.getCardRelationInfo().serviceRelation.belongCode;}o.cityCode=l.cityCode;
o.getStandardAddr=function(){GetSwitchForAddr.initSwitch(o.cityCode);var a=$ac$.get("_switch8090_");if(!!a&&a==1){o.getResourceConfirmForTest();}else{o.getStandardAdd();}};o.doCheckBeforeConfirmTest=function(){var t=null;
if(!!window.prodOfferAcceptLoader){var a=[];if((!!$ac$.get("_switch8091_"))&&$ac$.get("_switch8091_")==0){var w=g.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId];var r=w.attrCardWidget.busCardInstance;
if(!!r.$(h.SpecAttrCdConst.portSpeedAttrCd)&&r.$(h.SpecAttrCdConst.portSpeedAttrCd).value==""){var q=dojo.query(".main-product-basic",g.mainProdOfferWidget.domNode);var e=dojo.filter(q||[],function(x){return dojo.attr(x,"uniqueId")==w.cardParam.uniqueId;
})[0];var u=dojo.attr(e,"viewId");var s=dojo.query(".serviceId-"+u,e)[0].value;a.push(s);}}else{var b=g.serviceCardWidgetMap;for(var v in b){if(!b.hasOwnProperty(v)){continue;}if(b[v].cardParam.serviceOfferId==301||b[v].cardParam.serviceOfferId==93){var r=b[v].attrCardWidget.busCardInstance;
if(!!r.$(h.SpecAttrCdConst.portSpeedAttrCd)&&r.$(h.SpecAttrCdConst.portSpeedAttrCd).value==""){var q=dojo.query(".main-product-basic",g.mainProdOfferWidget.domNode);var e=dojo.filter(q||[],function(x){return dojo.attr(x,"uniqueId")==b[v].cardParam.uniqueId;
})[0];var u=dojo.attr(e,"viewId");var s=dojo.query(".serviceId-"+u,e)[0].value;a.push(s);}}}}if(a.length>0){t=a.join(",");}}if(t==null){return false;}else{orderaccept.common.dialog.MessageBox.alert({message:"["+t+"]\u6ca1\u6709\u9009\u62e9\u901f\u7387\uff0c\u8bf7\u9009\u62e9!"});
return true;}return false;};o.getResourceConfirmForTest=function(){if(o.doCheckBeforeConfirmTest()){return;}var q=executeRequest("prodOfferSaleAjaxAction","getStandardAddrRelURL","");q=q+"&speedRate=0M";
q=q+"&prodSpecId="+p.productId;var t={resConfirmURL:q};var e=window.showModalDialog(BusCard.path.contextPath+"/orderaccept/prodofferaccept/view/ResourceConfirm.jsp",t,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no;resizable:yes");
if(e!=null){var s=e.validateresult;var w=e.addressName;var b=e.addressId;var x=e.Modeshowname;var v=e.Connmodechoose;var a=e.Modeshowid;var u=e.siteofficename;if(s==""){alert("\u8fd4\u56de\u7684\u8d44\u6e90\u6807\u8bc6\u4e3a\u7a7a\uff0c\u8bf7\u786e\u8ba4");
return false;}var r="cityCode="+o.cityCode;var y=executeRequest("prodOfferSaleAjaxAction","getSwitchUseResourceConfirm8092",r);if(s==0||s=="0"){alert("\u5bf9\u5e94\u4ea7\u54c1\u7f16\u7801\u3010"+p.productId+"\u3011\u6ca1\u6709\u8d44\u6e90\u4fe1\u606f\u3002");
if((!!y)&&y==1){return false;}else{if(u==""||u=="null"||u==null){alert("\u8fd4\u56de\u4ea4\u6362\u5c40id\u4e3a"+u+",\u8d44\u6e90\u786e\u8ba4\u5931\u8d25");return false;}o.setAllProductServiceInfo(w,b,u,v);
}}else{if(u==""||u=="null"||u==null){alert("\u8fd4\u56de\u4ea4\u6362\u5c40id\u4e3a"+u+",\u8d44\u6e90\u786e\u8ba4\u5931\u8d25");return false;}o.setAllProductServiceInfo(w,b,u,v);}}};o.setAllProductServiceInfo=function(t,a,r,s){if(window.prodOfferAcceptLoader){var b=g.serviceCardWidgetMap;
var v=b["serviceCardWidget_"+p.uniqueId];if(v.busCardInstance.$("addrId")){v.busCardInstance.$("addrId").value=t;v.busCardInstance.$("addrId").rvalue=a;}if(v.busCardInstance.$("addrDetail")){v.busCardInstance.$("addrDetail").value=t;
}if(v.attrCardWidget&&v.attrCardWidget.busCardInstance){var q=v.attrCardWidget.busCardInstance;if(q.$("60056")){q.$("60056").value=r;}if(q.$("100542")){q.$("100542").value=s;}}var e="orderaccept.prodofferaccept.loader.ProductChangeAcceptLoader";
var u=dojo.getObject("prodOfferAcceptLoader");if(!!u&&u.declaredClass==e){if(o.doMoveSpecialHandler){o.doMoveSpecialHandler();}}}else{if(o.$("addrId")){o.$("addrId").value=t;o.$("addrId").rvalue=a;}if(o.$("addrDetail")){o.$("addrDetail").value=t;
}BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(w){if(w.id=="60056"){w.value=r;}});BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(w){if(w.id=="100542"){w.value=s;
}});if(o.doMoveSpecialHandler){o.doMoveSpecialHandler();}}};o.doCheckBeforeConfirm=function(){var t=null;if(!!window.prodOfferAcceptLoader){var a=[];var b=g.serviceCardWidgetMap;for(var v in b){if(!b.hasOwnProperty(v)){continue;
}if(b[v].cardParam.serviceOfferId==301){var r=b[v].attrCardWidget.busCardInstance;if(!!r.$(h.SpecAttrCdConst.portSpeedAttrCd)&&r.$(h.SpecAttrCdConst.portSpeedAttrCd).value==""){var q=dojo.query(".main-product-basic",g.mainProdOfferWidget.domNode);
var e=dojo.filter(q||[],function(w){return dojo.attr(w,"uniqueId")==b[v].cardParam.uniqueId;})[0];var u=dojo.attr(e,"viewId");var s=dojo.query(".serviceId-"+u,e)[0].value;a.push(s);}}}if(a.length>0){t=a.join(",");
}}if(t==null){return false;}else{orderaccept.common.dialog.MessageBox.alert({message:t+"????????????????!"});return true;}return false;};o.getResourceConfirm=function(){if(o.doCheckBeforeConfirm()){return;
}var q="http://136.96.9.222:8080/integration/addressqueryFinal.jsp?basecode=20090710231205123&authcode=7F5E767B5D5006CD";q=q+"&prodInfo="+o.getProdInfo();q=q+"&regioncode="+BusCard.$session.areaId;var s={resConfirmURL:q};
var e=window.showModalDialog(BusCard.path.contextPath+"/orderaccept/prodofferaccept/view/ResourceConfirm.jsp",s,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no;resizable:yes");if(e!=null){var r=e.validateresult;
var b=e.addressname;var u=e.addressId;var v=e.packageinfo;var t=e.siteofficename;if(r==""){orderaccept.common.dialog.MessageBox.alert({message:"????????????????????!"});return false;}if(r==0||r=="0"){orderaccept.common.dialog.MessageBox.alert({message:"?????????!"});
return false;}else{var a={addrDetail:b,addrId:u,packageinfo:v,siteofficename:t};var w=new ResourceConfirmInterface({"$":function(x){return o.$(x);}});w.setReturnValue(a);doMoveSpecialHandler();}}};o.getStandardAdd=function(){var u=null;
var b=$ac$.get("_switch8090_");if(!!b&&b==1){u=new StandardAddMultipleInterface({"$":function(v){return o.$(v);}});}else{u=new StandardAddInterface({"$":function(v){return o.$(v);}});}var t={StandardAddInterface:u};
var s=BusCard.$session.container2;var r=BusCard.$session.workNo;var a=BusCard.$session.PASSWORD;var q=BusCard.$session.areaCode;if(!o.belongCode){o.belongCode=l.serviceRelation.belongCode;}var e=s+"resource/interfacemanage/standardadd/StandardAddrQuery.jsp?STAFFNO="+r+"&PASSWORD="+a+"&workNo="+r+"&regionno="+q+"&cityCode="+o.cityCode+"&areaCode="+o.belongCode+"&productId="+o.productId;
o.windowResourceStardardAddress=window.showModalDialog(e,t,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no");};o.getProdInfo=function(){var s=[];if(!!window.prodOfferAcceptLoader){var q=g.serviceCardWidgetMap;
var b=$ac$.get("_switch8091_");if(!!b&&b==0){var a=q["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance;var r=!!a.$(h.SpecAttrCdConst.portSpeedAttrCd)?a.$(h.SpecAttrCdConst.portSpeedAttrCd).value:"";
s.push({productId:p.productId,rate:r,uniqueId:p.uniqueId});}else{for(var e in q){if(!q.hasOwnProperty(e)){continue;}if(q[e].busCardInstance.needResourceComfirm===false){continue;}if(q[e].cardParam.serviceOfferId==301){if(q[e].busCardInstance.$("link_addrId")){var t=q[e].cardParam;
var a=q[e].attrCardWidget.busCardInstance;var r=!!a.$(h.SpecAttrCdConst.portSpeedAttrCd)?a.$(h.SpecAttrCdConst.portSpeedAttrCd).value:"";s.push({productId:t.productId,rate:r,uniqueId:t.uniqueId});}}}}return BusCard.toJson(s).replace(/\"/g,"'");
}else{var s=[];var r=!!o.$(h.SpecAttrCdConst.portSpeedAttrCd)?o.$(h.SpecAttrCdConst.portSpeedAttrCd).value:"";s.push({productId:o.productId,rate:r,uniqueId:0});return BusCard.toJson(s).replace(/\"/g,"'");
}};if(o.$("link_addrId")){o.$("link_addrId").onclick=function(){var a=o.$("belongCode");if(a){var q=o.$("cityCode");if(q){o.cityCode=q.value;}o.belongCode=a.value;}else{o.belongCode=o.belongCode||l.belongCode;
}if(!o.$("belongCode")&&o.belongCode){var e=BusCard.$remote("commonRegionDAO","om");var b=e.getCommonRegionVO(parseInt(o.belongCode+""));if(b.regionLevel>=5){o.belongCode=b.upRegionId+"";}}o.getStandardAddr();
};}try{void function(){if((!!$ac$.get("orderChangeFlag"))&&$ac$.get("orderChangeFlag")==1){return;}var r=l.serviceRelation||this.serviceRelation;if(!r&&!!l&&!!l.userId&&l.userId!=0&&l.userId!="0"){r=BusCard.jsonPath($ac$.get("userHasProdOfferInfoList"),"$[*].prodInstList[?(@.prodInstId=="+l.userId+")]")[0].serviceRelationVO;
}if(r){var e=r.addrDetail;var b=r.addressId;var a=o.$("addrId");if(e&&o.$("addrDetail")){o.$("addrDetail").value=e;}if(b&&/^(\d+)$/.test(b.toString())){if(a){a.rvalue=b;}var q=n.$remote("mktGetAddressNameDAO").getAddressNameById(r.cityCode,b);
if(q){q=q.replace(/"/g,"");}if(q!="null"&&q&&a&&q!='""'){a.value=q;}}}}();}catch(j){alert(j.message);}if(o.$("addrDetail")){o.$("addrDetail").onmouseover=function(){o.$("addrDetail").title=o.$("addrDetail").value;
};}if(o.$("addrId")){o.$("addrId").onmouseover=function(){o.$("addrId").title=o.$("addrId").value;};}var m=h.DomHelper.getParentWidget(o.dom,"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");
var k=l.serviceRelation||this.serviceRelation||{};var c="orderaccept.prodofferaccept.loader.ProductChangeAcceptLoader";var i=BusCard.$remote("mktGetAddressNameDAO");var d=o.$("addrId");var g=dojo.getObject("prodOfferAcceptLoader");
if(!!g&&g.declaredClass==c){BusCard.addEventListener(o.$("addrId"),"propertychange",function(){if(!o.$("ifSpanBureau")||o.$("ifSpanBureau").disabled==true){return false;}var b=d.rvalue;if(!!k&&!!k.addressId){var a=k.addressId;
var e=k.cityCode;var u=k.addrDetail;if(b!=a){if(o.$("ifSpanBureau")){var v=o.$("ifSpanBureau").value;if(v=="0"){var q=i.getAddressNameById(e,a).replace(/"/g,"");d.rvalue=a;d.value=q;!!u?setTimeout(function(){o.$("addrDetail").value=u;
},500):null;var r=!!m&&!!m.attrCardWidget?m.attrCardWidget:null;if(!!r){var t=!!r?r.prodInstVO:null;var s=null;if(!!t){s=t.prodInstAttrList.find(function(w){return w.attrId=="100081";});}!!s?r.busCardInstance.$("100081").value=s.attrValue:null;
}MessageBox.alert({title:"\u63d0\u793a\u4fe1\u606f",message:"[\u4e0d\u79fb\u673a]\u4e0d\u5141\u8bb8\u53d8\u66f4\u6807\u51c6\u5730\u5740"});}}}}});}});
BusCard.define("/buscardapp/rela/js/checkPassword.js",function(f,e){var g=this;var d=arguments[0];var c=arguments[1];g.checkPassword=function(){var b=window.event;if(b){b=b.srcElement;}if(b&&b.value!=""&&b.value.length<6){alert("\u5bc6\u7801\u5fc5\u987b\u662f6\u4f4d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");
b.value="";b.focus();return false;}if(b&&b.value){jsCommon.checkEasyPassword(b);}var i="passwordConfirm";if(isValid(b)){i=b.name;}var a=g.$("password");var h=g.$("passwordConfirm");if(a&&h&&a.value!=""&&h.value!=""&&a.value!=h.value){alert("\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");
h.value="";h.focus();return false;}return true;};g.checkPassword2=function(){var b=window.event;if(b){b=b.srcElement;}var i="passwordConfirm";if(isValid(b)){i=b.name;}var a=g.$("password");var h=g.$("passwordConfirm");
if(a&&h&&a.value!=""&&h.value!=""&&a.value!=h.value){alert("\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");h.value="";h.focus();return false;}return true;};g.$("password").onblur=function(){var a="";
if(!!window.prodOfferAcceptLoader){a=g.$("serviceId").value||"";}else{a=c.serviceRelation.serviceId;}g.easyPwdCheck(a);};g.$("passwordConfirm").onblur=function(){g.checkPassword2();};g.easyPwdCheck=function(h){var b=g.$("password");
if(b.value!=""){WeakPwdCheck.weakPwdCheck(b,h);var a=g.$("password");var i=g.$("passwordConfirm");if(a&&i&&a.value!=""&&i.value!=""&&a.value!=i.value){alert("\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");
i.value="";i.focus();return false;}}};});
BusCard.define("/buscardapp/rela/js/getPSTNNumberAndRes.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.productId=b.productId;
Me.serviceOfferId=b.serviceOfferId;Me.uniqueId=b.uniqueId;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");void function(){if(!Me.postBureauOrBranchNoChangeHandleList){Me.postBureauOrBranchNoChangeHandleList=[];
}Me.postBureauOrBranchNoChangeHandleList.push(function(){var serviceIdElem=Me.$("serviceId");var resInstIdElem=Me.$("resInstId");serviceIdElem&&(serviceIdElem.value="");resInstIdElem&&(resInstIdElem.value="");
});Me.postBureauOrBranchNoChangeHandle=function(){var handleList=Me.postBureauOrBranchNoChangeHandleList||[];var length=handleList.length;for(var bindex=0;bindex<length;bindex++){try{handleList[bindex].apply(Me);
}catch(e){}}};}();Me.addPreDataBuilderAspect(function(ignoreCheck){if(window.prodOfferAcceptLoader!=null){dojo.require("orderaccept.prodofferaccept.util");if(Me.serviceOfferId==prodOfferAcceptLoader.getServiceOfferConfigVO(orderaccept.prodofferaccept.util.ACTION_CD_CONST.PRODUCT_INSTALL).serviceOfferId){if(!!ignoreCheck){return true;
}var resInstNode=Me.$("resInstId");var serviceIdNode=Me.$("serviceId");if(resInstNode&&resInstNode.value==""&&serviceIdNode&&serviceIdNode.value!=""){messageBox.alert({message:"\u53f7\u7801"+Me.$("serviceId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u53f7\u7801\u7684\u6570\u636e\u4fe1\u606f"});
return false;}}else{return true;}}else{return true;}});Me.getBureauId=function(){var node=Me.$("bureauId");return node&&node.value||b.serviceRelation&&b.serviceRelation.bureauId||"";};Me.getbranchNo=function(){var node=Me.$("branchNo");
return node&&node.value||b.serviceRelation&&b.serviceRelation.branchNo||"";};Me.getSwitchno=function(){if(!!dojo.getObject("prodOfferAcceptLoader")&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance){var targetAttr=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance.$("60056");
if(!!targetAttr){return targetAttr.value;}return"";}else{var switchno="";BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(node){if(node.id=="60056"){switchno=node.value;
}});if(switchno==""&&!!b.serviceRelation){var list=a.$remote("prodInstCommFacadeBO").getProdInstAttrByProperties({prodInstId:b.serviceRelation.userId,cityCode:b.cityCode,attrId:"60056",stateCd:"109999"});
if(list&&list.length>0){switchno=list[0].attrValue;}}if(switchno==""&&!!Me.$("switchNo")){switchno=Me.$("switchNo").value;}if(dojo.getObject("prodOfferAcceptLoader")!=null&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){var preAcceptOrderVO=prodOfferAcceptLoader.preAcceptOrderVO;
switchno=preAcceptOrderVO.switchno;}return switchno;}};if(Me.$("lanId")){Me.cityCode=Me.$("lanId").value;}else{Me.cityCode=b.cityCode;}Me.getChooseNumber=function(){var productId=Me.productId;var parameter="productId="+productId;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;
}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}if(result=="-1"){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._pstn_number_elem_list_;}catch(e){}var B={ServiceIdInterface:new ServiceIdInterface({"$":function(id){return Me.$(id);
}}),cdmaServiceIdElemList:cdmaServiceIdElemList,bureauId:Me.getBureauId(),branchNo:Me.getbranchNo()};var container2=BusCard.$session.container2;var workNo=BusCard.$session.workNo;var endpassword=BusCard.$session.PASSWORD;
var noDept=BusCard.$session.acceptDealer;if(Me.$("lanId")){Me.cityCode=Me.$("lanId").value;}else{Me.cityCode=b.cityCode;}var webPath=container2+"resource/interfacemanage/selectno/SelectNoMain.jsp?STAFFNO="+workNo+"&PASSWORD="+endpassword+"&noDept="+noDept+"&cityCode="+Me.cityCode+"&productId="+Me.productId+"&sortId=2&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo()+"&switchNo="+Me.getSwitchno();
Me.windowResourceServiceId=window.showModalDialog(webPath,B,"DialogWidth:1000px;DialogHeight:600px;status:no;location:no");}else{var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.onblur();
oServiceId.readOnly=true;}};Me.checkResource=function(){var E=Me.$("serviceId");var A=Me.$("serviceId").value;if(!A){return true;}if(Me.serviceOfferId==9){var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo()+"&cityCode="+Me.cityCode+"&switchOfficeId="+Me.getSwitchno();
}else{var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&bureauId="+Me.getBureauId()+"&branchNo="+Me.getbranchNo()+"&cityCode="+Me.cityCode+"&switchOfficeId="+Me.getSwitchno();
}if(!!dojo.getObject("prodOfferAcceptLoader")&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){if(!!prodOfferAcceptLoader.preAcceptOrderVO.serviceId&&prodOfferAcceptLoader.preAcceptOrderVO.serviceId==A){C+="&ignoreCheck=1";
}}var D=executeRequest("prodOfferSaleAjaxAction","checkResource",C);var B=executeAjaxResult(D);if(B==false){Me.resetServiceId();return;}B=B.split("&");if(B[1]){if(B[1]!="false"){alert(B[1]);}}if(!!B[2]){if(B[2]==1){var tips="\u6df7\u5408\u653e\u53f7\u7528\u6237\u4e0d\u53ef\u4ee5\u52a0\u5165vpn,ivpn";
orderaccept.common.dialog.MessageBox.alert({message:tips});}if(Me.$("ifFixedNo")){Me.$("ifFixedNo").value=B[2];}}Me.$("resInstId").value=B[0];};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;
if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var pstnServiceIdElemList=null;try{pstnServiceIdElemList=ordermgr.accept.compnew._pstn_number_elem_list_;}catch(e){}var chooseServiceId=Me.$("serviceId").value;
if(pstnServiceIdElemList){var len=pstnServiceIdElemList.length;var count=0;while(len--){var current=pstnServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");
Me.$("serviceId").value="";Me.$("resInstId").value="";}}};Me.resetServiceId=function(){Me.$("serviceId").value="";};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onblur=function(){Me.checkResource();
};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();};BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._pstn_number_elem_list_=ordermgr.accept.compnew._pstn_number_elem_list_||[];
var serviceObj={};serviceObj.service=Me.$("serviceId");serviceObj.productId=Me.productId;ordermgr.accept.compnew._pstn_number_elem_list_.push(serviceObj);}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/getCDMANumberAndRes.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.productId=b.productId;
Me.cityCode=b.cityCode;Me.serviceOfferId=b.serviceOfferId;Me.uniqueId=b.uniqueId;var messageBox=dojo.require("orderaccept.common.dialog.MessageBox");Me.addPreDataBuilderAspect(function(ignoreCheck){if(window.prodOfferAcceptLoader!=null){dojo.require("orderaccept.prodofferaccept.util");
if(Me.serviceOfferId==prodOfferAcceptLoader.getServiceOfferConfigVO(orderaccept.prodofferaccept.util.ACTION_CD_CONST.PRODUCT_INSTALL).serviceOfferId){if(!!ignoreCheck){return true;}var resInstNode=Me.$("resInstId");
var serviceIdNode=Me.$("serviceId");if(resInstNode&&resInstNode.value==""&&serviceIdNode&&serviceIdNode.value!=""){messageBox.alert({message:"\u53f7\u7801"+Me.$("serviceId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u53f7\u7801\u7684\u6570\u636e\u4fe1\u606f"});
return false;}var serviceKindList=BusCard.$remote("productToServiceDAO").query({productId:Me.productId});if(serviceKindList&&serviceKindList.length>0){if(serviceKindList[0].netType!=70){var uimIdNode=Me.$("uimId");
var uimResInstNode=Me.$("uimResInstId");if(uimResInstNode&&uimResInstNode.value==""&&uimIdNode&&uimIdNode.value!=""){messageBox.alert({message:"\u5361\u53f7"+Me.$("uimId").value+"\u8d44\u6e90\u5b9e\u4f8b\u4e0d\u5b58\u5728,\u8bf7\u6838\u67e5\u9009\u62e9\u5361\u53f7\u7684\u6570\u636e\u4fe1\u606f"});
return false;}}else{return true;}}}else{return true;}}else{return true;}});Me.dealOldAgentSourceId=function(){var queryInfoObj={UIM_KIND:"0",BELONGS_TO:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);
var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){uimDealer=jsonResultObj.allId.BELONGS_TO;
$("sourceId").value=jsonResultObj.allId.BELONGS_TO;}};Me.checkIfBigGroup=function(){var prodOfferVO=$ac$.selectedMainProdOfferInfoVO;var feeType=prodOfferVO.feeType;if(feeType=1200){$("paymentModeCd").value=1200;
$("paymentModeCd").disabled="true";}else{messageBox.alert({busiCode:"08410212"});Me.$("uimId").value="";$("paymentModeCd").disabled=false;return false;}};Me.setProdOfferProperties=function(){var resultJsonStr=null;
try{var queryInfoObj={BIND_MOBILE_NO:"0",BIND_SUGGEST_PRICE:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("uimId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;
parameter+="&mktResType=2";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var mainProdOfferDetailWidget=null;if(!!$ac$&&(!!$ac$.selectedMainProdOfferInfoVO)&&(!!$ac$.selectedMainProdOfferInfoVO.bindType)&&($ac$.selectedMainProdOfferInfoVO.bindType==2)){var loader=dojo.getObject("prodOfferAcceptLoader");
var providerMap=loader.multipleSubProdOfferHandler.subProdOfferOrderProviderMap;mainProdOfferDetailWidget=providerMap["subProdOfferTreeContainer"+Me.uniqueId].prodOfferInfoWidget.mainProdOfferDetailWidget;
}else{if(dojo.getObject("prodOfferAcceptLoader.mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance")){mainProdOfferDetailWidget=prodOfferAcceptLoader.mainProdOfferDetailWidget;}}var phonePrice=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300014");
if(phonePrice){phonePrice.value=jsonResultObj.allId.BIND_SUGGEST_PRICE;phonePrice.style.display="none";phonePrice.parentNode.previousSibling.style.display="none";}var phoneNumber=mainProdOfferDetailWidget.prodOfferAttrCard.busCardInstance.$("300013");
if(phoneNumber){phoneNumber.value=jsonResultObj.allId.BIND_MOBILE_NO;}}}catch(e){throw new Error("\u83b7\u53d6\u9ed1\u8393\u4fe1\u606f\u9519\u8bef:"+resultJsonStr);}};Me.ifCanHeiMei=function(){var resultJsonStr=null;
try{var prodOfferInfoVO={};if($ac$){var prodOfferList=$ac$.get("prodOfferList"+Me.uniqueId);if(!prodOfferList){prodOfferList=$ac$.get("prodOfferList");}prodOfferInfoVO=BusCard.find(prodOfferList||[],function(vo){return vo.prodOfferType==1;
})||{};}if(prodOfferInfoVO){var resRelaList=prodOfferInfoVO.resRelaList;if(!resRelaList||!resRelaList.length){return false;}var resIdList=[];for(var i=0;i<resRelaList.length;i++){resIdList.push(resRelaList[i].resourceKind);
}var resId=resIdList.join("^");if(resId==""){resId="-1";}if(resId!="-1"){var validInfoObj={checkBlackberry:resId};var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+Me.$("uimId").value;
parameter+="&serviceOfferId="+Me.serviceOfferId;parameter+="&mktResType=2";parameter+="&productId="+Me.productId;parameter+="&validJsonInfo="+validJsonInfo;resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getValidResourceInfo",parameter);
var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag){if(jsonResultObj.flag=="-1"){messageBox.alert({busiCode:"08410213",infoList:[jsonResultObj.message]});
Me.$("uimId").value="";return false;}if(jsonResultObj.flag=="99"){dojo.global.$appContext$.set("checkBlackberry","99");Me.checkIfBigGroup();Me.setProdOfferProperties();}}}}}catch(e){throw new Error("\u9ed1\u8393\u68c0\u6d4b\u9519\u8bef:"+e.message);
}};Me.checkIfVirtual=function(){var queryInfoObj={IF_VIRTUAL:"0"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var parameter="mktResId="+Me.$("serviceId").value;parameter+="&serviceOfferId="+Me.serviceOfferId;
parameter+="&mktResType=1";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",parameter);
var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){if(jsonResultObj.allId.IF_VIRTUAL=="1"){if(_buscard.$("100690")){_buscard.$("100690").value=1;
_buscard.$("100690").checked=true;}Me.$("uimId").value="9999";Me.$("uimId").disabled=true;}else{if(_buscard.$("100690")){_buscard.$("100690").value=0;_buscard.$("100690").checked=false;}}}};Me.cardTypeFillValue=function(){var queryInfoObj={IF_GC_CARD:"0"};
var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var param="mktResType=2&mktResId="+Me.$("uimId").value+"&productId="+Me.productId+"&serviceOfferId="+Me.serviceOfferId+"&queryJsonInfo="+queryJsonInfo;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getQueryResourceInfo",param);var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance){var targetAttr=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+Me.uniqueId].attrCardWidget.busCardInstance.$("300001");
if(!!targetAttr){if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){targetAttr.value=jsonResultObj.allId.IF_GC_CARD;}else{targetAttr.value="";}}}};Me.checkResource=function(){var E=Me.$("serviceId");
var A=Me.$("serviceId").value;if(!A){return true;}var C="serviceId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode;if(!!dojo.getObject("prodOfferAcceptLoader")&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.PreAcceptOrderLoader"){if(!!prodOfferAcceptLoader.preAcceptOrderVO.serviceId&&prodOfferAcceptLoader.preAcceptOrderVO.serviceId==A){C+="&ignoreCheck=1";
}}var D=executeRequest("prodOfferSaleAjaxAction","checkResourceDealerInfo",C);var B=executeAjaxResult(D);if(B==false){Me.resetServiceId();if(Me.$("uimId").disabled==true){Me.$("uimId").value="";Me.$("uimId").disabled=false;
}return;}B=B.split("&");if(B[1]){if(B[1]!="false"){messageBox.alert({busiCode:"08410215",infoList:[B[1]]});}}Me.$("resInstId").value=B[0];if(Me.$("uimId")){var parameter="objectId="+A+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=NO_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!resultJson||resultJson.flag<=0){return;}if(!!Me.$("ifPreCoop")){Me.$("ifPreCoop").value=!!resultJson.OPEN_STATUS?resultJson.OPEN_STATUS:"";
}if(resultJson.NUMBER!="-1"){if(Me.$("uimId").value==""||Me.$("uimId").value!=resultJson.NUMBER){Me.$("uimId").value=resultJson.NUMBER;Me.$("uimId").onblur();}else{Me.cardTypeFillValue();Me.dealOldAgentSourceId();
}}else{if(Me.$("uimId").disabled==true){Me.$("uimId").value="";Me.$("uimId").disabled=false;}}}if(!!Me.$("uimId")&&!!Me.$("uimId").value){var parameter="objectId="+Me.$("uimId").value+"&serviceOfferId="+Me.serviceOfferId+"&productId="+Me.productId+"&cityCode="+Me.cityCode+"&getCoopFlag=UIM_COOP_FLAG";
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getCoopNumInfo",parameter);var resultJson=dojo.fromJson(resultJsonStr);if(!!resultJson||resultJson.flag<=0){if(resultJson.NUMBER!="-1"&&serviceId!=resultJson.NUMBER){if(Me.$("serviceId").value==""||Me.$("serviceId").value!=resultJson.NUMBER){MessageBox.confirm({message:"UIM\u5361\u53f7\u4e3a\u9884\u914d\u5361\uff0c\u4f46\u4e0e\u5f53\u524d\u4e1a\u52a1\u4e0d\u5339\u914d\uff0c\u662f\u5426\u4fdd\u7559\u9884\u914d\u5173\u7cfb?",onComplete:function(){return function(value){if(value==true){Me.$("serviceId").value="";
Me.$("uimId").onblur();!!Me.checkUim?Me.checkUim():null;}else{Me.$("uimResInstId").value="";Me.$("uimId").value="";}};}(),iconCloseComplete:false},Me.$("uimId"));}}}}};Me.getChooseNumber=function(){if(Me.getPreselectPhoneNo()){Me.checkResource();
Me.getProdOfferInfoListByInstId();return;}var productId=Me.productId;var parameter="productId="+productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}if(result=="-1"){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._cdma_number_elem_list_;}catch(e){}var B={ServiceIdInterface:new ServiceIdInterface({"$":function(id){return Me.$(id);
}}),cdmaServiceIdElemList:cdmaServiceIdElemList};var container2=BusCard.$session.container2;var workNo=BusCard.$session.workNo;var endpassword=BusCard.$session.PASSWORD;var noDept=BusCard.$session.acceptDealer;
var webPath=container2+"resource/interfacemanage/selectno/SelectNoMain.jsp?STAFFNO="+workNo+"&PASSWORD="+endpassword+"&noDept="+noDept+"&cityCode="+Me.cityCode+"&productId="+Me.productId+"&sortId=1";Me.windowResourceServiceId=window.showModalDialog(webPath,B,"DialogWidth:1024px;DialogHeight:768px;status:no;location:no");
}else{var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.onblur();oServiceId.readOnly=true;}if(Me.$("serviceId").value!=""){Me.checkIfVirtual();Me.checkResource();}};Me.resetServiceId=function(){Me.$("serviceId").value="";
};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var cdmaServiceIdElemList=null;try{cdmaServiceIdElemList=ordermgr.accept.compnew._cdma_number_elem_list_;
}catch(e){}var chooseServiceId=Me.$("serviceId").value;if(cdmaServiceIdElemList){var len=cdmaServiceIdElemList.length;var count=0;while(len--){var current=cdmaServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;
}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");Me.$("serviceId").value="";Me.$("resInstId").value="";}}};Me.$("link_serviceId").onclick=function(){try{Me.getChooseNumber();
}catch(e){throw new Error("\u9009\u53f7\u9519\u8bef:"+e.message);}};Me.getSourceName=function(parameter){var dealerName=executeRequest("prodOfferSaleAjaxAction","getSourceName",parameter);return dealerName;
};Me.$("serviceId").onblur=function(){Me.checkResource();Me.checkIfVirtual();Me.getProdOfferInfoListByInstId();Me.getDefaultPassWord();};Me.getDefaultPassWord=function(){if(Me.$("serviceId").value!=""){var defaultPassWord=Me.$("serviceId").value.substr(Me.$("serviceId").value.length-6);
Me.$("password").value=defaultPassWord;Me.$("passwordConfirm").value=defaultPassWord;}};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();
};BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._cdma_number_elem_list_=ordermgr.accept.compnew._cdma_number_elem_list_||[];var serviceObj={};serviceObj.service=Me.$("serviceId");
serviceObj.productId=Me.productId;ordermgr.accept.compnew._cdma_number_elem_list_.push(serviceObj);Me.getProdOfferInfoListByInstId=function(){var serviceInfoNewBuilder=Me.serviceInfoNewBuilder;if(!(serviceInfoNewBuilder&&serviceInfoNewBuilder.subProductBuilder)){return;
}var subProductBuilder=serviceInfoNewBuilder.subProductBuilder;var productList=subProductBuilder.productList;var instSId=Me.$("resInstId").value;var mktResInterfaceBO=a.$remote("mktResInterfaceBO");var queryList=[];
queryList.push("COOP_PRODUCTS");var resourceInfo=mktResInterfaceBO.getResourceInfo(Me.cityCode,1,1,instSId,"",null,Me.productId,0,queryList);var prodIdList=resourceInfo.COOP_PRODUCTS;var productIdFromResList=[];
if(prodIdList){var doc=BusCard.xml.XMLoader.loadXML(prodIdList);if(doc.documentElement){var productIdList=doc.documentElement.getElementsByTagName("productId")||[];Array.prototype.push.apply(productIdFromResList,BusCard.map(productIdList,function(node){return node.text;
}));}}BusCard.each(productIdFromResList,function(productId){var existFlag=BusCard.exist(productList,function(vo){return vo.productId==productId;});if(!existFlag){var result=BusCard.doGet(BusCard.path.contextPath+"/orderDetailAction.do",{method:"getProductDetail",productId:productId});
productList[productId]=result;}});Me.productIdFromResList=productIdFromResList;subProductBuilder.showProductDetail();};Me.getPreselectPhoneNo=function(){var prodOfferAcceptLoader=dojo.getObject("prodOfferAcceptLoader");
var preAcceptFlag=prodOfferAcceptLoader.requestParam.preAcceptFlag;var preselectPhoneNoSelected=prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected;if(preAcceptFlag!=1&&preselectPhoneNoSelected!=1){var identityKind=$ac$.requestParam.customerData.identityKind;
var identityCode=$ac$.requestParam.customerData.identityCode;if(!(identityKind&&identityCode)){return false;}var para="&identityKind="+identityKind+"&identityCode="+identityCode;var resultJsonStr=executeRequest("newCustRecognitionAction","getPreselectPhone",para);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj){prodOfferAcceptLoader.requestParam.preselectPhoneNoSelected="1";var count=jsonResultObj.count;
if(count>0){if(confirm("\u662f\u5426\u9009\u62e9\u9884\u9009\u53f7\u7801\u4f5c\u4e3a\u65b0\u53f7\u7801")){Me.$("serviceId").value=jsonResultObj.serviceId;return true;}else{return false;}}}}catch(e){alert(e.message);
return false;}}};}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/getNumberOnly.js",function(_buscard,cardParam){try{var Me=this;var a=arguments[0];var b=arguments[1];var util=dojo.require("orderaccept.prodofferaccept.util");var executeRequest=_buscard.executeRequest;
Me.productId=b.productId;Me.cityCode=b.cityCode;var serviceCard=util.DomHelper.getParentWidget(Me.dom,"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");if(!!serviceCard){Me.$("serviceId").setPPPOEPwd=function(){if(!!serviceCard&&!!serviceCard.attrCardWidget){var attrCardWidget=serviceCard.attrCardWidget;
var pppoePwd=attrCardWidget.busCardInstance.$("100829");if(!!pppoePwd){var length=this.value.length;pppoePwd.value=this.value.substring(length-7,length);}}};}Me.getChooseNumber=function(){var parameter="productId="+Me.productId+"&cityCode="+Me.cityCode;
var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getFixedNumber",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;
}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");if(result!=null&&result!=""){oServiceId.value=result;oServiceId.readOnly=true;}if(!!Me.$("serviceId").setPPPOEPwd){Me.$("serviceId").setPPPOEPwd();}if(!!Me.checkedCurrentNumForAcc){Me.checkedCurrentNumForAcc(Me.$("serviceId").value);
}};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;}else{return false;}};Me.checkSameServiceId=function(){var cdmaServiceIdElemList=null;
try{cdmaServiceIdElemList=ordermgr.accept.compnew._other_number_elem_list_;}catch(e){}var chooseServiceId=Me.$("serviceId").value;if(cdmaServiceIdElemList){var len=cdmaServiceIdElemList.length;var count=0;
while(len--){var current=cdmaServiceIdElemList[len].service.value;if(current.length>0&&chooseServiceId==current){count++;}}if(count>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");
Me.$("serviceId").value="";}}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};Me.$("serviceId").onblur=function(){if(!!Me.$("serviceId").setPPPOEPwd){Me.$("serviceId").setPPPOEPwd();
}if(!!Me.checkedCurrentNumForAcc){Me.checkedCurrentNumForAcc(Me.$("serviceId").value);}};Me.$("serviceId").onpropertychange=function(){Me.checkSameServiceId();};BusCard.Namespace.create("ordermgr.accept.compnew");
ordermgr.accept.compnew._other_number_elem_list_=ordermgr.accept.compnew._other_number_elem_list_||[];var serviceObj={};serviceObj.service=Me.$("serviceId");serviceObj.productId=Me.productId;ordermgr.accept.compnew._other_number_elem_list_.push(serviceObj);
}catch(e){alert(e.message);}});
BusCard.define("/buscardapp/rela/js/cardServiceForLan.js",function(d,m){try{var l=this;var k=arguments[0];var i=arguments[1];var f=dojo.require("orderaccept.prodofferaccept.util");var g=d.executeRequest;
l.productId=i.productId;l.cityCode=i.cityCode;var j=f.DomHelper.getParentWidget(l.dom,"orderaccept.prodofferaccept.widget.servicecard.ServiceCardWidget");if(!!j){l.$("serviceId").setPPPOEPwd=function(){if(!!j&&!!j.attrCardWidget){var a=j.attrCardWidget;
var b=a.busCardInstance.$("100829");if(!!b){var e=this.value.length;b.value=this.value.substring(e-7,e);}}};}l.returnBlank=function(){var a=(navigator.appname=="Netscape")?event.which:event.keyCode;if(a!=32){return true;
}else{return false;}};l.checkServiceIdPattern=function(){var a=l.$("serviceId").value;var b=/^[0-9a-zA-Z]*$/g;if(b.test(a)){return true;}orderaccept.common.dialog.MessageBox.alert({message:"\u5bbd\u5e26\u4e1a\u52a1\u53f7\u7801\u53ea\u5141\u8bb8\u8f93\u5165\u5b57\u6bcd\u548c\u6570\u5b57,\u8bf7\u91cd\u65b0\u8f93\u5165!"});
l.$("serviceId").value="";l.$("serviceId").focus();return false;};l.checkSameServiceId=function(){var q=null;try{q=ordermgr.accept.compnew._other_number_elem_list_;}catch(p){}var n=l.$("serviceId").value;
if(q){var a=q.length;var b=0;while(a--){var o=q[a].service.value;if(o.length>0&&n==o){b++;}}if(b>1){alert("\u8be5\u4e1a\u52a1\u53f7\u7801\u5df2\u9009\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");l.$("serviceId").value="";
}}};l.$("link_serviceId").onclick=function(){};l.$("serviceId").onkeypress=function(){return l.returnBlank();};l.$("serviceId").onblur=function(){if(!!l.$("serviceId").setPPPOEPwd){l.$("serviceId").setPPPOEPwd();
}if(!!l.checkedCurrentNumForAcc){l.checkedCurrentNumForAcc(l.$("serviceId").value);}};l.$("serviceId").onpropertychange=function(){};BusCard.Namespace.create("ordermgr.accept.compnew");ordermgr.accept.compnew._other_number_elem_list_=ordermgr.accept.compnew._other_number_elem_list_||[];
var c={};c.service=l.$("serviceId");c.productId=l.productId;ordermgr.accept.compnew._other_number_elem_list_.push(c);}catch(h){alert(h.message);}});
BusCard.define("/buscardapp/rela/js/getIvpnNumber.js",function(_buscard,cardParam){var Me=this;var a=arguments[0];var b=arguments[1];var executeRequest=_buscard.executeRequest;Me.cityCode=b.cityCode;Me.belongCode=b.belongCode||b.serviceRelation.belongCode;
Me.productId=b.productId;Me.getChooseNumber=function(){var parameter="productId="+Me.productId;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getBizId",parameter);var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;
if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){result=jsonResultObj.message;}}catch(e){alert("\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u53d6\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7\u539f\u951f\u65a4\u62f7\u4e3a\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u65a4\u62f7\u951f\u6377\u65a4\u62f7\u951f\u65a4\u62f7\u5931\u951f\u6770\uff4f\u62f7");
return false;}var oServiceId=Me.$("serviceId");oServiceId.value=result;oServiceId.readOnly=true;};Me.returnBlank=function(){var A=(navigator.appname=="Netscape")?event.which:event.keyCode;if(A!=32){return true;
}else{return false;}};Me.$("link_serviceId").onclick=function(){Me.getChooseNumber();};Me.$("serviceId").onkeypress=function(){return Me.returnBlank();};});
BusCard.define("/buscardapp/rela/js/common.js",function(b,a){(function(){var k=this;var f=function(o){var p=this;p.service=o.service;p.$=o["$"];p.$n=o["$n"];p.cityCode=o.cityCode;p.uniqueId=o.uniqueId;
p.setAddrDetail=function(r){var s=r.addrDetail;var t=r.addrId;for(var u=0,q=document.getElementsByName("addrDetail").length;u<q;u++){document.getElementsByName("addrDetail")[u].value=s;document.getElementsByName("addrId")[u].value=s;
document.getElementsByName("addrId")[u].rvalue=t;}p.$("addrDetail").value=s;p.$("addrId").value=s;p.$("addrId").rvalue=t;p.$("addrDetail").focus();p.setAttrValueMethod(r);};p.setAttrValueMethod=function(u){var t=u.innetMethodId;
var s=u.switchNo;if(!!t&&t!=""){if(!!window.prodOfferAcceptLoader){if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance){var q=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance.$("100542");
if(!!q){q.value=t;}}}else{if($("prodAttrCardContainer")){BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(v){if(v.id=="100542"){v.value=t;}});}}}if(!!s&&s!=""){if(!!window.prodOfferAcceptLoader){if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance){var r=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance.$("60056");
if(!!r){r.value=s;}}}else{if($("prodAttrCardContainer")){BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(v){if(v.id=="60056"){v.value=s;}});}else{if(!!p.$("switchNo")){p.$("switchNo").value=s;
}}}}};};var e=function(o){var p=this;p.service=o.service;p.$=o["$"];p.$n=o["$n"];p.cityCode=o.cityCode;p.uniqueId=o.uniqueId;p.setAddrDetail=function(q){if(!!window.prodOfferAcceptLoader){p.setAddrDetail_1(q);
}else{p.setAddrDetail_2(q);}p.setAttrValueMethod(q);};p.setAddrDetail_1=function(q){var r=q.addrDetail;var s=q.addrId;var u=prodOfferAcceptLoader.serviceCardWidgetMap;for(var t in u){if(!u.hasOwnProperty(t)){continue;
}if(!!$ac$.get("_switch8090_")&&$ac$.get("_switch8090_")==1){if(u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PROD_NEW||u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PRODUCT_CHANGE_ACCEPT||u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PROD_QUIT){if(u[t].busCardInstance.needResourceComfirm===false){if(u[t].busCardInstance.$("addrId")){u[t].busCardInstance.$("addrId").value=r;
u[t].busCardInstance.$("addrId").rvalue=s;}if(u[t].busCardInstance.$("addrDetail")){u[t].busCardInstance.$("addrDetail").value=r;}}}}else{if(u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PROD_NEW||u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PRODUCT_CHANGE_ACCEPT||u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PROD_QUIT){if(u[t].busCardInstance.$("addrId")){u[t].busCardInstance.$("addrId").value=r;
u[t].busCardInstance.$("addrId").rvalue=s;}if(u[t].busCardInstance.$("addrDetail")){u[t].busCardInstance.$("addrDetail").value=r;}}}}};p.setAddrDetail_2=function(r){var s=r.addrDetail;var t=r.addrId;for(var u=0,q=document.getElementsByName("addrDetail").length;
u<q;u++){document.getElementsByName("addrDetail")[u].value=s;document.getElementsByName("addrId")[u].value=s;document.getElementsByName("addrId")[u].rvalue=t;}if(p.$("addrDetail")){p.$("addrDetail").value=s;
}if(p.$("addrId")){p.$("addrId").value=s;p.$("addrId").rvalue=t;}};p.setAttrValueMethod=function(u){var t=u.innetMethodId;var s=u.switchNo;if(!!t&&t!=""){if(!!window.prodOfferAcceptLoader){if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance){var q=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance.$("100542");
if(!!q){q.value=t;}}}else{if($("prodAttrCardContainer")){BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(v){if(v.id=="100542"){v.value=t;}});}}}if(!!s&&s!=""){if(!!window.prodOfferAcceptLoader){if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance){var r=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+p.uniqueId].attrCardWidget.busCardInstance.$("60056");
if(!!r){r.value=s;}}}else{if($("prodAttrCardContainer")){BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(v){if(v.id=="60056"){v.value=s;}});}else{if(!!p.$("switchNo")){p.$("switchNo").value=s;
}}}}};};var g=function(o){var p=this;p.setReturnValue=function(q){p.setAddrDetail(q);p.setOtherAttribute(q);};p.setAddrDetail=function(q){var r=q.addrDetail;var s=q.addrId;var v=q.siteofficename;if(!!window.prodOfferAcceptLoader){var u=prodOfferAcceptLoader.serviceCardWidgetMap;
if(!!$ac$.get("_switch8091_")&&$ac$.get("_switch8091_")==0){BusCard.each(q.packageinfo||[],function(w){var y=w.uniqueid;var x=u["serviceCardWidget_"+y];if(x.busCardInstance.$("addrId")){x.busCardInstance.$("addrId").value=r;
x.busCardInstance.$("addrId").rvalue=s;}if(x.busCardInstance.$("addrDetail")){x.busCardInstance.$("addrDetail").value=r;}});}else{for(var t in u){if(!u.hasOwnProperty(t)){continue;}if(u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PROD_NEW||u[t].cardParam.serviceOfferId==ConstantsPool.load("ServiceOfferIDConst").ServiceOfferIDConst.PRODUCT_CHANGE_ACCEPT){if(u[t].busCardInstance.needResourceComfirm===false){continue;
}if(u[t].busCardInstance.$("addrId")){u[t].busCardInstance.$("addrId").value=r;u[t].busCardInstance.$("addrId").rvalue=s;}if(u[t].busCardInstance.$("addrDetail")){u[t].busCardInstance.$("addrDetail").value=r;
}}}}}else{var r=q.addrDetail;var s=q.addrId;if(o["$"]("addrId")){o["$"]("addrId").value=r;o["$"]("addrId").rvalue=s;}if(k.$("addrDetail")){k.$("addrDetail").value=r;}if($("prodAttrCardContainer")){BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(w){if(w.id=="60056"){w.value=v;
}});}else{if(!!k.$("switchNo")){k.$("switchNo").value=v;}}}};p.setOtherAttribute=function(q){var s=dojo.getObject("prodOfferAcceptLoader");if(!!s){var r=s.serviceCardWidgetMap;BusCard.each(q.packageinfo||[],function(v){var w=v.uniqueid;
var u=r["serviceCardWidget_"+w];var t=u.attrCardWidget.busCardInstance;if(t.$("60056")){t.$("60056").value=q.siteofficename;}if(t.$("100542")){t.$("100542").value=v.connmodechoose;BusCard.dispatchEvent(t.$("100542"),"change");
}});}else{BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(t){if(t.id=="60056"){t.value=q.siteofficename;}});BusCard.each(BusCard.query("[controlFieldName]",$("prodAttrCardContainer")),function(t){if(t.id=="100542"){t.value=q.packageinfo[0].connmodechoose;
BusCard.dispatchEvent(t,"change");}});}};};var d={initSwitch:function(q){var r="cityCode="+q;if(!$ac$.get("_switch8090_")){var p=executeRequest("prodOfferSaleAjaxAction","getUseResourceConfirmURL",r);$ac$.set("_switch8090_",p);
}if(!!$ac$.get("_switch8090_")&&$ac$.get("_switch8090_")==1){if(!$ac$.get("_switch8091_")){var o=executeRequest("prodOfferSaleAjaxAction","getMultipleProdResourceConfirm",r);$ac$.set("_switch8091_",o);
}}}};var c={checkEasyPassword:function(x,y){var w=x.value;var p=w.charAt(0);var q=parseInt(p);var o=parseInt(p);var v=p;var u=p;var t=q+""+q+""+q+""+q+""+q+""+q;var s="";if(isNaN(p)){s=p+p+p+p+p+p;}for(var r=0;
r<5;r++){if(q!=9){q=q+1;v=v+""+q;}if(o!=0){o=o-1;u=u+""+o;}}if(w==t||w==v||w==u||w==s){if(!y){alert("\u60a8\u7684\u5bc6\u7801\u8fc7\u4e8e\u7b80\u5355,\u8bf7\u91cd\u65b0\u8bbe\u7f6e. \u7b80\u5355\u5bc6\u7801\u4e0d\u80fd\u529e\u7406\u5176\u4ed6\u4efb\u4f55\u4e1a\u52a1!\n\u7b80\u5355\u5bc6\u7801\u6307:\n        (1):6\u4f4d\u5bc6\u7801\u4e00\u6837;\n        (2):6\u4f4d\u5bc6\u7801\u9012\u589e;\n        (3):6\u4f4d\u5bc6\u7801\u9012\u51cf;\n        \u5982'111111,123456,654321,ssssss'");
x.value="";x.focus();}return false;}return true;},checkNotNullByContainer:function(o){var r=o.getElementsByTagName("input");var q=r.length;for(var p=0;p<q;p++){var s=r[p];if(s.ztype!="mock"){if(s.type!="text"&&s.type!="password"){continue;
}}if(s.disabled){continue;}if(s.readOnly){continue;}if(s.value!=""){continue;}if(!this.checkItem(s)){return false;}}if(!this.checkSelectNotNull()){return false;}return true;},checkSelectNotNull:function(){var q=document.getElementsByTagName("select");
var p=q.length;for(var o=0;o<p;o++){var r=q[o];if(!isDisplay(r,true)){continue;}if(r.disabled){continue;}if(r.readOnly){continue;}if(r.value!=""){continue;}if(!this.checkItem(r)){return false;}}return true;
},checkItem:function(o){var q=o.isnullable;if(q=="false"){q=false;}else{q=true;}var p=o.value;if(!q&&!p){promptNotNull(o.prompt);if(isDisplay(o,true)){o.focus();}return false;}return true;}};var n=function(o){if(o==null||typeof o=="undefined"){return false;
}else{return true;}};var l=function(o){var p=this;p.$=o["$"];p.setServiceId=function(u){var t=u.serviceId;var q=u.resInstId;var s=u.uimId;var r=u.uimResInstId;p.$("serviceId").value=t;p.$("resInstId").value=q;
if(s&&s!="null"){p.$("uimId").value=s;p.$("uimResInstId").value=r;}p.$("serviceId").focus();};};var m=function(t,z,C,B,s){var H=C+"\u8f93\u5165\u9519\u8bef!";var D={};var q=B.selectedIndex;var p=B.options[q].value;
var r=B.options[q].text;var o=s.value;if(!t){var t=[];t[1]="18";t[3]="18";t[5]="20";t[6]="20";t[7]="20";t[8]="20";}if(typeof t[p]==="undefined"){D.status=true;D.message="";return D;}if(!z){var z=new Array();
z[1]="1";}if(p==1&&o.length!=0){if(o.length==18||o.length==15){}else{H=C+"\u957f\u5ea6\u9519\u8bef!";D.status=false;D.message=H;s.value="";return D;}}if(o.length>t[p]){H=C+"\u957f\u5ea6\u8d85\u51fa\u6700\u5927\u9650\u5236\u957f\u5ea6!";
D.status=false;D.message=H;s.value="";return D;}if(o.length!=0){if(z[p]==0||z[p]=="0"){var u=/^[\d]+$/;}else{if(z[p]==1||z[p]=="1"){var u=/^[\w]+$/;}else{if(z[p]==2||z[p]=="2"){var u=/^[*]+$/;}}}var y=o.match(u);
if(y==null){if(z[p]==0||z[p]=="0"){H=C+"\u5e94\u8be5\u4e3a\u6570\u5b57!";}else{if(z[p]==1||z[p]=="1"){H=C+"\u5e94\u8be5\u4e3a\u6570\u5b57\u548c\u5b57\u6bcd\u7684\u7ec4\u5408!";}else{if(z[p]==2||z[p]=="2"){H=C+"\u683c\u5f0f\u9519\u8bef!";
}else{H=C+"\u683c\u5f0f\u9519\u8bef!";}}}D.status=false;D.message=H;s.value="";return D;}}if(p==1&&o.length==15){if(isNaN(parseInt(o))){var H="15\u4f4d\u8eab\u4efd\u8bc1\u53f7\u7801\u5e94\u5168\u4e3a\u6570\u5b57";
D.status=false;D.message=H;s.value="";return D;}var x=o.substr(6,2);var I=o.substr(8,2);var F=o.substr(10,2);var A="19"+x;var G=parseInt(A,10);var v=parseInt(I,10);var E=parseInt(F,10);if((G%4==0)&&(G%100!=0)||(G%400==0)){var w=new Array(31,29,31,30,31,30,31,31,30,31,30,31);
}else{var w=new Array(31,28,31,30,31,30,31,31,30,31,30,31);}if(G<1900){var H=C+"\u7684\u5e74\u6ca1\u6709\u610f\u4e49??\u8bf7\u91cd\u65b0\u8f93\u5165??";D.status=false;D.message=H;s.value="";return D;}if(v<1||v>12){var H=C+"\u7684\u6708\u4efd\u4e0d\u6b63\u786e!";
D.status=false;D.message=H;s.value="";return D;}if(E<1||E>w[(I-1)]){var H=C+"\u7684\u65e5\u671f\u90e8\u5206\u4e0d\u6b63\u786e!";D.status=false;D.message=H;s.value="";return D;}}if(p==1&&o.length==18){var u=/^[0-9]{17}(x|([0-9]{1}))$/i;
if(!u.test(o)){var H="18\u4f4d\u8eab\u4efd\u8bc1\u53f7\u7801\u5e94\u5168\u4e3a\u6570\u5b57\u6216\u6700\u540e\u4e00\u4f4d\u4e3ax";D.status=false;D.message=H;s.value="";return D;}var x=o.substr(6,4);var I=o.substr(10,2);
var F=o.substr(12,2);var G=parseInt(x,10);var v=parseInt(I,10);var E=parseInt(F,10);if((G%4==0)&&(G%100!=0)||(G%400==0)){var w=new Array(31,29,31,30,31,30,31,31,30,31,30,31);}else{var w=new Array(31,28,31,30,31,30,31,31,30,31,30,31);
}if(G<1900){var H=C+"\u7684\u5e74\u6ca1\u6709\u610f\u4e49!";D.status=false;D.message=H;s.value="";return D;}if(v<1||v>12){var H=C+"\u7684\u6708\u4efd\u4e0d\u6b63\u786e!";D.status=false;D.message=H;s.value="";
return D;}if(E<1||E>w[(I-1)]){var H=C+"\u7684\u65e5\u671f\u90e8\u5206\u4e0d\u6b63\u786e!";D.status=false;D.message=H;s.value="";return D;}}D.status=true;D.message="";return D;};function j(p,r,q){if(!r.disabled){var o=m("","",p,r,q);
if(false==o.status){alert(o.message);q.select();q.focus();return false;}else{return true;}}else{return true;}}var h={weakPwdCheck:function(p,o){if(this.checkPwdSp(p,"\u5bc6\u7801\u4fee\u6539")){if(this.pwdLengthCheck(p)){if(this.ifSameAsServiceId(p,o)){if(this.checkEasyPwd(p)){if(this.useServicePart(p,o)){this.charEasyCheck(p);
}}}}}},createWeakPawCheck:function(o){if(this.checkPwdSp(o,"\u5bc6\u7801\u4fee\u6539")){if(this.pwdLengthCheck(o)){if(this.checkEasyPwd(o)){this.charEasyCheck(o);}}}},ifSameAsServiceId:function(q,p){var o=q.value;
if(p!=""){if(o==p){alert("\u5bf9\u4e0d\u8d77\uff0c\u5bc6\u7801\u548c\u8d26\u53f7\u4e0d\u80fd\u76f8\u540c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");q.value="";return false;}}return true;},checkPwdSp:function(p,o){var q="\"'$";
return this.checkSpPri(p,o,q);},checkSpPri:function(s,o,p){var r=p;var q="";for(i=0;i<s.value.length;i++){var t=s.value.charAt(i);if(" "==t){q=q+"\u7a7a\u683c";}if(r.indexOf(t)!=-1){if(q.indexOf(t)==-1){q=q+t;
}}}if(q==""){return true;}alert(o+"\u4e2d\u542b\u6709"+q+"\u7279\u6b8a\u5b57\u7b26\uff01");s.value="";return false;},checkEasyPwd:function(p){var o=p.value;if(/^(\d)\1+$/.test(o)){alert("\u5bc6\u7801\u53d6\u503c\u4e0d\u80fd\u4e00\u6837\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");
p.value="";return false;}var q=o.replace(/\d/g,function(r,s){return parseInt(r)-s;});if(/^(\d)\1+$/.test(q)){alert("\u5f31\u5bc6\u7801\u7c7b\u578b\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");p.value="";
return false;}q=o.replace(/\d/g,function(r,s){return parseInt(r)+s;});if(/^(\d)\1+$/.test(q)){alert("\u5f31\u5bc6\u7801\u7c7b\u578b\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");p.value="";return false;}return true;
},useServicePart:function(q,p){var o=q.value;if(p!=""){if(p.indexOf(o)!=-1){alert("\u4e0d\u80fd\u7528\u8d26\u53f7\u4e2d\u7684\u8fde\u7eed\u516d\u4f4d\u4f5c\u4e3a\u60a8\u7684\u5bc6\u7801\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");
q.value="";return false;}}return true;},pwdLengthCheck:function(p){var o=p.value;if(o.length>6){alert("\u5bc6\u7801\u957f\u5ea6\u5927\u4e8e\u516d\u4f4d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");
p.value="";return false;}else{return true;}},charEasyCheck:function(q){var o=q.value;if(/^(\w)\1+$/.test(o)){alert("\u5f31\u5bc6\u7801\u7c7b\u578b\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");q.value="";
return false;}var r="abcdefghijklmnopqrstuvwxyz";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if((r.indexOf(o)!=-1)){alert("\u5f31\u5bc6\u7801\u7c7b\u578b\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");q.value="";return false;
}if((p.indexOf(o)!=-1)){alert("\u5f31\u5bc6\u7801\u7c7b\u578b\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801");q.value="";return false;}return true;}};k.StandardAddInterface=f;k.ServiceIdInterface=l;k.jsCommon=c;
k.isValid=n;k.check_identity_new=m;k.checkid_iden_new=j;k.GetSwitchForAddr=d;k.StandardAddMultipleInterface=e;k.ResourceConfirmInterface=g;k.WeakPwdCheck=h;k.doMoveSpecialHandler=function(){};}());});
BusCard.define("/buscardapp/rela/js/getUseCust.js",function(d,a){try{var c=$("webPath").value,b=function(e){var h=c+"/custcontact/common/jsp/UseCust.jsp?witchOne="+e;window.open(h,"newWin","status=1,resizable=0,fullscreen=0,scrollbars=yes,top=10,left=10,width=1000,height=700");
},g=function(i,e){if(i){i.readOnly=true;if($ac$){var h=$ac$.requestParam.customerData;i.value=h.custName;e.value=h.custId;}}};g(this.$("subscriberName"),this.$("subscriberId"));this.$("link_subscriberName").onclick=function(){b(0);
};}catch(f){alert(f.message);}});
BusCard.define("/buscardapp/rela/js/accountNbrHandler.js",function(b,i){var h=this;dojo.require("orderaccept.prodofferaccept.util");var f=function(){return dojo.global.$appContext$.get("requestParam").customerData;
}();var g=f.custId;var c=i.uniqueId;var j=[];var a=[];if(!dojo.global.$appContext$.get("pstnPlusCdmaNbrMap")){var e=orderaccept.prodofferaccept.util.ServiceFactory.getService("url:orderDetailAction.do?method=getCommAccNbrList&custId="+g+"&cityCode="+f.cityCode);
var d={};j=e.tempAccessProdItemList;a=e.instServiceRelationList;j=dojo.filter(j||[],function(k){return !dojo.some(a||[],function(l){return k.userId==l.userId;});});d.tempNbrInfoList=j;d.instNbrInfoLit=a;
dojo.global.$appContext$.set("pstnPlusCdmaNbrMap",d);}else{j=dojo.global.$appContext$.get("pstnPlusCdmaNbrMap").tempNbrInfoList;a=dojo.global.$appContext$.get("pstnPlusCdmaNbrMap").instNbrInfoLit;}h.getAccessServiceIdList=function(){var l=[];
try{if(!prodOfferAcceptLoader){return l;}}catch(m){return l;}if(prodOfferAcceptLoader.mainProdOfferWidget==null){return l;}var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);
dojo.forEach(k,function(o){var p={};var n=dojo.attr(o,"viewId");p.serviceId=dojo.query(".serviceId-"+n,o)[0].value;p.uniqueId=dojo.attr(o,"uniqueId");p.serviceKind=dojo.attr(o,"serviceKind");p.serviceKindIndex=dojo.attr(o,"serviceKindIndex");
p.productId=dojo.attr(o,"productId")||"-1",p.prodInstId=dojo.attr(o,"userId")||"",l.push(p);if(p.productId==h.productId){h.serviceKind=p.serviceKind;}});return l;};h.filterOfInstAndTemp=function(l,m,k){return dojo.filter(k||[],function(n){return(!dojo.some(m||[],function(o){return o.userId==n.prodInstId;
}))&&(!dojo.some(l||[],function(o){return o.userId==n.prodInstId;}));});};h.$("accountNbrChoose").onload=function(){h.nbrUniqueId=orderaccept.prodofferaccept.util.CommUtils.generateUniqueId();var o=BusCard.Template.create("<div id='nbr_selected_ctn'>	        		<fieldset  id='inst_nbr_fieldset'><legend>\u5b9e\u4f8b\u53f7\u7801</legend><div id='inst_nbr_div'>#{instItemList}</div></fieldset>								<fieldset id='temp_nbr_fieldset'><legend>\u5728\u9014\u53f7\u7801</legend><div id='temp_nbr_div'>#{tempItemList}</div></fieldset>								<fieldset id='current_nbr_fieldset'><legend>\u5f53\u524d\u53d7\u7406\u53f7\u7801</legend><div id='current_nbr_div'>#{currentItemList}</div></fieldset>				        		</div>");
var q=BusCard.Template.create("<input type='checkbox' #{disableFlag} name='accServiceId-#{uniqueId}' targetUniqueId='#{targetUniqueId}' value='#{serviceId}' serviceId='#{serviceId}' sourceFlag='#{sourceFlag}' prodInstId ='#{prodInstId}' serviceKind='#{serviceKind}' serviceKindIndex='#{serviceKindIndex}'><span style='margin-right:5px'>#{serviceId}</span><tp:if $$.sourceFlag !=3><span style='color:#3399cc;font-weight:bold;'>[#{serviceKindDesc}]</span></tp:if>&nbsp;&nbsp;&nbsp;&nbsp;");
var k=BusCard.map(a,function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]?orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]+"\u53f7\u7801":"\u672a\u77e5\u7c7b\u578b\u53f7\u7801",sourceFlag:1,prodInstId:r.userId,disableFlag:"disabled",serviceId:r.serviceId,uniqueId:h.nbrUniqueId});
});k=h.dealDisplayOneRow(k);var l=BusCard.map(j,function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]?orderaccept.prodofferaccept.util.ServiceKindPrefixMap[r.serviceKind]+"\u53f7\u7801":"\u672a\u77e5\u7c7b\u578b\u53f7\u7801",sourceFlag:2,prodInstId:r.userId,disableFlag:"disabled",serviceId:r.serviceId,uniqueId:h.nbrUniqueId});
});l=h.dealDisplayOneRow(l);var m=h.getAccessServiceIdList();m=h.filterOfInstAndTemp(j,a,m);var p=BusCard.map(m||[],function(r){return q.apply({serviceKind:r.serviceKind,serviceKindDesc:"",sourceFlag:3,serviceId:r.serviceId,serviceKindIndex:r.serviceKindIndex,uniqueId:h.nbrUniqueId,disableFlag:"disabled",prodInstId:r.prodInstId,targetUniqueId:r.uniqueId});
});p=h.dealDisplayOneRow(p);var n=o.apply({instItemList:k,tempItemList:l,currentItemList:p});this.innerHTML=n;h.$("subpage_wrapper_accountNbrChoose").style.width="500px";h.doGetAccNbrSameProductId();h.selectAcctNbr();
};h.dealDisplayOneRow=function(k){var m="";var l=1;if(k&&k.length>0){for(var n=0;n<k.length;n++){m+=k[n];if(l%2==0){m+="<br>";}l++;}}return m;};h.$("accountNbrChoose").collectData=function(o,m,l){var n=[];
var k=this.getElementsByTagName("input");m.util.each(k,function(q){if(q.type&&q.type.toUpperCase()=="CHECKBOX"&&q.checked){var p={};p.serviceId=q.getAttribute("serviceId");p.sourceFlag=q.getAttribute("sourceFlag");
p.uniqueId=q.getAttribute("targetUniqueId");p.prodInstId=q.getAttribute("prodInstId");p.serviceKind=q.getAttribute("serviceKind");p.serviceKindIndex=q.getAttribute("serviceKindIndex");n.push(p);}});return n;
};h.selectAcctNbr=function(){var q=dojo.query("[name=accServiceId-"+h.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",h.dom)[0]);if(dojo.some(q||[],function(r){return r.checked;})){return;}var l=[];var m=[];
var o=[];dojo.forEach(q||[],function(r){if(r.getAttribute("serviceKind")==8&&r.getAttribute("sourceFlag")==3){l.push(r);}else{if(r.getAttribute("serviceKind")==10&&r.getAttribute("sourceFlag")==3){m.push(r);
}else{if(r.getAttribute("sourceFlag")==3){o.push(r);}}}dojo.connect(r,"click",function(s){h.doCheckAccNbr(s);});});if(l.length>0){var p=dojo.filter(l,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(p.length>0){p[0].checked=true;return;}}if(m.length>0){var k=dojo.filter(m,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(k.length>0){k[0].checked=true;return;}}if(o.length>0){var n=dojo.filter(o,function(r){return !dojo.some(h.currentNbrInfoList,function(s){var t=s.data;
return dojo.some(t,function(u){return u.serviceId==r.getAttribute("serviceId");});});});if(n.length>0){n[0].checked=true;return;}}};h.doCheckAccNbr=function(n){if(n.currentTarget.checked){var o=BusCard.$remote("prodOfferSaleDataBO").getAccNbrSwitch(f.cityCode);
if(!!o&&o.objectValue==1){h.getCurrentNbrInfoList();var m=n.currentTarget.getAttribute("prodInstId");var r=n.currentTarget.getAttribute("serviceId");if(h.checkInstList!=null&&h.checkInstList.length>0){for(var q=0;
q<h.checkInstList.length;q++){var l=h.checkInstList[q];var k=dojo.some(l.data||[],function(p){return p.prodInstId==m;});if(k&&n.currentTarget.checked){alert("\u5f53\u524d\u9009\u4e2d\u7684\u53f7\u7801["+n.currentTarget.getAttribute("serviceId")+"]\u5df2\u7ecf\u662f\u8be5\u5ba2\u6237\u4e0b\u7684\u5176\u4f59\u4ea7\u54c1["+l.serviceId+"]\u7684\u8d26\u53f7\uff0c\u4e0d\u5141\u8bb8\u9009\u62e9\u4e3a\u5f53\u524d\u53f7\u7801\u8d26\u53f7!!!");
n.currentTarget.checked=false;}}}if(h.currentNbrInfoList!=null&&h.currentNbrInfoList.length>0){for(var q=0;q<h.currentNbrInfoList.length;q++){var l=h.currentNbrInfoList[q];var k=dojo.some(l.data||[],function(p){return p.serviceId==r;
});if(k&&n.currentTarget.checked){alert("\u5f53\u524d\u9009\u4e2d\u7684\u53f7\u7801["+n.currentTarget.getAttribute("serviceId")+"]\u5df2\u7ecf\u662f\u8be5\u5ba2\u6237\u4e0b\u7684\u5176\u4f59\u4ea7\u54c1["+l.serviceId+"]\u7684\u8d26\u53f7\uff0c\u4e0d\u5141\u8bb8\u9009\u62e9\u4e3a\u5f53\u524d\u53f7\u7801\u8d26\u53f7!!!");
n.currentTarget.checked=false;}}}}}};h.doGetAccNbrSameProductId=function(){var k=h.productId;h.checkInstList=[];var m=orderaccept.prodofferaccept.util.ServiceFactory.getService("url:orderDetailAction.do?method=doGetAccNbrSameProductId&custId="+g+"&productId="+k+"&cityCode="+f.cityCode);
for(var l in m){h.checkInstList.push({data:m[l],serviceId:l});}h.getCurrentNbrInfoList();};h.checkedCurrentNumForAcc=function(l){var o=dojo.query("[name=accServiceId-"+h.nbrUniqueId+"]",dojo.query("#nbr_selected_ctn",h.dom)[0]);
dojo.forEach(o||[],function(p){p.checked=false;});var n=[];var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);dojo.forEach(k||[],function(p){var r=dojo.attr(p,"uniqueId");
var q=dojo.attr(p,"serviceKind")||"-1";if(prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.$("serviceId").value==l){n.push({uniqueId:r,serviceKind:q});}});if(n.length>0){if(n.length>1){var m=dojo.filter(n||[],function(p){return p.serviceKind==8||p.serviceKind==10;
});if(m.length>0){n=m;}}dojo.forEach(o||[],function(p){if(n[0].uniqueId==p.getAttribute("targetUniqueId")){p.checked=true;}});}};h.getCurrentNbrInfoList=function(){h.currentNbrInfoList=[];var k=dojo.query(".main-product-basic",prodOfferAcceptLoader.mainProdOfferWidget.domNode);
dojo.forEach(k,function(n){if(h.productId==dojo.attr(n,"productId")&&c!=dojo.attr(n,"uniqueId")){var r=dojo.attr(n,"uniqueId");var l=dojo.attr(n,"viewId");var q=dojo.query(".serviceId-"+l,n)[0].value;if(prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.dom){var m=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.dom;
var p=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+r].busCardInstance.nbrUniqueId;var o=dojo.query("[name=accServiceId-"+p+"]",dojo.query("#nbr_selected_ctn",m)[0]);b.util.each(o,function(s){if(s.checked){h.currentNbrInfoList.push({data:[{serviceId:s.getAttribute("serviceId")}],serviceId:q});
}});}}});};});
BusCard.define("/buscardapp/rela/js/remoteWriteCard.js",function(h,g){try{var j=this;var f=arguments[0];var c=arguments[1];var d=h.executeRequest;j.productId=c.productId;j.cityCode=c.cityCode;j.serviceOfferId=c.serviceOfferId;
j.$("writeCardBtn").onclick=function(){if(!j.check()){return false;}var t=j.$("serviceId").value;var l=f.$session.workNo;var b=f.$session.staffName;var e=f.$session.departmentId;var q=f.$session.deptName;
var u=d("prodOfferSaleAjaxAction","getRemoteInfoIn","");var k=document.getElementById("webPath").value;if(u){var n=u.split(",");var s=n[0];var p=n[1];var a="SQUENCE="+p+"&ACC_NBR="+t+"&STAFF_ID="+l+"&STAFF_NAME="+b+"&CHANNEL_ID="+e+"&CHANNEL_NAME="+q+"&new_flag=1";
var m=k+"/custcontact/orderaccept/secondaccept/depchangecard/PopFrame.jsp";var r=encodeURI(s+a);var o=showModalDialog(m,r,"DialogWidth:625px;DialogHeight:600px;status:no;location:no");}return j.dealResult(o);
};j.check=function(){if(j.$("serviceId").value==""){alert("\u8bf7\u60a8\u5148\u9009\u62e9\u53f7\u7801,\u7136\u540e\u5728\u8fdb\u884c\u8fdc\u7a0b\u5199\u5361\u64cd\u4f5c");return false;}if(j.$("uimId").disabled){alert("\u8bf7\u60a8\u9009\u62e9\u975e\u9884\u914d\u53f7\u7801");
return false;}return true;};j.dealResult=function(m){if(typeof m=="undefined"){return;}var q=m.split("&");var n=j.getValue(q[1]);var r=j.getValue(q[2]);var k=j.getValue(q[3]);var a=j.getValue(q[4]);var o=j.getValue(q[5]);
var p=j.getValue(q[6]);var l=j.getValue(q[7]);l=l.substring(0,l.length-1);var b=j.getValue(q[8]);var e="&squence="+n+"&serviceId="+a+"&imsi="+o+"&iccSerial="+p+"&iccid="+l+"&inOutFlag="+b;if(r=="0"){j.$("uimId").value=l;
j.$("uimId").onblur();j.$("uimId").readOnly=true;j.$("imsi").value=o;j.$("iccSerial").value=p;j.$("writeCardBtn").disabled=true;return true;}else{alert("\u8fdc\u7a0b\u5199\u5361\u5931\u8d25,\u8bf7\u91cd\u65b0\u5199\u5361");
return false;}};j.getValue=function(b){var e=b.split("=");var a=e[1];return a;};}catch(i){alert(i.message);}});
BusCard.define("/buscardapp/rela/js/card_129_100109301.js",function(h,f){var i=this;var e=arguments[0];var c=arguments[1];i.productId=c.productId;i.cityCode=c.cityCode;i.serviceOfferId=c.serviceOfferId;
var d=h.executeRequest;var g=1;i.checkUim=function(){var p=i.$("uimId");var k=i.$("uimId").value;var o=i.$("serviceId").value;if(!k){return true;}var b="uimId="+k+"&serviceOfferId="+i.serviceOfferId+"&productId="+i.productId+"&cityCode="+i.cityCode+"&serviceId="+o;
var a=d("prodOfferSaleAjaxAction","checkUimResource",b);var j=executeAjaxResult(a);if(j==false){i.$("uimId").value="";if(i.$("serviceId").disabled==true){i.$("serviceId").value="";i.$("serviceId").disabled=false;
}return;}i.$("uimResInstId").value=j;if(i.$("serviceId")){var n="objectId="+k+"&serviceOfferId="+i.serviceOfferId+"&productId="+i.productId+"&cityCode="+i.cityCode+"&getCoopFlag=UIM_COOP_FLAG";var l=d("prodOfferSaleAjaxAction","getCoopNumInfo",n);
var m=dojo.fromJson(l);if(!m||m.flag<=0){return;}if(!!i.$("ifPreCoop")){i.$("ifPreCoop").value=!!m.OPEN_STATUS?m.OPEN_STATUS:"";}if(m.NUMBER!="-1"){if(i.$("serviceId").value==""||i.$("serviceId").value!=m.NUMBER){i.$("serviceId").value=m.NUMBER;
i.$("serviceId").onblur();i.$("serviceId").disabled=true;}}else{if(i.$("serviceId").disabled==true){i.$("serviceId").value="";i.$("serviceId").disabled=false;}}}};i.$("uimId").onblur=function(){i.checkUim();
};});
BusCard.define("/buscardapp/rela/js/card_105_10004.js",function(e,a){var f=this;var c=this.$("viaIdKind");this.$("viaId").onblur=function(){if(c.value){if(this.value){if(!checkid_iden_new("\u8bc1\u4ef6\u53f7\u7801",c,this)){return;
}}}};this.$("viaPhone").onkeypress=function(){return d();};this.$("viaPhone").onblur=function(){b(f.$("viaPhone"));};function d(){if(!(event.keyCode>=47&&event.keyCode<=57)){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");
event.srcElement.focus();return false;}return true;}function b(i){var h=i.value;var j=/[^\d||\/]/;var g=j.test(h);if(g){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");i.value="";
i.focus();return;}}void function(){var l=new Date();var i=""+l.getFullYear();var k=(l.getMonth()+1)<10?"0"+(l.getMonth()+1):""+(l.getMonth()+1);var h=""+l.getDate();this.$("effectDate").value=i+"-"+k+"-"+h;
var g=null;try{g=ordermgr.accept.compnew.value;}catch(j){}if(g){this.$("effectDate").disabled=true;}}();});
BusCard.define("/buscardapp/rela/js/card_105_10092.js",function(a,n){var b=this;var v=a.executeRequest;var f="menuId=841ABWD";var c=v("prodOfferSaleAjaxAction","InnetCheck",f);var e="menuId=841ABWC";var u=v("prodOfferSaleAjaxAction","InnetCheck",e);
if(c!="1"||u!="1"){if(c=="1"){this.$("acceptWay").value=3;var w=this.$("acceptWay");w.disabled=true;}if(u=="1"){var o=this.$("acceptWay");for(var t=0;t<o.options.length;t++){if(o.options[t].value=="3"){o.options.remove(t);
break;}}}}var d=v("prodOfferSaleAjaxAction","InnetCheck","menuId=841ABXG");if(d!="1"){b.$("batchFlag").style.display="none";b.$("label_batchFlag").style.display="none";}var k="customerId="+dojo.global.$appContext$.get("requestParam").customerData.custId;
var c=v("prodOfferSaleAjaxAction","preOrderCheck",k);if(c==1){var p=this.$("acceptWay");for(var t=0;t<p.options.length;t++){if(p.options[t].value=="3"){p.options.remove(t);break;}}}else{var g=v("prodOfferSaleAjaxAction","agentNumberCheck","");
if(g==1){this.$("acceptWay").value=3;var w=this.$("acceptWay");if(w.value!=3){alert("\u8BE5\u5DE5\u53F7\u4E3A\u4EE3\u7406\u5546\uFF0C\u4F46\u6CA1\u6709\u4EE3\u7406\u5546\u5165\u7F51\u6743\u9650");}w.disabled=true;
}}var m=this.$("viaIdKind");if(!!m){this.$("viaId").onblur=function(){if(m.value){if(this.value){if(!l("\u8bc1\u4ef6\u53f7\u7801",m,this)){return;}}}};}function l(x,z,y){if(!z.disabled){var i=check_identity_new("","",x,z,y);
if(false==i.status){alert(i.message);y.select();y.focus();return false;}else{return true;}}else{return true;}}void function(){var z=new Date();var x=""+z.getFullYear();var y=(z.getMonth()+1)<10?"0"+(z.getMonth()+1):""+(z.getMonth()+1);
var i=""+z.getDate();if(!!this.$("effectDate")){this.$("effectDate").value=x+"-"+y+"-"+i;}}();b.$("developerDealer").onquery=function(){var D=this,G=arguments[0],z=arguments[1],i=arguments[2];var F=z.util.trim(this.value);
if(!F){alert("\u8bf7\u8f93\u5165\u67e5\u8be2\u5173\u952e\u8bcd");this.focus();return;}var y="-1";var A=BusCard.$session.cityCode;var x=function(){try{return prodOfferAcceptLoader.getBelongCode();}catch(H){}}();
var C={productId:i.productId,cityCode:A,regionCode:!!x?x:0,saleWay:y,dealerName:F,fieldId:this.getAttribute("fieldId")};var E=BusCard.util.native2ascii(z.toJson(C));var B={jsonData:E,method:"query"};return z.util.doGet(z.path.initPath,B);
};b.$("developerDealer").onafterclick=function(){var B=this,i=arguments[0],A=arguments[1];var D=i.$("developer");var C={cityCode:BusCard.$session.cityCode,dealerId:b.$("developerDealer").rvalue,fieldId:D.getAttribute("fieldId")};
var z=A.toJson(C);var y={jsonData:z,method:"query"};var x=A.util.doGet(A.path.initPath,y);(x||[]).unshift({name:"\u8bf7\u9009\u62e9",ids:""});A.$rs(i.$("developer"),x);};if(!!this.$("viaPhone")){this.$("viaPhone").onkeypress=function(){return s();
};this.$("viaPhone").onblur=function(){j(b.$("viaPhone"));};}this.$("contactPhone").onkeypress=function(){return s();};this.$("contactPhone").onblur=function(){j(b.$("contactPhone"));};function s(){if(!(event.keyCode>=47&&event.keyCode<=57)){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");
event.srcElement.focus();return false;}return true;}function j(y){var x=y.value;var z=/[^\d||\/]/;var i=z.test(x);if(i){alert("\u7535\u8bdd\u53f7\u7801\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u548c/");y.value="";
y.focus();return;}}if($("acceptWay").value=="3"){var r=false;var q=$ac$.selectedMemberProdOfferList;if(!!q){dojo.forEach(q,function(z){var x=z.productId;if(!!x&&r==false){var i=BusCard.$remote("productToServiceDAO").queryById({productId:x});
var y=i.netType;if(y==orderaccept.common.js.ConstantsPool.load(["ServiceKindCDConst"]).ServiceKindCDConst.CDMA_SERVICE_KIND){r=true;}}});}if(r==true){var c=v("prodOfferSaleAjaxAction","agentPayCheck");
if(c=="1"){var h=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");if(!!h){h.value="0.00";h.disabled="true";prodOfferAcceptLoader.refreshPayRelation();
}}}}this.$("acceptWay").onchange=function(){if($("acceptWay").value=="3"){var i=v("prodOfferSaleAjaxAction","agentPayCheck");if(i=="1"){var y=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");
if(!!y){y.value="0.00";y.disabled="true";prodOfferAcceptLoader.refreshPayRelation();}}var A=v("prodOfferSaleAjaxAction","notAgentPstnCheck","");if(!!A&&A==1){var z=v("prodOfferSaleAjaxAction","agentNumberCheck","");
if(z!=1){var x=$ac$.selectedMemberProdOfferList;if(!!x){dojo.forEach(x,function(E){var C=E.productId;if(!!C){var B=BusCard.$remote("productToServiceDAO").queryById({productId:C});var D=B.netType;if(D==orderaccept.common.js.ConstantsPool.load(["ServiceKindCDConst"]).ServiceKindCDConst.PSTN_SERVICE_KIND){$("acceptWay").value=1;
alert("\u975e\u4ee3\u7406\u5546\u5de5\u53f7\u002c\u9009\u62e9\u4e86\u4ee3\u7406\u5546\u5165\u7f51\u002c\u4e0d\u80fd\u505a\u56fa\u7f51\u65b0\u88c5");}}});}}}}else{var y=prodOfferAcceptLoader.payRelationWidgetInstance.queryById("accountFee .u-form-field .u-form-textbox-field .u-form-textbox-input");
if(!!y){y.disabled=false;prodOfferAcceptLoader.refreshPayRelation();}}};if(!!prodOfferAcceptLoader&&prodOfferAcceptLoader.declaredClass=="orderaccept.prodofferaccept.loader.MemberOrderGroupProductLoader"){if(!!dojo.byId("label_developerDealer")){dojo.byId("label_developerDealer").style.display="none";
if(!!dojo.byId("label_developerDealer").nextSibling){dojo.byId("label_developerDealer").nextSibling.style.display="none";}}if(!!dojo.byId("label_developer")){dojo.byId("label_developer").style.display="none";
if(!!dojo.byId("label_developer").nextSibling){dojo.byId("label_developer").nextSibling.style.display="none";}}}});
BusCard.define("/buscardapp/rela/js/card_105_10513.js",function(_buscard,cardParam){var Me=this;if($ac$.requestParam.linkName){Me.$("contactPeople").value=$ac$.requestParam.linkName;}if($ac$.requestParam.linkPhone){Me.$("contactPhone").value=$ac$.requestParam.linkPhone;
}var pageLink="/ordermgr/batchFlag";var session=BusCard.$session;var flag=BusCard.$remote("omInterfaceDAO").haveRight(session.workNo,session.workPwd,pageLink);if(!eval(flag)){Me.$("batchFlag").value=0;
Me.$("batchFlag").disabled=true;}});
BusCard.define("/buscardapp/rela/js/setEffectReadOnly.js",function(f,d){try{var h=this;var c=arguments[1];if(c.serviceOfferId=="9"){var a=h.$("effectDate");a.disabled=true;}}catch(g){alert(g.message);}});

BusCard.define("/buscardapp/rela/js/card_180_10150.js",function(d,h){Me=this;var e=arguments[1];var g=e.sysdate;var a=e.months;var c=e.subsidyFee;var i=Me.$("advancedEffDate");var f=Me.$("advancedDays");
var b=Me.$("subFee");if(i){i.value=g;i.style.width="140px";i.disabled=true;}if(f){f.value=a;f.disabled=true;}if(b){b.value=c;b.disabled=true;}});
BusCard.define("/buscardapp/rela/js/card_180_10151.js",function(_buscard,cardParam){Me=this;var a=arguments[0];var cardInfo=arguments[1];var mktResCd=cardInfo.serviceOfferId/-1;var realFee=cardInfo.realFee||"0";
var mktResName=cardInfo.mktResName;var resKindList=cardInfo.resKindList;var promotionRentResTypeList=cardInfo.promotionRentResTypeList;var ifNotAllResKind=cardInfo.ifNotAllResKind;var rowIndex=cardInfo.rowIndex;
var subsidyAmount=cardInfo.subsidyAmount;var realPriceCd=cardInfo.realPriceCd;var promotionType=cardInfo.promotionType;var executeRequest=_buscard.executeRequest;var util=dojo.require("orderaccept.prodofferaccept.util");
var constObj={DEFAULT_SERVICE_OFFER_ID:"2211"};var serviceParamBO=a.$remote("serviceParamBO");var resultJsonString=executeRequest("goodsSaleAcceptAction","SerialNumScan");var inputPermission="";if(resultJsonString){var res=eval("("+resultJsonString+")");
inputPermission=res.flag;}Me.$("deviceNo").onpaste=function(){if(inputPermission==0){event.srcElement.value="";event.srcElement.focus();alert("\u60a8\u6ca1\u6709\u6743\u9650\u624b\u52a8\u8f93\u5165\u624b\u673a\u4e32\u53f7!");
return false;}};Me.$("deviceNo").oncopy=function(){if(inputPermission==0){event.srcElement.value="";event.srcElement.focus();alert("\u60a8\u6ca1\u6709\u6743\u9650\u624b\u52a8\u8f93\u5165\u624b\u673a\u4e32\u53f7!");
return false;}};Me.$("deviceNo").onkeydown=function(){if(inputPermission==0){if(event.keyCode!=13){event.srcElement.value="";event.srcElement.focus();alert("\u60a8\u6ca1\u6709\u6743\u9650\u624b\u52a8\u8f93\u5165\u624b\u673a\u4e32\u53f7!");
return false;}}};Me.$("deviceNo").onblur=function(){var deviceNo=Me.$("deviceNo").value;if(deviceNo==""){dojo.forEach(dojo.global.$appContext$.deviceNoList||[],function(oneDeviceNo){if(oneDeviceNo.rowIndex==rowIndex){oneDeviceNo.deviceNo="";
}});return;}deviceNo=Me.doTrim(deviceNo);var para="deviceNo="+deviceNo;var resd=executeRequest("prodOfferSaleAjaxAction","isADeviceNo",para);if(resd){var resJson=eval("("+resd+")");if(resJson.SPECIAL_FLAG==1){if(promotionType==1){para+="&operKind=3";
}else{if(promotionType==6){para+="&operKind=4";}}para+="&terminalType=1";var resData=executeRequest("prodOfferSaleAjaxAction","doCheckARent",para);if(resData){var resObj=eval("("+resData+")");var flag=resObj.FLAG;
if(flag!=1){alert(resObj.MSG);return;}}}}var IfUse=dojo.some(dojo.global.$appContext$.deviceNoList||[],function(oneDeviceNo){return oneDeviceNo.deviceNo==deviceNo&&oneDeviceNo.rowIndex!=rowIndex;});if(IfUse){alert("\u7ec8\u7aef\u4e32\u53f7\u5728\u540c\u4e00\u7b14\u8ba2\u5355\u4e2d\u5df2\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return;}if(mktResCd==36){if(Me.$("giftNo")&&Me.$("giftNo").value){var param="giftNo="+Me.$("giftNo").value+"&deviceNo="+Me.$("deviceNo").value;var result=executeRequest("prodOfferSaleAjaxAction","checkIfTerminalCouponBind",param);
if(result){var retObj=eval("("+result+")");if(retObj.FLAG==0){alert("\u8f93\u5165\u7ec8\u7aef\u4e32\u53f7\u4e0e\u793c\u5238\u7f16\u53f7\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return;}}}}var queryInfoObj={INST_ID:"0",MOBILE_SOURCE:"0",NEWOLD_STATUS:"1",RESOURCE_KIND:"0",SUGGEST_PRICE:"0",BELONGS_TO:"0",RES_ID:"0",MOBILE_COLOR:"0",COST_PRICE:"0"};
var validInfoObj={checkSaleMobile:"1"};var queryJsonInfo=BusCard.util.toJson(queryInfoObj);var validJsonInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+deviceNo;parameter+="&serviceOfferId="+constObj.DEFAULT_SERVICE_OFFER_ID;
parameter+="&mktResType=4";parameter+="&queryJsonInfo="+queryJsonInfo;parameter+="&productId=''";parameter+="&validJsonInfo="+validJsonInfo;parameter+="&cityCode="+cardInfo.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getResListInfo",parameter);
var result="-1";try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){var resId=jsonResultObj.RES_ID;
if(mktResCd==20||mktResCd==21){var isRight=dojo.some(promotionRentResTypeList||[],function(oneRentType){return oneRentType==resId;});if(!resId||!isRight){alert("\u83b7\u53d6\u7684\u7ec8\u7aef\u7c7b\u578b\u4e0e\u6240\u9009\u9500\u552e\u54c1\u6307\u5b9a\u7ec8\u7aef\u7c7b\u578b\u4e0d\u7b26\u8bf7\u91cd\u65b0\u8f93\u5165\u8bbe\u5907\u7f16\u53f7");
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}if(resKindList&&resKindList.length>0&&!ifNotAllResKind){var isRightResKind=dojo.some(resKindList||[],function(oneResKind){return jsonResultObj.RESOURCE_KIND==oneResKind.resourceKind;
});if(!isRightResKind){alert("\u5177\u4f53\u7ec8\u7aef\u578b\u53f7\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9");Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}Me.$("mktResInstId").value=jsonResultObj.INST_ID;
Me.$("moblieSourse").value=jsonResultObj.MOBILE_SOURCE;Me.$("moblieSourse").onchange();Me.$("resourceKind").value=jsonResultObj.RESOURCE_KIND;Me.$("shouldFee").value=jsonResultObj.SUGGEST_PRICE/100;var reaPrice="0";
if(Me.$("shouldFee").value>0){reaPrice=eval(Me.$("shouldFee").value-subsidyAmount);if(reaPrice<0){reaPrice="0";}}var detailWidget=util.DomHelper.getParentWidget(Me.$("deviceNo"),"orderaccept.custom.TooltipDialog");
if(detailWidget&&detailWidget.promotionItemsCard.busCardInstance.$(realPriceCd)){detailWidget.promotionItemsCard.busCardInstance.$(realPriceCd).value=reaPrice;}Me.$("realFee").value=reaPrice;if(jsonResultObj.BELONGS_TO&&jsonResultObj.BELONGS_TO!="null"){Me.$("mobileAgent").value=jsonResultObj.BELONGS_TO;
}else{Me.$("mobileAgent").value="";}Me.$("mktResId").value=deviceNo;Me.$("moblieSourse").disabled=true;Me.$("resourceKind").disabled=true;if(!dojo.global.$appContext$.deviceNoList){var deviceNoList=[];
deviceNoList.push({rowIndex:rowIndex,deviceNo:deviceNo});dojo.global.$appContext$.set("deviceNoList",deviceNoList);}else{var flag=dojo.some(dojo.global.$appContext$.deviceNoList,function(oneDeviceNo){return oneDeviceNo.deviceNo==deviceNo;
});if(!flag){dojo.global.$appContext$.deviceNoList.push({rowIndex:rowIndex,deviceNo:deviceNo});}}}else{alert(jsonResultObj.message);Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}}catch(e){alert(e);
Me.$("deviceNo").value="";Me.$("deviceNo").focus();return false;}};Me.doTrim=function(str){return/^\s*(.*?)\s*$/.exec(str)[1];};var refleshResourceKind=function(moblieSourse){var cdata=serviceParamBO.getResourceKind(moblieSourse);
if(cdata&&cdata.list){a.$rs(Me.$("resourceKind"),cdata.list);}};if(Me.$("moblieSourse")){Me.$("moblieSourse").onchange=function(){refleshResourceKind(this.value);};}var checkInputChar=function(){if(!(event.keyCode>=47&&event.keyCode<=57)){return false;
}return true;};Me.setObjReadOnly=function(name){if(name&&Me.$(name)&&Me.$(name).type=="text"){Me.$(name).readOnly=true;}return;};var cardInit=function(){Me.setObjReadOnly("moblieSourse");Me.setObjReadOnly("newoldStatus");
Me.setObjReadOnly("resourceKind");Me.setObjReadOnly("shouldFee");Me.setObjReadOnly("mobileAgent");};cardInit();});
BusCard.define("/buscardapp/rela/js/card_180_10152.js",function(_buscard,cardParam){var Me=this;var cardInfo=arguments[1];var executeRequest=_buscard.executeRequest;var validMonths=cardInfo.validMonths;
var constObj={DEFAULT_SERVICE_OFFER_ID:"4001"};Me.$("giftNo").onblur=function(){var giftNo=Me.$("giftNo").value;var verifyNo=Me.$("verifyNo").value;if(giftNo==""){return;}if(!checkIfTerminalCouponBind()){return;
}if(verifyNo==""){Me.$("verifyNo").focus();return;}getGiftInfo(giftNo,verifyNo);};Me.$("verifyNo").onblur=function(){var giftNo=Me.$("giftNo").value;var verifyNo=Me.$("verifyNo").value;if(verifyNo==""){return;
}if(giftNo==""){Me.$("giftNo").focus();return;}getGiftInfo(giftNo,verifyNo);};var checkIfTerminalCouponBind=function(){if(Me.$("deviceNo")&&Me.$("deviceNo").value){var param="giftNo="+Me.$("giftNo").value+"&deviceNo="+Me.$("deviceNo").value;
var result=executeRequest("prodOfferSaleAjaxAction","checkIfTerminalCouponBind",param);if(result){var retObj=eval("("+result+")");if(retObj.FLAG==0){alert("\u8f93\u5165\u793c\u5238\u7f16\u53f7\u4e0e\u7ec8\u7aef\u7f16\u53f7\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");
Me.$("giftNo").value="";Me.$("giftNo").focus();return false;}}}return true;};var getGiftInfo=function(giftNo,verifyNo){var queryInfoObj={CARD_VALUE:"0",VALID_DATE:"0",INST_ID:"0"};var validInfoObj={checkStatus:"1"};
var queryInfo=BusCard.util.toJson(queryInfoObj);var validInfo=BusCard.util.toJson(validInfoObj);var parameter="mktResId="+giftNo;parameter+="&serviceOfferId="+constObj.DEFAULT_SERVICE_OFFER_ID;parameter+="&mktResType=7";
parameter+="&queryJsonInfo="+queryInfo;parameter+="&productId=''";parameter+="&validJsonInfo="+validInfo;parameter+="&cityCode="+cardInfo.cityCode;var resultJsonStr=executeRequest("prodOfferSaleAjaxAction","getResListInfo",parameter);
try{var jsonResultObj=(typeof resultJsonStr=="string")?eval("("+resultJsonStr+")"):resultJsonStr;if(jsonResultObj&&jsonResultObj.flag&&jsonResultObj.flag=="1"){Me.$("advancedPayment").value=jsonResultObj.CARD_VALUE/100;
if(jsonResultObj.VALID_DATE&&jsonResultObj.VALID_DATE!="null"){Me.$("advancedEffDate").value=jsonResultObj.VALID_DATE;}else{Me.$("advancedEffDate").value="";}Me.$("mktGiftResInstId").value=jsonResultObj.INST_ID;
}else{alert(jsonResultObj.message);Me.$("giftNo").value="";Me.$("verifyNo").value="";Me.$("giftNo").focus();return false;}}catch(e){alert(e);Me.$("giftNo").value="";Me.$("verifyNo").value="";Me.$("giftNo").focus();
return false;}};Me.checkSameCouponNo=function(couponNo){var couponNoList=null;try{couponNoList=ordermgr.accept.compnew._coupon_no_list_;}catch(e){}if(couponNoList){var len=couponNoList.length;var count=0;
while(len--){var current=couponNoList[len].couponNO;if(current.length>0&&current==couponNo){count++;}}if(count>0){alert("\u53f7\u7801\u5df2\u9009\u7528\u8bf7\u91cd\u65b0\u9009\u62e9\uff01");Me.$("giftNo").value="";
Me.$("giftNo").focus();return false;}}return true;};Me.setObjReadOnly=function(name){if(name&&Me.$(name)&&Me.$(name).type=="text"){Me.$(name).readOnly=true;}return;};var cardInit=function(){Me.setObjReadOnly("advancedPayment");
if(validMonths){Me.$("advancedDays").value=validMonths;Me.setObjReadOnly("advancedDays");}};cardInit();});
BusCard.define("/buscardapp/rela/js/cardService190.js",function(b,a){var c=this;c.$("serviceId").onblur=function(){var d=c.$("serviceId").value;if(!/^\d+$/.test(d)){orderaccept.common.dialog.MessageBox.alert({message:"\u4e1a\u52a1\u53f7\u7801\u5fc5\u987b\u8f93\u5165\u7eaf\u6570\u5b57!"});
c.$("serviceId").value="";return false;}};(function(){if(c.$("serviceId")){c.$("serviceId").title="190\u5fc5\u987b\u8f93\u5165\u533a\u53f7";}if(c.$("label_serviceId")){c.$("label_serviceId").innerHTML="<span class='buscard-label'><span class='formRequested'>*</span>\u4e1a\u52a1\u53f7\u7801\uff1a<font color='red'>(190\u5fc5\u987b\u8f93\u5165\u533a\u53f7)<font></span>";
}})();});
BusCard.define("/buscardapp/rela/js/cardServiceNetType99.js",function(d,c){var e=this;var a=arguments[1];e.uniqueId=a.uniqueId;e.$("serviceId").onblur=function(){var f=e.$("serviceId").value;if(!/^\d+$/.test(f)){orderaccept.common.dialog.MessageBox.alert({message:"\u4e1a\u52a1\u53f7\u7801\u5fc5\u987b\u8f93\u5165\u7eaf\u6570\u5b57!"});
e.$("serviceId").value="";return false;}var b=e.getSPAttrValue();if(b!=null){if(b==1){if(f.length!=5){orderaccept.common.dialog.MessageBox.alert({message:"\u5f53SP\u767b\u9646\u534f\u8bae\u7c7b\u578b\u9009\u62e9\u201cSGIP\u201d\u65f6\uff0c\u4e1a\u52a1\u53f7\u7801\u5fc5\u987b\u662f5\u4f4d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"});
e.$("serviceId").value="";return false;}}else{if(b==2){if(f.length<5||f.length>8){orderaccept.common.dialog.MessageBox.alert({message:"\u5f53SP\u767b\u9646\u534f\u8bae\u7c7b\u578b\u9009\u62e9\u201cSMGP\u201d\u65f6\uff0c\u4e1a\u52a1\u53f7\u7801\u53ef\u4ee5\u662f5~8\u4f4d\u7684\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"});
e.$("serviceId").value="";return false;}}}}};e.getSPAttrValue=function(){if(prodOfferAcceptLoader&&prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+e.uniqueId].attrCardWidget.busCardInstance){var b=prodOfferAcceptLoader.serviceCardWidgetMap["serviceCardWidget_"+e.uniqueId].attrCardWidget.busCardInstance.$("100019");
if(!!b){return b.value;}}return null;};});
BusCard.define("/buscardapp/rela/js/4008NumberCheck.js",function(c,b){var f=this;var e=dojo.require("orderaccept.common.js.ConstantsPool");var d=e.load("ServingStatusConst").ServingStatusConst;var a=e.load("ProductIdConst").ProductIdConst;
f.$("serviceId").onblur=function(){if(BusCard.trim(f.$("serviceId").value)!=""){var g="";if(!!b.cityCode){g=b.cityCode;}else{g=$ac$.requestParam.customerData.cityCode;}var h=BusCard.$remote("mktResInterfaceBO").check400Number(g,56,BusCard.trim(f.$("serviceId").value));
if(h.FLAG!=1){orderaccept.common.dialog.MessageBox.alert({message:h.MSG});f.$("serviceId").value="";return false;}else{var j="";if(!!b.prodOfferId){j=b.prodOfferId;}else{j=$ac$.selectedMainProdOfferInfoVO.prodOfferId;
}var i=BusCard.$remote("serviceParamBO").getProductLevel(j);if(i!=null&&i>h.NUMBE_SORT){orderaccept.common.dialog.MessageBox.alert({message:""});f.$("serviceId").value="";return false;}}}};});

